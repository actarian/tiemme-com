/**
 * @license tiemme-com v1.0.0
 * (c) 2020 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("rxcomp"),require("rxcomp-form"),require("rxjs/operators"),require("rxjs")):"function"==typeof define&&define.amd?define(["rxcomp","rxcomp-form","rxjs/operators","rxjs"],e):e((t=t||self).rxcomp,t.rxcomp.form,t.rxjs.operators,t.rxjs)}(this,(function(t,e,n,i){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var c="select",p="or",d=function(){function t(t){this.change$=new i.BehaviorSubject,this.mode=c,this.placeholder="Select",this.values=[],this.options=[],t&&(t.mode===c&&t.options.unshift({label:t.placeholder,values:[]}),Object.assign(this,t))}var e=t.prototype;return e.filter=function(t,e){return!0},e.match=function(t){var e,n=this;return this.mode===p?(e=!this.values.length,this.values.forEach((function(i){e=e||n.filter(t,i)}))):(e=!0,this.values.forEach((function(i){e=e&&n.filter(t,i)}))),e},e.getLabel=function(){return this.mode===c&&this.placeholder||this.label},e.has=function(t){return-1!==this.values.indexOf(t.value)},e.set=function(t){this.mode===c&&(this.values=[]),-1===this.values.indexOf(t.value)&&void 0!==t.value&&this.values.push(t.value),this.mode===c&&(this.placeholder=t.label),this.change$.next()},e.remove=function(t){var e=this.values.indexOf(t.value);if(-1!==e&&this.values.splice(e,1),this.mode===c){var n=this.options[0];this.placeholder=n.label}this.change$.next()},e.toggle=function(t){this.has(t)?this.remove(t):this.set(t)},e.toggleActive=function(){this.active=!this.active},t}(),h=function(){function t(){}return t.get=function(t){return new URLSearchParams(window.location.search).get(t)},t.set=function(t,e){var n=new URLSearchParams(window.location.search);"string"==typeof t?n.set(t,e):n.set(t,""),this.replace(n)},t.replace=function(t){if(window.history&&window.history.pushState){var e=document.title,n=window.location.href.split("?")[0]+"?"+t.toString();window.history.pushState(t.toString(),e,n)}},t.deserialize=function(t){var e=this.get("params");return this.decode(t,e)},t.serialize=function(t,e){var n=this.deserialize(),i=this.encode(t,e,n);this.set("params",i)},t.decode=function(t,e){var n=null;if(e){var i=window.atob(e);n=JSON.parse(i)}return t&&n&&(n=n[t]),n||null},t.encode=function(t,e,n){n=n||{};"string"==typeof t?n[t]=e:n=t;var i=JSON.stringify(n);return window.btoa(i)},t}(),f=function(){function t(t,e,n){var i={};this.filters=i,t&&(Object.keys(t).forEach((function(e){var o=new d(t[e]);"function"==typeof n&&n(e,o),i[e]=o})),this.deserialize(this.filters,e))}var e=t.prototype;return e.getParamsCount=function(t){return t?Object.keys(t).reduce((function(e,n,i){var o=t[n];return e+(o?o.length:0)}),0):0},e.deserialize=function(t,e){var n;e&&this.getParamsCount(e)&&(n=e);var i=h.deserialize("filters");return i&&this.getParamsCount(i)&&(n=i),n&&Object.keys(t).forEach((function(e){t[e].values=n[e]||[]})),t},e.serialize=function(t){var e={},n=!1;return Object.keys(t).forEach((function(i){var o=t[i];o.values&&o.values.length>0&&(e[i]=o.values,n=!0)})),n||(e=null),h.serialize("filters",e),e},e.items$=function(t){var e=this,o=this.filters,r=Object.keys(o).map((function(t){return o[t].change$}));return i.merge.apply(void 0,r).pipe(n.auditTime(1),n.tap((function(){return e.serialize(o)})),n.map((function(){return e.filterItems(t)})),n.tap((function(){return e.updateFilterStates(o,t)})))},e.filterItems=function(t,e){var n=this,i=Object.keys(this.filters).map((function(t){return n.filters[t]})).filter((function(t){return t.values&&t.values.length>0}));return t=t.filter((function(t){var n=!0;return i.forEach((function(i){i!==e&&(n=n&&i.match(t))})),n}))},e.updateFilterStates=function(t,e){var n=this;Object.keys(t).forEach((function(i){var o=t[i],r=n.filterItems(e,o);o.options.forEach((function(t){var e=0;if(t.value)for(var n=0;n<r.length;){var i=r[n];o.filter(i,t.value)&&e++,n++}else e=r.length;t.count=e,t.disabled=0===e}))}))},t}(),m=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var i=e.prototype;return i.onInit=function(){var t=this,e=window.agents||[],i=window.filters||{},o=window.params||{};i.countries.mode=c,i.regions.mode=c,i.categories.mode=c;var r=new f(i,o,(function(t,e){switch(t){case"countries":e.filter=function(t,e){return t.idCountry&&-1!==t.idCountry.indexOf(e)};break;case"regions":e.filter=function(t,e){return t.idsRegions&&-1!==t.idsRegions.indexOf(e)};break;case"categories":e.filter=function(t,e){return t.categories&&-1!==t.categories.indexOf(e)};break;default:e.filter=function(t,e){return!0}}}));r.items$(e).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.items=e,t.pushChanges()})),this.filterService=r,this.filters=r.filters},i.hasCategory=function(t,e){return t.categories&&-1!==t.categories.indexOf(e)},e}(t.Component);m.meta={selector:"[agents]"};var v="41999"===window.location.port||"actarian.github.io"===window.location.host,g=-1!==["localhost","127.0.0.1","0.0.0.0"].indexOf(window.location.host.split(":")[0]),b={STATIC:v,DEVELOPMENT:g,PRODUCTION:!g},y=function(t){this.data=t},w=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e}(y),C=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e}(y),k=function(){function t(){}return t.open$=function(t){var e=this;return this.getTemplate$(t.src).pipe(n.map((function(n){return{node:e.getNode(n),data:t.data,modal:t}})),n.tap((function(t){return e.modal$.next(t)})),n.switchMap((function(t){return e.events$})))},t.load$=function(t){},t.getTemplate$=function(t){return i.from(fetch(t).then((function(t){return t.text()})))},t.getNode=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild},t.reject=function(t){this.modal$.next(null),this.events$.next(new C(t))},t.resolve=function(t){this.modal$.next(null),this.events$.next(new w(t))},t}();k.modal$=new i.Subject,k.events$=new i.Subject;var x=function(){function t(){}return t.http$=function(t,e,o,r){var s=this;void 0===r&&(r="json");var a=null;return i.from(fetch(this.getUrl(e,r),{method:t,headers:{Accept:"application/json","Content-Type":"application/json"},body:-1!==["POST","PUT","PATCH"].indexOf(t)?JSON.stringify(o):void 0}).then((function(t){return a=t,t.ok?t[r]():t.json().then((function(t){return Promise.reject(t)}))}))).pipe(n.catchError((function(t){return i.throwError(s.getError(t,a))})))},t.get$=function(t,e,n){var i=this.query(e);return this.http$("GET",""+t+i,void 0,n)},t.delete$=function(t){return this.http$("DELETE",t)},t.post$=function(t,e){return this.http$("POST",t,e)},t.put$=function(t,e){return this.http$("PUT",t,e)},t.patch$=function(t,e){return this.http$("PATCH",t,e)},t.query=function(t){return""},t.getUrl=function(t,e){return void 0===e&&(e="json"),v&&"json"===e&&0===t.indexOf("/")?"."+t+".json":t},t.getError=function(t,e){var n="object"==typeof t?t:{};return n.statusCode||(n.statusCode=e?e.status:0),n.statusMessage||(n.statusMessage=e?e.statusText:t),console.log("HttpService.getError",n,t),n},t}(),$=function(){function t(){}return t.delete=function(t){this.isLocalStorageSupported()&&window.localStorage.removeItem(t)},t.exist=function(t){if(this.isLocalStorageSupported())return void 0!==window.localStorage[t]},t.get=function(t){var e=null;if(this.isLocalStorageSupported()&&void 0!==window.localStorage[t])try{e=JSON.parse(window.localStorage[t])}catch(e){console.log("LocalStorageService.get.error parsing",t,e)}return e},t.set=function(t,e){if(this.isLocalStorageSupported())try{var n=[],i=JSON.stringify(e,(function(t,e){if("object"==typeof e&&null!==e){if(-1!==n.indexOf(e))return;n.push(e)}return e}));window.localStorage.setItem(t,i)}catch(n){console.log("LocalStorageService.set.error serializing",t,e,n)}},t.isLocalStorageSupported=function(){if(this.supported)return!0;var t=!1;try{(t="localStorage"in window&&null!==window.localStorage)?(window.localStorage.setItem("test","1"),window.localStorage.removeItem("test")):t=!1}catch(e){t=!1}return this.supported=t,t},t}(),I=function(){function t(){}return t.setUser=function(t){this.user$.next(t)},t.me$=function(){var t=this;return x.get$("/api/users/me").pipe(n.map((function(e){return t.mapStatic__(e,"me")})),n.switchMap((function(e){return t.setUser(e),t.user$})))},t.register$=function(t){var e=this;return x.post$("/api/users/register",t).pipe(n.map((function(t){return e.mapStatic__(t,"register")})))},t.update=function(t){var e=this;return x.post$("/api/users/updateprofile",t).pipe(n.map((function(t){return e.mapStatic__(t,"register")})))},t.login$=function(t){var e=this;return x.post$("/api/users/login",t).pipe(n.map((function(t){return e.mapStatic__(t,"login")})))},t.logout$=function(){var t=this;return x.post$("/api/users/logout").pipe(n.map((function(e){return t.mapStatic__(e,"logout")})))},t.retrieve$=function(t){var e=this;return x.post$("/api/users/retrievepassword",t).pipe(n.map((function(t){return e.mapStatic__(t,"retrieve")})))},t.mapStatic__=function(t,e){if(void 0===e&&(e="me"),!v)return t;switch(e){case"me":$.exist("user")||(t=null);break;case"register":case"login":$.set("user",t);break;case"logout":$.delete("user")}return t},t}();I.user$=new i.BehaviorSubject(null);var V=v?"/tiemme-com/club-modal.html":"/Viewdoc.cshtml?co_id=23649",S=function(e){function i(){return e.apply(this,arguments)||this}u(i,e);var o=i.prototype;return o.onInit=function(){var e=this;t.getContext(this).node.classList.remove("hidden"),I.user$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){console.log("AppComponent.user$",t),e.user=t,e.pushChanges()})),setTimeout((function(){e.parseQueryString()}),500)},o.onDropped=function(t){console.log("AppComponent.onDropped",t)},o.parseQueryString=function(){switch(h.get("action")){case"login":this.openLogin();break;case"register":this.openRegister()}},o.openLogin=function(){this.openLoginRegisterModal(1)},o.openRegister=function(){this.openLoginRegisterModal(2)},o.openLoginRegisterModal=function(t){void 0===t&&(t=1),k.open$({src:V,data:{view:t}}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){t instanceof w&&I.setUser(t.data)}))},i}(t.Component);S.meta={selector:"[app-component]"};var q=function(){function t(){}return t.observer=function(){var t=this;return this.observer_||(this.readySubject_=new i.BehaviorSubject(!1),this.observerSubject_=new i.Subject,this.observer_=new IntersectionObserver((function(e){t.observerSubject_.next(e)}))),this.observer_},t.intersection$=function(t){if("IntersectionObserver"in window){var e=this.observer();return e.observe(t),this.observerSubject_.pipe(n.map((function(e){return e.find((function(e){return e.target===t}))})),n.filter((function(t){return void 0!==t&&t.isIntersecting})),n.first(),n.finalize((function(){return e.unobserve(t)})))}return i.of({target:t})},t}(),_=function(e){function i(){return e.apply(this,arguments)||this}u(i,e);var o=i.prototype;return o.onInit=function(){t.getContext(this).node.classList.add("appear")},o.onChanges=function(){if(!this.appeared){this.appeared=!0;var e=t.getContext(this).node;q.intersection$(e).pipe(n.first(),n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.classList.add("appeared")}))}},i}(t.Directive);_.meta={selector:"[appear]"};var O=v?"/tiemme-com/services-bim-modal-more.html":"/Viewdoc.cshtml?co_id=25206",R=v?"/tiemme-com/services-bim-modal-hint.html":"/Viewdoc.cshtml?co_id=25207",F=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var i=e.prototype;return i.onInit=function(){var t=this,e=window.files||[],i=window.filters||{},o=window.params||{};i.departments.mode=p,i.catalogues.mode=p;var r=new f(i,o,(function(t,e){switch(t){case"extensions":e.filter=function(t,e){return t.files.find((function(t){return t.fileExtension===e}))};break;default:e.filter=function(t,e){return-1!==t.features.indexOf(e)}}}));r.items$(e).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.items=e,t.pushChanges()})),this.filterService=r,this.filters=r.filters,this.visibleFilters={departments:r.filters.departments},this.fake__()},i.openMore=function(t){t.preventDefault(),k.open$({src:O,data:null}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){}))},i.openHint=function(t){t.preventDefault(),k.open$({src:R,data:null}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){}))},i.toggleFilter=function(t){var e=this;Object.keys(this.filters).forEach((function(n){var i=e.filters[n];i.active=i===t&&!i.active})),this.pushChanges()},i.fake__=function(){var t=this;x.get$("/api/bim/excel").pipe(n.first()).subscribe((function(e){var n=[];e.forEach((function(t){var e=n.find((function(e){return e.id===t.productId}));e||(e={id:t.productId,image:t.image,code:t.productCode,title:t.productName,abstract:t.description,files:[],features:[t.category1Id,t.category2Id],slug:"https://tiemmeraccorderie.wslabs.it/it/prodotti/componenti-idraulici/tubi/tubi-multistrato-al-cobrapex/standard/0600/"},n.push(e)),e.files.find((function(e){return e.fileName===t.fileName}))||e.files.push({fileName:t.fileName,fileExtension:"."+t.fileName.split(".").pop(),fileSize:45e3,url:"https://tiemmeraccorderie.wslabs.it/media/files/"+t.fileName})})),console.log(JSON.stringify(n));var i=[];e.forEach((function(e){var n=i.find((function(t){return t.value===e.category2Id}));n?n.count++:i.push({value:e.category2Id,label:t.titleCase__(e.category2Description),count:1})})),i.sort((function(t,e){return-1*(t.count-e.count)})),console.log(JSON.stringify(i.map((function(t){return delete t.count,t}))));var o=[];e.forEach((function(e){var n=o.find((function(t){return t.value===e.category1Id}));n?n.count++:o.push({value:e.category1Id,label:t.titleCase__(e.category1Description),count:1})})),o.sort((function(t,e){return-1*(t.count-e.count)})),console.log(JSON.stringify(o.map((function(t){return delete t.count,t}))));var r={id:"menu",title:"Area",items:o.map((function(t){return{id:t.value,label:t.label,title:"Catalogo",items:i.filter((function(e){return n.find((function(n){return-1!==n.features.indexOf(t.value)&&-1!==n.features.indexOf(e.value)}))})).map((function(t){return{id:t.value,label:t.label,title:"Prodotto",items:n.filter((function(e){return-1!==e.features.indexOf(t.value)})).map((function(t){return{id:t.id,label:t.title}}))}}))}}))};console.log(JSON.stringify(r))}))},i.titleCase__=function(t){return t.toLowerCase().split(" ").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join(" ")},e}(t.Component);F.meta={selector:"[bim-library-01]"};var L=1e6,E=function(e){function i(){return e.apply(this,arguments)||this}u(i,e);var o=i.prototype;return o.onInit=function(){var e=this,o=t.getContext(this).node,r=o.getAttribute("dropdown-trigger");this.trigger=r?o.querySelector(r):o,this.opened=null,this.onClick=this.onClick.bind(this),this.onDocumentClick=this.onDocumentClick.bind(this),this.openDropdown=this.openDropdown.bind(this),this.closeDropdown=this.closeDropdown.bind(this),this.addListeners(),i.dropdown$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.id===t?o.classList.add("dropped"):o.classList.remove("dropped")}))},o.onClick=function(e){var n=t.getContext(this).node;null===this.opened?this.openDropdown():n.querySelector("[dropdown-item]")||this.closeDropdown()},o.onDocumentClick=function(e){var n=t.getContext(this).node;n===e.target||n.contains(e.target)||this.closeDropdown()},o.openDropdown=function(){null===this.opened&&(this.opened=!0,this.addDocumentListeners(),i.dropdown$.next(this.id),this.dropped.next(this.id))},o.closeDropdown=function(){null!==this.opened&&(this.removeDocumentListeners(),this.opened=null,i.dropdown$.getValue()===this.id&&(i.dropdown$.next(null),this.dropped.next(null)))},o.addListeners=function(){this.trigger.addEventListener("click",this.onClick)},o.addDocumentListeners=function(){document.addEventListener("click",this.onDocumentClick)},o.removeListeners=function(){this.trigger.removeEventListener("click",this.onClick)},o.removeDocumentListeners=function(){document.removeEventListener("click",this.onDocumentClick)},o.onDestroy=function(){this.removeListeners(),this.removeDocumentListeners()},i.nextId=function(){return L++},r(i,[{key:"id",get:function(){return this.dropdown||this.id_||(this.id_=i.nextId())}}]),i}(t.Directive);E.meta={selector:"[dropdown]",inputs:["dropdown","dropdown-trigger"],outputs:["dropped"]},E.dropdown$=new i.BehaviorSubject(null);var N=v?"/tiemme-com/services-bim-modal-more.html":"/Viewdoc.cshtml?co_id=25206",T=v?"/tiemme-com/services-bim-modal-hint.html":"/Viewdoc.cshtml?co_id=25207",U=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var i=e.prototype;return i.onInit=function(){var t=window.menu||{},e=window.files||[];this.menu=t,this.items=e,this.visibleItems=e.slice(),this.breadcrumb=[t]},i.setMenuItem=function(t,e){!function t(e){e&&e.forEach((function(e){delete e.selectedId,delete e.selectedLabel,t(e.items)}))}(e.items);var n=this.breadcrumb.reduce((function(t,n,i){return n.id===e.id?i:t}),-1);if(-1!==n){e.selectedId=t.id,e.selectedLabel=t.label;var i=this.breadcrumb.slice(0,n+1);t.items&&i.push(t),this.breadcrumb=[],E.dropdown$.next(null),this.pushChanges(),this.breadcrumb=i,this.visibleItems=this.items.filter((function(t){return i.reduce((function(e,n){return n.selectedId?e&&(-1!==t.features.indexOf(n.selectedId)||t.id===n.selectedId):e}),!0)})),this.pushChanges()}},i.openMore=function(t){t.preventDefault(),k.open$({src:N,data:null}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){}))},i.openHint=function(t){t.preventDefault(),k.open$({src:T,data:null}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){}))},i.fake__=function(){var t=this;x.get$("/api/bim/excel").pipe(n.first()).subscribe((function(e){var n=[];e.forEach((function(t){var e,i=n.find((function(e){return e.id===t.productId}));i||((e={id:t.productId,image:t.image,code:t.productCode,title:t.productName,files:[],features:[t.category1Id,t.category2Id,t.category3Id]}).image="https://tiemmeraccorderie.wslabs.it/"+t.image,e.slug="https://tiemmeraccorderie.wslabs.it/it/prodotti/componenti-idraulici/tubi/tubi-multistrato-al-cobrapex/standard/0600/",i=e,t.category4Id&&i.features.push(t.category4Id),n.push(i));i.files.find((function(e){return e.fileName===t.fileName}))||i.files.push({description:t.description,fileName:t.fileName,fileExtension:"."+t.fileName.split(".").pop(),fileSize:45e3,url:"https://tiemmeraccorderie.wslabs.it/media/files/"+t.fileName})})),console.log("products",JSON.stringify(n));var i=[];e.forEach((function(e){var n=i.find((function(t){return t.value===e.category4Id}));n?n.count++:i.push({value:e.category4Id,label:t.titleCase__(e.category4Description),count:1})})),i.sort((function(t,e){return-1*(t.count-e.count)})),console.log("families",JSON.stringify(i.map((function(t){return delete t.count,t}))));var o=[];e.forEach((function(e){var n=o.find((function(t){return t.value===e.category3Id}));n?n.count++:o.push({value:e.category3Id,label:t.titleCase__(e.category3Description),count:1})})),o.sort((function(t,e){return-1*(t.count-e.count)})),console.log("solutions",JSON.stringify(o.map((function(t){return delete t.count,t}))));var r=[];e.forEach((function(e){var n=r.find((function(t){return t.value===e.category2Id}));n?n.count++:r.push({value:e.category2Id,label:t.titleCase__(e.category2Description),count:1})})),r.sort((function(t,e){return-1*(t.count-e.count)})),console.log("catalogues",JSON.stringify(r.map((function(t){return delete t.count,t}))));var s=[];e.forEach((function(e){var n=s.find((function(t){return t.value===e.category1Id}));n?n.count++:s.push({value:e.category1Id,label:t.titleCase__(e.category1Description),count:1})})),s.sort((function(t,e){return-1*(t.count-e.count)})),console.log("departments",JSON.stringify(s.map((function(t){return delete t.count,t}))));var a={id:"menu",title:"Area",items:s.map((function(t){return{id:t.value,label:t.label,title:"Catalogo",items:r.filter((function(e){return n.find((function(n){return-1!==n.features.indexOf(t.value)&&-1!==n.features.indexOf(e.value)}))})).map((function(e){return{id:e.value,label:e.label,title:"Soluzione",items:o.filter((function(i){return n.find((function(n){return-1!==n.features.indexOf(t.value)&&-1!==n.features.indexOf(e.value)&&-1!==n.features.indexOf(i.value)}))})).map((function(o){var r={id:o.value,label:o.label,title:"Famiglia",items:i.filter((function(i){return n.find((function(n){return-1!==n.features.indexOf(t.value)&&-1!==n.features.indexOf(e.value)&&-1!==n.features.indexOf(o.value)&&-1!==n.features.indexOf(i.value)}))})).map((function(t){return{id:t.value,label:t.label,title:"Prodotto",items:n.filter((function(e){return-1!==e.features.indexOf(t.value)})).map((function(t){return{id:t.id,label:t.title}}))}}))};return 0===r.items.length&&(r={id:o.value,label:o.label,title:"Prodotto",items:n.filter((function(t){return-1!==t.features.indexOf(o.value)})).map((function(t){return{id:t.id,label:t.title}}))}),r}))}}))}}))};console.log("menu",JSON.stringify(a))}))},i.titleCase__=function(t){return t.toLowerCase().split(" ").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join(" ")},e}(t.Component);U.meta={selector:"[bim-library-02]"};var P=function(){function t(e,n){var i=this;this.mode=c,this.placeholder="Select",this.values_=[],this.options=[],this.items=[],e&&(e.mode=e.mode||p,e.options=e.options?e.options.map((function(e){return e.options?new t(e,n||i):e})):[],e.mode===c&&e.options.unshift({label:e.placeholder,values:[]}),Object.assign(this,e)),this.parent=n,n&&n.items.push.apply(n.items,this.options)}r(t,[{key:"values",get:function(){return this.parent?this.parent.values:this.values_}},{key:"change$",get:function(){return this.parent?this.parent.change$:(this.change$_||(this.change$_=new i.BehaviorSubject),this.change$_)}}]);var e=t.prototype;return e.filter=function(t,e){return!0},e.match=function(t){var e,n=this;return this.mode===p?(e=!this.values.length,this.values.forEach((function(i){e=e||n.filter(t,i)}))):(e=!0,this.values.forEach((function(i){e=e&&n.filter(t,i)}))),e},e.getLabel=function(){return this.mode===c&&this.placeholder||this.label},e.has=function(t){return-1!==this.values.indexOf(t.value)},e.set=function(t){this.mode===c&&(this.values_=[]),-1===this.values.indexOf(t.value)&&void 0!==t.value&&this.values.push(t.value),this.mode===c&&(this.placeholder=t.label),this.change$.next()},e.remove=function(t){var e=this.values.indexOf(t.value);if(-1!==e&&this.values.splice(e,1),this.mode===c){var n=this.options[0];this.placeholder=n.label}this.change$.next()},e.toggle=function(t){this.has(t)?this.remove(t):this.set(t)},e.toggleActive=function(){this.active=!this.active},e.isMenuItem=function(e){return e instanceof t},t}(),j=function(){function t(){this.filters=[]}var e=t.prototype;return e.init=function(t,e,n){return this.filters=Array.isArray(t)?t.map((function(t){return new P(t)})):[],this.flat=this.flatMap(this.filters),"function"==typeof n&&this.flat.forEach((function(t){return n(t)})),this.deserialize(this.filters,e),this.toggleActiveStates(this.filters),this.filters},e.items$=function(t,e,o){var r=this,s=(t=this.init(t,null,o)).map((function(t){return t.change$}));return i.merge.apply(void 0,s).pipe(n.auditTime(1),n.tap((function(){return r.serialize(t)})),n.map((function(){return r.filterItems(e)})),n.tap((function(){return r.updateFilterStates(r.flat,e)})))},e.flatMap=function(t,e){var n=this;return e=e||[],t.forEach((function(t){t instanceof P&&e.push(t),t.options&&n.flatMap(t.options,e)})),e},e.filterItems=function(t,e){var n=this.filters.filter((function(t){return t.values&&t.values.length>0}));return e||console.log("cycles",n.length,"x",t.length,"=",n.length*t.length),n.length?t.filter((function(t){var i=!0;return n.forEach((function(n){n!==e&&(i=i&&n.match(t))})),i})):t.slice()},e.updateFilterStates=function(t,e){var n=this;t.forEach((function(t){var i=n.filterItems(e,t.parent?t.parent:t);t.options.forEach((function(e){var n=0;if(e.value)for(var o=0;o<i.length;){var r=i[o];t.filter(r,e.value)&&n++,o++}else n=i.length;e.count=n,e.disabled=0===n}))}))},e.deserialize=function(t,e){var n;e&&this.getParamsCount(e)&&(n=e);var i=h.deserialize("filters");return i&&this.getParamsCount(i)&&(n=i),n&&t.forEach((function(t){t.values_=n[t.key+"-"+t.value]||[],console.log("deserialize",t.key+"-"+t.value,t.values_)})),t},e.hasActiveState=function(t){var e=this;return!(!t.values||-1===t.values.indexOf(t.value))||(t.options?t.options.reduce((function(t,n){return n.active=e.hasActiveState(n),t||n.active}),!1):void 0)},e.toggleActiveStates=function(t){var e=this;t&&t.forEach((function(t){t.active=e.hasActiveState(t),e.toggleActiveStates(t.options)}))},e.serialize=function(t){var e={},n=!1;return t.forEach((function(t){t.values&&t.values.length>0&&(e[t.key+"-"+t.value]=t.values,console.log("serialize",t.values),n=!0)})),n||(e=null),console.log("FilterMenuService.serialize",e),h.serialize("filters",e),e},e.getParamsCount=function(t){return t?Object.keys(t).reduce((function(e,n,i){var o=t[n];return e+(o?o.length:0)}),0):0},t}(),z=v?"/tiemme-com/services-bim-modal-more.html":"/Viewdoc.cshtml?co_id=25206",M=v?"/tiemme-com/services-bim-modal-hint.html":"/Viewdoc.cshtml?co_id=25207",D=function(e){function o(){return e.apply(this,arguments)||this}u(o,e);var r=o.prototype;return r.onInit=function(){var t=this;this.filters=[],this.items=[],this.visibleItems=[],this.filterService=new j,this.maxVisibleItems=20,this.busy=!1,this.load$().pipe(n.first()).subscribe((function(e){t.filterService.items$(e[0],e[1],(function(t){switch(t.key){case"feature":t.filter=function(t,e){return-1!==t.features.indexOf(e)};break;case"extension":t.filter=function(t,e){return t.files.find((function(t){return t.fileExtension===e}))}}})).pipe(n.takeUntil(t.unsubscribe$)).subscribe((function(e){t.maxVisibleItems=20,t.items=e,t.visibleItems=e.slice(0,t.maxVisibleItems),t.pushChanges()})),t.scroll$().pipe(n.takeUntil(t.unsubscribe$)).subscribe(),t.filters=t.filterService.filters,t.pushChanges()}))},r.scroll$=function(){var e=this,o=t.getContext(this).node;return i.fromEvent(window,"scroll").pipe(n.tap((function(){e.items.length>e.visibleItems.length&&!e.busy&&(o.getBoundingClientRect().bottom<window.innerHeight&&(e.busy=!0,e.pushChanges(),setTimeout((function(){e.busy=!1,e.maxVisibleItems+=20,e.visibleItems=e.items.slice(0,e.maxVisibleItems),e.pushChanges()}),1e3)))})))},r.load$=function(){return i.combineLatest(x.get$("/api/bim/03/filters"),x.get$("/api/bim/03/files"))},r.toggleFilter=function(t){t.active=!t.active,this.pushChanges()},r.toggleMenuItem=function(t,e){t.isMenuItem(e)&&(e.toggleActive(),this.pushChanges())},r.openMore=function(t){t.preventDefault(),k.open$({src:z,data:null}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){}))},r.openHint=function(t){t.preventDefault(),k.open$({src:M,data:null}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){}))},r.fake__=function(){var t=this;x.get$("/api/bim/excel").pipe(n.first()).subscribe((function(e){var n=[];e.forEach((function(t){var e,i=n.find((function(e){return e.id===t.productId}));i||((e={id:t.productId,image:t.image,code:t.productCode,title:t.productName,files:[],features:[t.category1Id,t.category2Id,t.category3Id]}).image="https://tiemmeraccorderie.wslabs.it/"+t.image,e.slug="https://tiemmeraccorderie.wslabs.it/it/prodotti/componenti-idraulici/tubi/tubi-multistrato-al-cobrapex/standard/0600/",i=e,t.category4Id&&i.features.push(t.category4Id),n.push(i));i.files.find((function(e){return e.fileName===t.fileName}))||i.files.push({description:t.description,fileName:t.fileName,fileExtension:"."+t.fileName.split(".").pop(),fileSize:45e3,url:"https://tiemmeraccorderie.wslabs.it/media/files/"+t.fileName})})),console.log("products",JSON.stringify(n));var i=[];e.forEach((function(e){var n=i.find((function(t){return t.value===e.category4Id}));n?n.count++:i.push({value:e.category4Id,label:t.titleCase__(e.category4Description),count:1})})),i.sort((function(t,e){return-1*(t.count-e.count)})),console.log("families",JSON.stringify(i.map((function(t){return delete t.count,t}))));var o=[];e.forEach((function(e){var n=o.find((function(t){return t.value===e.category3Id}));n?n.count++:o.push({value:e.category3Id,label:t.titleCase__(e.category3Description),count:1})})),o.sort((function(t,e){return-1*(t.count-e.count)})),console.log("solutions",JSON.stringify(o.map((function(t){return delete t.count,t}))));var r=[];e.forEach((function(e){var n=r.find((function(t){return t.value===e.category2Id}));n?n.count++:r.push({value:e.category2Id,label:t.titleCase__(e.category2Description),count:1})})),r.sort((function(t,e){return-1*(t.count-e.count)})),console.log("catalogues",JSON.stringify(r.map((function(t){return delete t.count,t}))));var s=[];e.forEach((function(e){var n=s.find((function(t){return t.value===e.category1Id}));n?n.count++:s.push({value:e.category1Id,label:t.titleCase__(e.category1Description),count:1})})),s.sort((function(t,e){return-1*(t.count-e.count)})),console.log("departments",JSON.stringify(s.map((function(t){return delete t.count,t}))));var a=s.map((function(t){return{value:t.value,label:t.label,key:"feature",options:r.filter((function(e){return n.find((function(n){return-1!==n.features.indexOf(t.value)&&-1!==n.features.indexOf(e.value)}))})).map((function(e){return{value:e.value,label:e.label,key:"feature",options:o.filter((function(i){return n.find((function(n){return-1!==n.features.indexOf(t.value)&&-1!==n.features.indexOf(e.value)&&-1!==n.features.indexOf(i.value)}))})).map((function(o){var r={value:o.value,label:o.label,key:"feature",options:i.filter((function(i){return n.find((function(n){return-1!==n.features.indexOf(t.value)&&-1!==n.features.indexOf(e.value)&&-1!==n.features.indexOf(o.value)&&-1!==n.features.indexOf(i.value)}))})).map((function(t){return{value:t.value,label:t.label}}))};return 0===r.options.length&&(r={value:o.value,label:o.label}),r}))}}))}}));a.push({value:null,label:"Estensione",key:"extension",options:[{value:".rte",label:".rte"},{value:".rfa",label:".rfa"}]}),console.log("menu",JSON.stringify(a))}))},r.titleCase__=function(t){return t.toLowerCase().split(" ").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join(" ")},o}(t.Component);D.meta={selector:"[bim-library]"};var A=function(e){function o(){return e.apply(this,arguments)||this}return u(o,e),o.prototype.onInit=function(){var e=this;this.initialFocus=!1;var o=t.getContext(this),r=o.module,s=o.node,a=o.parentInstance,l=(o.selector,this.event$=i.fromEvent(document,"click").pipe(n.filter((function(t){var n=t.target;if(s.contains(n)||!document.contains(n))e.initialFocus=!0;else if(e.initialFocus)return e.initialFocus=!1,!0})),n.shareReplay(1))),u=s.getAttribute("(clickOutside)");if(u){var c=r.makeFunction(u,["$event"]);l.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){r.resolve(c,a,t)}))}else a.clickOutside$=l},o}(t.Directive);A.meta={selector:"[(clickOutside)]"};var B=function(t){function i(){return t.apply(this,arguments)||this}u(i,t);var o=i.prototype;return o.onInit=function(){var t=this,i=new e.FormGroup({email:new e.FormControl(null,[e.Validators.RequiredValidator(),e.Validators.EmailValidator()]),checkRequest:window.antiforgery,checkField:""}),o=i.controls;this.controls=o,i.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.pushChanges()})),this.form=i,this.error=null,this.success=!1},o.test=function(){this.form.patch({email:"jhonappleseed@gmail.com",checkRequest:window.antiforgery,checkField:""})},o.reset=function(){this.form.reset()},o.onSubmit=function(){var t=this;this.form.valid?(this.form.submitted=!0,I.retrieve$(this.form.value).subscribe((function(e){console.log("ClubForgotComponent.onSubmit",e),t.sent.next(!0),t.success=!0,t.pushChanges()}),(function(e){console.log("ClubForgotComponent.error",e),t.error=e,t.pushChanges()}))):this.form.touched=!0},o.onLogin=function(){this.login.next()},o.onRegister=function(){this.register.next()},i}(t.Component);B.meta={selector:"[club-forgot]",outputs:["sent","login","register"]};var H=function(e){function i(){return e.apply(this,arguments)||this}u(i,e);var o=i.prototype;return o.onInit=function(){var e=this,i=t.getContext(this).node;this.modalNode=i.querySelector(".modal-outlet__modal"),k.modal$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.modal=t}))},o.onRegister=function(t){this.pushChanges()},o.onLogin=function(t){this.pushChanges()},o.reject=function(t){k.reject()},r(i,[{key:"modal",get:function(){return this.modal_},set:function(e){var n=t.getContext(this).module;if(this.modal_&&this.modal_.node&&(n.remove(this.modal_.node,this),this.modalNode.removeChild(this.modal_.node)),e&&e.node){this.modal_=e,this.modalNode.appendChild(e.node);n.compile(e.node)}this.modal_=e,this.pushChanges()}}]),i}(t.Component);H.meta={selector:"[modal-outlet]",template:'\n\t<div class="modal-outlet__container" [class]="{ active: modal }">\n\t\t<div class="modal-outlet__background" (click)="reject($event)"></div>\n\t\t<div class="modal-outlet__modal"></div>\n\t</div>\n\t'};var J=function(e){function n(){return e.apply(this,arguments)||this}u(n,e);var i=n.prototype;return i.onInit=function(){var e=t.getContext(this).node;this.views={SIGN_IN:1,SIGN_UP:2,FORGOTTEN:3},this.view=e.hasAttribute("view")?parseInt(e.getAttribute("view")):this.views.SIGN_IN},i.onForgot=function(t){this.view=this.views.FORGOTTEN,this.pushChanges()},i.onLogin=function(t){this.view=this.views.SIGN_IN,this.pushChanges()},i.onRegister=function(t){this.view=this.views.SIGN_UP,this.pushChanges()},i.onSignIn=function(t){console.log("ClubComponent.onSignIn",t),I.setUser(t),window.location.href=this.club},i.onSignUp=function(t){console.log("ClubComponent.onSignUp",t),I.setUser(t),window.location.href=this.club},i.onForgottenSent=function(t){},n}(t.Component);J.meta={selector:"[club]",inputs:["club"]};var W=function(e){function n(){return e.apply(this,arguments)||this}u(n,e);var i=n.prototype;return i.onInit=function(){e.prototype.onInit.call(this);var n=t.getContext(this).parentInstance;if(n instanceof H){var i=n.modal.data;this.view=i.view}},i.onSignIn=function(t){k.resolve(t)},i.onSignUp=function(t){k.resolve(t)},i.close=function(){k.reject()},n}(J);W.meta={selector:"[club-modal]"};var G=function(t){function i(){return t.apply(this,arguments)||this}u(i,t);var o=i.prototype;return o.onInit=function(){var t=this,i=new e.FormGroup({newPassword:new e.FormControl(null,[e.Validators.RequiredValidator()]),newPasswordConfirm:new e.FormControl(null,[e.Validators.RequiredValidator(),this.MatchValidator("newPassword")]),checkRequest:window.antiforgery,checkField:""}),o=i.controls;this.controls=o,i.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.pushChanges()})),this.form=i,this.error=null,this.success=!1},o.test=function(){this.form.patch({newPassword:"npword",newPasswordConfirm:"npword",checkRequest:window.antiforgery,checkField:""})},o.MatchValidator=function(t){var n=this;return new e.FormValidator((function(e){var i=n.form?n.form.get(t):null;return e&&i&&e!==i.value?{match:{value:e,match:i.value}}:null}))},o.reset=function(){this.form.reset()},o.onSubmit=function(){var t=this;this.form.valid?(this.form.patch({checkRequest:window.antiforgery,checkField:""}),this.form.submitted=!0,x.post$("/api/users/editpassword",this.form.value).subscribe((function(e){console.log("ClubPasswordEditComponent.onSubmit",e),t.success=!0,t.form.reset()}),(function(e){console.log("ClubPasswordEditComponent.error",e),t.error=e,t.pushChanges()}))):this.form.touched=!0},i}(t.Component);G.meta={selector:"[club-password-edit]"};var Y=function(t){function i(){return t.apply(this,arguments)||this}u(i,t);var o=i.prototype;return o.onInit=function(){var t=this,i=new e.FormGroup({email:new e.FormControl(null,[e.Validators.RequiredValidator(),e.Validators.EmailValidator()]),newPassword:new e.FormControl(null,[e.Validators.RequiredValidator()]),newPasswordConfirm:new e.FormControl(null,[e.Validators.RequiredValidator(),this.MatchValidator("newPassword")]),tokenEncoded:window.tokenEncoded,checkRequest:window.antiforgery,checkField:""}),o=i.controls;this.controls=o,i.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.pushChanges()})),this.form=i,this.error=null,this.success=!1},o.test=function(){this.form.patch({email:"jhonappleseed@gmail.com",newPassword:"npword",newPasswordConfirm:"npword",tokenEncoded:"TESTLOCAL",checkRequest:window.antiforgery,checkField:""})},o.MatchValidator=function(t){var n=this;return new e.FormValidator((function(e){var i=n.form?n.form.get(t):null;return e&&i&&e!==i.value?{match:{value:e,match:i.value}}:null}))},o.reset=function(){this.form.reset()},o.onSubmit=function(){var t=this;this.form.valid?(this.form.submitted=!0,x.post$("/api/users/resetpassword",this.form.value).subscribe((function(e){console.log("ClubPasswordRecoveryComponent.onSubmit",e),t.success=!0,t.form.reset()}),(function(e){console.log("ClubPasswordRecoveryComponent.error",e),t.error=e,t.pushChanges()}))):this.form.touched=!0},i}(t.Component);Y.meta={selector:"[club-password-recovery]"};var X=function(t){function o(){return t.apply(this,arguments)||this}u(o,t);var s=o.prototype;return s.onInit=function(){var t=this,o=window.data||{roles:[],countries:[],provinces:[]},r=new e.FormGroup({firstName:new e.FormControl(null,e.Validators.RequiredValidator()),lastName:new e.FormControl(null,e.Validators.RequiredValidator()),company:new e.FormControl(null,e.Validators.RequiredValidator()),role:null,country:new e.FormControl(null,e.Validators.RequiredValidator()),province:new e.FormControl(null,e.Validators.RequiredValidator()),address:new e.FormControl(null,e.Validators.RequiredValidator()),zipCode:new e.FormControl(null,e.Validators.RequiredValidator()),city:new e.FormControl(null,e.Validators.RequiredValidator()),telephone:new e.FormControl(null,e.Validators.RequiredValidator()),fax:null,email:new e.FormControl(null,[e.Validators.RequiredValidator(),e.Validators.EmailValidator()]),newsletter:null,checkRequest:window.antiforgery,checkField:""}),s=r.controls;s.role.options=o.roles,s.country.options=o.countries,s.province.options=[],this.controls=s,r.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.countryId=e.country,t.pushChanges()})),this.data=o,this.form=r,this.error=null,this.success=!1,I.me$().pipe(n.catchError((function(){return i.of(null)})),n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.form.patch(e)}))},s.test=function(){this.form.patch({firstName:"Jhon",lastName:"Appleseed",company:"Websolute",role:this.controls.role.options[0].id,country:this.controls.country.options[0].id,address:"Strada della Campanara",zipCode:"15",city:"Pesaro",telephone:"00390721411112",email:"jhonappleseed@gmail.com",checkRequest:window.antiforgery,checkField:""})},s.MatchValidator=function(t){var n=this;return new e.FormValidator((function(e){var i=n.form?n.form.get(t):null;return e&&i&&e!==i.value?{match:{value:e,match:i.value}}:null}))},s.reset=function(){this.form.reset()},s.onSubmit=function(){var t=this;this.form.valid?(this.form.submitted=!0,I.update(this.form.value).subscribe((function(e){console.log("ClubProfileComponent.onSubmit",e),t.success=!0,t.pushChanges(),t.update.next(e)}),(function(e){console.log("ClubProfileComponent.error",e),t.error=e,t.pushChanges()}))):this.form.touched=!0},r(o,[{key:"countryId",set:function(t){var e=this;if(this.countryId_!==t){this.countryId_=t;var n=this.data.provinces.filter((function(e){return String(e.idstato)===String(t)}));this.controls.province.options=n,this.controls.province.hidden=0===n.length,n.find((function(t){return t.id===e.controls.province.value}))||(this.controls.province.value=null)}}}]),o}(t.Component);X.meta={selector:"[club-profile]",outputs:["update"]};var Z=function(t){function i(){return t.apply(this,arguments)||this}u(i,t);var o=i.prototype;return o.onInit=function(){var t=this,i=new e.FormGroup({email:new e.FormControl(null,[e.Validators.RequiredValidator(),e.Validators.EmailValidator()]),password:new e.FormControl(null,e.Validators.RequiredValidator()),checkRequest:window.antiforgery,checkField:""}),o=i.controls;this.controls=o,i.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.pushChanges()})),this.form=i,this.error=null,this.success=!1},o.test=function(){this.form.patch({email:"jhonappleseed@gmail.com",password:"password",checkRequest:window.antiforgery,checkField:""})},o.reset=function(){this.form.reset()},o.onSubmit=function(){var t=this;this.form.valid?(this.form.submitted=!0,I.login$(this.form.value).subscribe((function(e){console.log("ClubSigninComponent.onSubmit",e),t.success=!0,t.pushChanges(),t.signIn.next("string"==typeof e?{status:e}:e)}),(function(e){console.log("ClubSigninComponent.error",e),t.error=e,t.pushChanges()}))):this.form.touched=!0},o.onForgot=function(){this.forgot.next()},o.onRegister=function(){this.register.next()},i}(t.Component);Z.meta={selector:"[club-signin]",outputs:["signIn","forgot","register"]};var Q=function(t){function i(){return t.apply(this,arguments)||this}u(i,t);var o=i.prototype;return o.onInit=function(){var t=this,i=window.data||{roles:[],countries:[],provinces:[]},o=new e.FormGroup({firstName:new e.FormControl(null,e.Validators.RequiredValidator()),lastName:new e.FormControl(null,e.Validators.RequiredValidator()),company:new e.FormControl(null,e.Validators.RequiredValidator()),role:null,country:new e.FormControl(null,e.Validators.RequiredValidator()),province:new e.FormControl(null,e.Validators.RequiredValidator()),address:new e.FormControl(null,e.Validators.RequiredValidator()),zipCode:new e.FormControl(null,e.Validators.RequiredValidator()),city:new e.FormControl(null,e.Validators.RequiredValidator()),telephone:new e.FormControl(null,e.Validators.RequiredValidator()),fax:null,email:new e.FormControl(null,[e.Validators.RequiredValidator(),e.Validators.EmailValidator()]),privacy:new e.FormControl(null,e.Validators.RequiredTrueValidator()),newsletter:null,checkRequest:window.antiforgery,checkField:""}),r=o.controls;r.role.options=i.roles,r.country.options=i.countries,r.province.options=[],this.controls=r,o.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.countryId=e.country,t.pushChanges()})),this.data=i,this.form=o,this.error=null,this.success=!1},o.test=function(){this.form.patch({firstName:"Jhon",lastName:"Appleseed",company:"Websolute",role:this.controls.role.options[0].id,country:this.controls.country.options[0].id,address:"Strada della Campanara",zipCode:"15",city:"Pesaro",telephone:"00390721411112",email:"jhonappleseed@gmail.com",privacy:!0,checkRequest:window.antiforgery,checkField:""})},o.MatchValidator=function(t){var n=this;return new e.FormValidator((function(e){var i=n.form?n.form.get(t):null;return e&&i&&e!==i.value?{match:{value:e,match:i.value}}:null}))},o.reset=function(){this.form.reset()},o.onSubmit=function(){var t=this;this.form.valid?(this.form.submitted=!0,I.register$(this.form.value).subscribe((function(e){console.log("ClubSignupComponent.onSubmit",e),t.success=!0,dataLayer.push({event:"formSubmission","form type":"Registrazione Tiemme Club"}),t.form.reset()}),(function(e){console.log("ClubSignupComponent.error",e),t.error=e,t.form.submitted=!1,t.pushChanges()}))):this.form.touched=!0},o.onLogin=function(){this.login.next()},r(i,[{key:"countryId",set:function(t){var e=this;if(this.countryId_!==t){this.countryId_=t;var n=this.data.provinces.filter((function(e){return String(e.idstato)===String(t)}));this.controls.province.options=n,this.controls.province.hidden=0===n.length,n.find((function(t){return t.id===e.controls.province.value}))||(this.controls.province.value=null)}}}]),i}(t.Component);Q.meta={selector:"[club-signup]"};var K=function(e){function i(){return e.apply(this,arguments)||this}return u(i,e),i.prototype.onInit=function(){var e=this,i=t.getContext(this).node;i.classList.add("dropdown-item"),E.dropdown$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.id===t?i.classList.add("dropped"):i.classList.remove("dropped")}))},r(i,[{key:"id",get:function(){return this["dropdown-item"]}}]),i}(t.Directive);K.meta={selector:"[dropdown-item], [[dropdown-item]]",inputs:["dropdown-item"]};var tt=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var n=e.prototype;return n.onInit=function(){},n.toggleActive=function(t){t instanceof P?(t.toggleActive(),this.pushChanges()):this.filter.toggle(t)},e}(t.Component);tt.meta={selector:"[menu-item]",inputs:["filter","item"],template:'\n\t\t<span class="option" [class]="{ active: filter.has(item), disabled: item.disabled }">\n\t\t\t<span class="checkbox" (click)="filter.toggle(item)"></span>\n\t\t\t<span class="name" [class]="{ menu: filter.isMenuItem(item), active: item.active }" (click)="toggleActive(item)" [innerHTML]="item.label"></span>\n\t\t\t<span class="count" [innerHTML]="item.count || \'\'"></span>\n\t\t</span>\n\t\t<ul class="nav--options" *if="filter.isMenuItem(item) && item.active">\n\t\t\t<li class="nav--options__menu" menu-item [filter]="item" [item]="option" *for="let option of item.options"></li>\n\t\t</ul>\n\t'};var et=function(e){function n(){return e.apply(this,arguments)||this}return u(n,e),n.prototype.onChanges=function(){var e=t.getContext(this).node,n=this.control.flags;Object.keys(n).forEach((function(t){n[t]?e.classList.add(t):e.classList.remove(t)}))},n}(t.Component);et.meta={selector:"[control]",inputs:["control"]};var nt=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.prototype.onInit=function(){this.label="label"},e}(et);nt.meta={selector:"[control-checkbox]",inputs:["control","label"],template:'\n\t\t<div class="group--form--checkbox" [class]="{ required: control.validators.length }">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" class="control--checkbox" [formControl]="control" [value]="true" />\n\t\t\t\t<span [innerHTML]="label | html"></span>\n\t\t\t</label>\n\t\t\t<span class="required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var it=function(){function t(){}return t.keydown$=function(){return i.fromEvent(window,"keydown").pipe(n.shareReplay(1))},t.keyup$=function(){return i.fromEvent(window,"keyup").pipe(n.shareReplay(1))},t.typing$=function(){var t,e="";return this.key$().pipe(n.map((function(n){return t&&clearTimeout(t),e+=n,t=setTimeout((function(){e=""}),1500),e})),n.shareReplay(1))},t.key$=function(){var t=/\w/;return this.keydown$().pipe(n.filter((function(e){return e.key&&e.key.match(t)})),n.map((function(t){return t.key})),n.shareReplay(1))},t}(),ot=function(e){function i(){return e.apply(this,arguments)||this}u(i,e);var o=i.prototype;return o.onInit=function(){var t=this;this.label="label",this.labels=window.labels||{},this.dropped=!1,this.dropdownId=E.nextId(),it.typing$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.scrollToWord(e)}))},o.scrollToWord=function(e){for(var n=this.control.options||[],i=-1,o=0;o<n.length;o++){if(0===n[o].name.toLowerCase().indexOf(e.toLowerCase())){i=o;break}}if(-1!==i){var r=t.getContext(this).node,s=r.querySelector(".dropdown"),a=r.querySelector(".nav--dropdown").children[i];s.scrollTo(0,a.offsetTop)}},o.setOption=function(t){if(console.log("setOption",t,this.isMultiple),this.isMultiple){var e=this.control.value||[],n=e.indexOf(t.id);-1!==n?e.splice(n,1):e.push(t.id),this.control.value=e.length?e.slice():null}else this.control.value=t.id},o.hasOption=function(t){return this.isMultiple?-1!==(this.control.value||[]).indexOf(t.id):this.control.value===t.id},o.onDropped=function(t){},o.getLabel=function(){var t=this.control.value,e=this.control.options||[];if(this.isMultiple)return(t=t||[]).length?t.map((function(t){var n=e.find((function(e){return e.id===t||e.name===t}));return n?n.name:""})).join(", "):this.labels.select;var n=e.find((function(e){return e.id===t||e.name===t}));return n?n.name:this.labels.select},o.onDropped=function(t){this.dropped=t===this.dropdownId},r(i,[{key:"isMultiple",get:function(){return this.multiple&&!1!==this.multiple&&"false"!==this.multiple}}]),i}(et);ot.meta={selector:"[control-custom-select]",inputs:["control","label","multiple"],template:'\n\t\t<div class="group--form--select" [class]="{ required: control.validators.length, multiple: isMultiple }" [dropdown]="dropdownId" (dropped)="onDropped($event)">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<span class="control--select" [innerHTML]="getLabel()"></span>\n\t\t\t<svg class="icon icon--caret-down"><use xlink:href="#caret-down"></use></svg>\n\t\t\t<span class="required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t\t<div class="dropdown" [dropdown-item]="dropdownId">\n\t\t\t<div class="category" [innerHTML]="label"></div>\n\t\t\t<ul class="nav--dropdown" [class]="{ multiple: isMultiple }">\n\t\t\t<li *for="let item of control.options" (click)="setOption(item)"><span [class]="{ active: hasOption(item) }" [innerHTML]="item.name"></span></li>\n\t\t\t</ul>\n\t\t</div>\n\t'};var rt=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.prototype.onInit=function(){this.label="label"},e}(et);rt.meta={selector:"[control-email]",inputs:["control","label"],template:'\n\t\t<div class="group--form" [class]="{ required: control.validators.length }">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<input type="text" class="control--text" [formControl]="control" [placeholder]="label" required email />\n\t\t\t<span class="required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var st=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var n=e.prototype;return n.onInit=function(){this.label="label",this.labels=window.labels||{},this.file=null,this.required=!1,this.onReaderComplete=this.onReaderComplete.bind(this)},n.onInputDidChange=function(t){var e=t.target.files[0];this.file={name:e.name,lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,size:e.size,type:e.type};var n=new FileReader;n.addEventListener("load",this.onReaderComplete),n.readAsDataURL(e)},n.onReaderComplete=function(t){var e=t.target.result;this.file.content=e,this.control.value=this.file},e}(et);st.meta={selector:"[control-file]",inputs:["control","label"],template:'\n\t\t<div class="group--form--file" [class]="{ required: control.validators.length }">\n\t\t\t<label for="file" [innerHTML]="label"></label>\n\t\t\t<span class="control--select" [innerHTML]="file?.name || labels.select_file"></span>\n\t\t\t<svg class="icon icon--upload"><use xlink:href="#upload"></use></svg>\n\t\t\t<span class="required__badge">required</span>\n\t\t\t<input name="file" type="file" accept=".pdf,.doc,.docx,*.txt" class="control--file" (change)="onInputDidChange($event)" />\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var at=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.prototype.onInit=function(){this.label="label",this.required=!1},e}(et);at.meta={selector:"[control-password]",inputs:["control","label"],template:'\n\t\t<div class="group--form" [class]="{ required: control.validators.length }">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<input type="password" class="control--text" [formControl]="control" [placeholder]="label" />\n\t\t\t<span class="required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var lt=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.prototype.onInit=function(){this.label="label",this.labels=window.labels||{}},e}(et);lt.meta={selector:"[control-select]",inputs:["control","label"],template:'\n\t\t<div class="group--form--select" [class]="{ required: control.validators.length }">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<select class="control--select" [formControl]="control" required>\n\t\t\t\t<option value="">{{labels.select}}</option>\n\t\t\t\t<option [value]="item.id" *for="let item of control.options" [innerHTML]="item.name"></option>\n\t\t\t</select>\n\t\t\t<span class="required__badge">required</span>\n\t\t\t<svg class="icon icon--caret-down"><use xlink:href="#caret-down"></use></svg>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var ut=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.prototype.onInit=function(){this.label="label",this.required=!1},e}(et);ut.meta={selector:"[control-text]",inputs:["control","label"],template:'\n\t\t<div class="group--form" [class]="{ required: control.validators.length }">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<input type="text" class="control--text" [formControl]="control" [placeholder]="label" />\n\t\t\t<span class="required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var ct=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.prototype.onInit=function(){this.label="label",this.required=!1},e}(et);ct.meta={selector:"[control-textarea]",inputs:["control","label"],template:'\n\t\t<div class="group--form--textarea" [class]="{ required: control.validators.length }">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<textarea class="control--text" [formControl]="control" [innerHTML]="label" rows="4"></textarea>\n\t\t\t<span class="required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var pt=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var n=e.prototype;return n.onInit=function(){this.labels=window.labels||{}},n.getLabel=function(t,e){return this.labels["error_"+t]},e}(et);pt.meta={selector:"errors-component",inputs:["control"],template:'\n\t<div class="inner" [style]="{ display: control.invalid && control.touched ? \'block\' : \'none\' }">\n\t\t<div class="error" *for="let [key, value] of control.errors">\n\t\t\t<span [innerHTML]="getLabel(key, value)"></span>\n\t\t\t\x3c!-- <span class="key" [innerHTML]="key"></span> <span class="value" [innerHTML]="value | json"></span> --\x3e\n\t\t</div>\n\t</div>\n\t'};var dt=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var n=e.prototype;return n.onInit=function(){this.env=b},n.onTest=function(t){this.test.next(t)},n.onReset=function(t){this.reset.next(t)},e}(t.Component);dt.meta={selector:"test-component",inputs:["form"],outputs:["test","reset"],template:'\n\t<div class="group--form--results" *if="env.DEVELOPMENT">\n\t\t<code [innerHTML]="form.value | json"></code>\n\t\t<button type="button" class="btn--link" (click)="onTest($event)"><span>test</span></button>\n\t\t<button type="button" class="btn--link" (click)="onReset($event)"><span>reset</span></button>\n\t</div>\n\t'};var ht=function(){function t(){}return t.height$=function(){var t=document.documentElement.style;return i.fromEvent(window,"resize").pipe(n.map((function(t){return window.innerHeight})),n.startWith(window.innerHeight),n.tap((function(e){var n=.01*e;t.setProperty("--vh",n+"px")})))},t}(),ft=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this.menu=null,this.submenu=null,this.user=null,I.user$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.user=e,t.pushChanges()})),I.me$().pipe(n.catchError((function(){return i.of(null)})),n.takeUntil(this.unsubscribe$)).subscribe((function(t){console.log("user",t)})),ht.height$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){}))},o.toggleMenu=function(t){this.menu=this.menu!==t?t:null;var e=document.querySelector("body");this.menu?e.classList.add("fixed"):e.classList.remove("fixed"),this.submenu=null,this.pushChanges()},o.onDropped=function(t){this.submenu=t,this.pushChanges()},e}(t.Component);ft.meta={selector:"header"};var mt=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.transform=function(t){if(t){t=t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e))}));var e=['"',"&","'","<",">"," ","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","­","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ","&","•","°","∞","‰","⋅","±","†","—","¬","µ","⊥","∥","€","£","¥","¢","©","®","™","α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","σ","τ","υ","φ","χ","ψ","ω","Α","Β","Γ","Δ","Ε","Ζ","Η","Θ","Ι","Κ","Λ","Μ","Ν","Ξ","Ο","Π","Ρ","Σ","Τ","Υ","Φ","Χ","Ψ","Ω"],n=new RegExp("(&"+["quot","amp","apos","lt","gt","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","times","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","divide","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","amp","bull","deg","infin","permil","sdot","plusmn","dagger","mdash","not","micro","perp","par","euro","pound","yen","cent","copy","reg","trade","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega"].join(";)|(&")+";)","g");return t=t.replace(n,(function(){for(var t=1;t<arguments.length;t++)if(arguments[t])return e[t-1]}))}},e}(t.Pipe);mt.meta={name:"html"};var vt=v?"./":"/Client/docs/",gt=0,bt=function(){function t(){}return t.worker=function(){return this.worker_||(this.worker_=new Worker(vt+"js/workers/image.service.worker.js")),this.worker_},t.load$=function(t){if(!("Worker"in window)||this.isBlob(t)||this.isCors(t))return i.of(t);var e=++gt,o=this.worker();return o.postMessage({src:t,id:e}),i.fromEvent(o,"message").pipe(n.filter((function(e){return e.data.src===t})),n.map((function(t){return URL.createObjectURL(t.data.blob)})),n.first(),n.finalize((function(t){o.postMessage({id:e}),t&&URL.revokeObjectURL(t)})))},t.isCors=function(t){return-1!==t.indexOf("//")&&-1===t.indexOf(window.location.host)},t.isBlob=function(t){return 0===t.indexOf("blob:")},t}(),yt=function(){function t(){}return t.get=function(t){return this.cache[t]},t.set=function(t,e){this.cache[t]=e;var n=Object.keys(this.cache);n.length>100&&this.remove(n[0])},t.remove=function(t){delete this.cache[t]},r(t,null,[{key:"cache",get:function(){return this.cache_||(this.cache_={}),this.cache_}}]),t}(),wt=function(e){function o(){return e.apply(this,arguments)||this}u(o,e);var r=o.prototype;return r.onInit=function(){var e=this,o=t.getContext(this).node;o.classList.add("lazy"),this.input$=(new i.Subject).pipe(n.distinctUntilChanged(),n.switchMap((function(t){var n=yt.get(t);return n?i.of(n):(o.classList.remove("lazyed"),e.lazy$(t))})),n.takeUntil(this.unsubscribe$)),this.input$.subscribe((function(t){yt.set(e.lazy,t),o.setAttribute("src",t),o.classList.add("lazyed")}))},r.onChanges=function(){this.input$.next(this.lazy)},r.lazy$=function(e){var i=t.getContext(this).node;return q.intersection$(i).pipe(n.first(),n.switchMap((function(){return bt.load$(e)})),n.takeUntil(this.unsubscribe$))},o}(t.Directive);wt.meta={selector:"[lazy],[[lazy]]",inputs:["lazy"]};var Ct=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var n=e.prototype;return n.onInit=function(){this.sticky=!1},n.onToggleSticky=function(t){this.sticky=!this.sticky;var e=document.querySelector("body");this.sticky?e.classList.add("fixed"):e.classList.remove("fixed"),this.pushChanges()},n.onSearch=function(t,e){console.log(e),window.location.href=t+"?txtSiteSearch="+e},e}(t.Component);Ct.meta={selector:"[main-menu]"};var kt=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var i=e.prototype;return i.onInit=function(){var t=this,e=this.items=window.medias||[],i=window.filters||{},o=window.params||{};i.departments.mode=p,i.languages.mode=p,i.categories.mode=p;var r=new f(i,o,(function(t,e){switch(t){case"languages":e.filter=function(t,e){return-1!==t.languages.indexOf(e)};break;case"categories":e.filter=function(t,e){return t.category===e};break;default:e.filter=function(t,e){return-1!==t.features.indexOf(e)}}}));r.items$(e).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.items=e,t.pushChanges(),console.log("MediaLibraryComponent.items",e.length)})),this.filterService=r,this.filters=r.filters},i.toggleFilter=function(t){var e=this;Object.keys(this.filters).forEach((function(n){var i=e.filters[n];i.active=i===t&&!i.active})),this.pushChanges()},e}(t.Component);kt.meta={selector:"[media-library]"};var xt=function(e){function n(){return e.apply(this,arguments)||this}u(n,e);var i=n.prototype;return i.onInit=function(){var e=t.getContext(this).parentInstance;e instanceof H&&(this.data=e.modal.data)},i.close=function(){k.reject()},n}(t.Component);xt.meta={selector:"[modal]"};var $t=function(){function t(){}return t.next=function(t){this.form=t||this.form},t.getDefaultValue=function(){var t=window.naturalForm||{};return Object.keys(t).forEach((function(e){var n=t[e];switch(e){case"club":case"newsletter":break;default:var i=n.options[0].id;n.value=n.multiple?[i]:i}})),t},r(t,null,[{key:"values",get:function(){var t={},e=this.form,n=this.phrase;return Object.keys(this.form).forEach((function(i){-1!==n.indexOf("$"+i+"$")&&(t[i]=e[i].value)})),t}},{key:"form",set:function(t){this.form$.next(t)},get:function(){return this.form$.getValue()}},{key:"phrase",get:function(){var t=this.form,e=t.action.options.find((function(e){return e.id===t.action.value}));return e||(e=t.action.options[0]),e.phrase}},{key:"title",get:function(){var t=this,e=this.phrase,n=this.form;return Object.keys(n).forEach((function(n){var i,o=t.form[n],r=o.value,s=o.options||[];if(o.multiple)i=(r=r||[]).length?r.map((function(t){var e=s.find((function(e){return e.id===t||e.name===t}));return e?e.name:""})).join(", "):s.length?"...":o.label;else{var a=s.find((function(t){return t.id===r||t.name===r}));i=a?a.name:s.length?"...":o.label}e=e.replace("$"+n+"$",i)})),e}},{key:"clubProfileUrl",get:function(){return this.form.club.profileUrl}},{key:"clubModalUrl",get:function(){return v?"/tiemme-com/club-modal.html":this.form.club.modalUrl}},{key:"disabled",get:function(){return!1}}]),t}();$t.form$=new i.BehaviorSubject($t.getDefaultValue());var It=function(t){function i(){return t.apply(this,arguments)||this}u(i,t);var o=i.prototype;return o.onInit=function(){var t=this,i=$t.values;this.title=$t.title;var o=window.data||{roles:[],interests:[],countries:[],provinces:[]},r=new e.FormGroup({role:new e.FormControl(i.role,e.Validators.RequiredValidator()),interests:new e.FormControl(i.interest,e.Validators.RequiredValidator()),firstName:new e.FormControl(null,e.Validators.RequiredValidator()),lastName:new e.FormControl(null,e.Validators.RequiredValidator()),email:new e.FormControl(null,[e.Validators.RequiredValidator(),e.Validators.EmailValidator()]),company:new e.FormControl(null,e.Validators.RequiredValidator()),country:new e.FormControl(null,e.Validators.RequiredValidator()),province:new e.FormControl(null,e.Validators.RequiredValidator()),message:null,privacy:new e.FormControl(null,e.Validators.RequiredTrueValidator()),newsletter:2===i.newsletter,scope:window.location.hostname,checkRequest:window.antiforgery,checkField:""}),s=r.controls;s.role.options=o.roles,s.interests.options=o.interests,s.country.options=o.countries,s.province.options=[],this.controls=s,r.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.countryId=e.country,t.pushChanges()})),this.data=o,this.form=r,this.error=null,this.success=!1},o.onChanges=function(t){},o.test=function(){this.form.patch({firstName:"Jhon",lastName:"Appleseed",email:"jhonappleseed@gmail.com",company:"Websolute",role:this.controls.role.options[0].id,interests:this.controls.interests.options[0].id,country:this.controls.country.options[0].id,privacy:!0,checkRequest:window.antiforgery,checkField:""})},o.reset=function(){this.form.reset()},o.onSubmit=function(){var t=this;this.form.valid?(this.form.submitted=!0,x.post$("/api/users/Contact",this.form.value).subscribe((function(e){console.log("NaturalFormContactComponent.onSubmit",e),t.success=!0,t.form.reset(),dataLayer.push({event:"formSubmission","form type":"Contatti Tiemme"})}),(function(e){console.log("NaturalFormContactComponent.error",e),t.error=e,t.pushChanges()}))):this.form.touched=!0},o.onBack=function(){this.back.next()},r(i,[{key:"countryId",set:function(t){var e=this;if(this.countryId_!==t){this.countryId_=t;var n=this.data.provinces.filter((function(e){return String(e.idstato)===String(t)}));this.controls.province.options=n,this.controls.province.hidden=0===n.length,n.find((function(t){return t.id===e.controls.province.value}))||(this.controls.province.value=null)}}}]),i}(t.Component);It.meta={selector:"[natural-form-contact]",outputs:["back"]};var Vt=function(e){function i(){return e.apply(this,arguments)||this}u(i,e);var o=i.prototype;return o.onInit=function(){var t=this;this.label="label",this.labels=window.labels||{},this.dropped=!1,this.dropdownId=E.nextId(),it.typing$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.scrollToWord(e)}))},o.scrollToWord=function(e){for(var n=this.filter.options||[],i=-1,o=0;o<n.length;o++){if(0===n[o].name.toLowerCase().indexOf(e.toLowerCase())){i=o;break}}if(-1!==i){var r=t.getContext(this).node,s=r.querySelector(".dropdown"),a=r.querySelector(".nav--dropdown").children[i];s.scroll(0,a.offsetTop)}},o.setOption=function(t){if(this.filter.multiple){this.filter.value=this.filter.value||[];var e=this.filter.value.indexOf(t.id);-1!==e?this.filter.value.length>1&&this.filter.value.splice(e,1):this.filter.value.push(t.id)}else this.filter.value=t.id,E.dropdown$.next(null);this.pushChanges(),this.change.next(this.filter)},o.hasOption=function(t){return this.filter.multiple?-1!==(this.filter.value||[]).indexOf(t.id):this.filter.value===t.id},o.getLabel=function(){var t=this.filter.value,e=this.filter.options||[];if(this.filter.multiple)return(t=t||[]).length?t.map((function(t){var n=e.find((function(e){return e.id===t||e.name===t}));return n?n.name:""})).join(", "):"...";var n=e.find((function(e){return e.id===t||e.name===t}));return n?n.name:"..."},o.onDropped=function(e){this.dropped=e===this.dropdownId;var n=t.getContext(this).node.querySelector(".dropdown");if(n){n.style.cssText="";var i=n.getBoundingClientRect();i.left+i.width>window.innerWidth-15&&(n.style.cssText="transform: translateX("+(window.innerWidth-15-(i.left+i.width))+"px);")}},i}(t.Component);Vt.meta={selector:"[natural-form-control]",inputs:["filter","label"],outputs:["change"],template:'\n\t\t<span [dropdown]="dropdownId" (dropped)="onDropped($event)">\n\t\t\t<span class="label" [innerHTML]="getLabel()"></span>\n\t\t\t<svg class="icon icon--caret-right"><use xlink:href="#caret-right"></use></svg>\n\t\t</span>\n\t\t<div class="dropdown" [dropdown-item]="dropdownId">\n\t\t\t<div class="category" [innerHTML]="label"></div>\n\t\t\t<ul class="nav--dropdown" [class]="{ multiple: filter.multiple }">\n\t\t\t\t<li *for="let item of filter.options" (click)="setOption(item)"><span [class]="{ active: hasOption(item) }" [innerHTML]="item.name"></span></li>\n\t\t\t</ul>\n\t\t</div>\n\t'};var St=function(t){function i(){return t.apply(this,arguments)||this}u(i,t);var o=i.prototype;return o.onInit=function(){var t=this,i=$t.values;this.title=$t.title;var o=window.data||{roles:[],interests:[],countries:[],provinces:[]},r=new e.FormGroup({role:new e.FormControl(i.role,e.Validators.RequiredValidator()),interests:new e.FormControl(i.interest,e.Validators.RequiredValidator()),firstName:new e.FormControl(null,e.Validators.RequiredValidator()),lastName:new e.FormControl(null,e.Validators.RequiredValidator()),email:new e.FormControl(null,[e.Validators.RequiredValidator(),e.Validators.EmailValidator()]),company:new e.FormControl(null,e.Validators.RequiredValidator()),privacy:new e.FormControl(null,e.Validators.RequiredTrueValidator()),newsletter:new e.FormControl(!0,e.Validators.RequiredTrueValidator()),checkRequest:window.antiforgery,checkField:""}),s=r.controls;s.role.options=o.roles,s.interests.options=o.interests,this.controls=s,r.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.pushChanges()})),this.data=o,this.form=r,this.error=null,this.success=!1},o.test=function(){this.form.patch({firstName:"Jhon",lastName:"Appleseed",email:"jhonappleseed@gmail.com",company:"Websolute",role:this.controls.role.options[0].id,interests:this.controls.interests.options[0].id,privacy:!0,checkRequest:window.antiforgery,checkField:""})},o.reset=function(){this.form.reset()},o.onSubmit=function(){var t=this;this.form.valid?(this.form.submitted=!0,x.post$("/api/users/Newsletter",this.form.value).subscribe((function(e){console.log("NaturalFormNewsletterComponent.onSubmit",e),t.success=!0,t.form.reset(),dataLayer.push({event:"formSubmission","form type":"Iscrizione alla Newsletter"})}),(function(e){console.log("NaturalFormNewsletterComponent.error",e),t.error=e,t.pushChanges()}))):this.form.touched=!0},o.onBack=function(){this.back.next()},i}(t.Component);St.meta={selector:"[natural-form-newsletter]",outputs:["back"]};var qt=function(t){function i(){return t.apply(this,arguments)||this}u(i,t);var o=i.prototype;return o.onInit=function(){var t=this,i=$t.values;this.title=$t.title;var o=window.data||{roles:[],interests:[],countries:[],provinces:[]},r=new e.FormGroup({role:new e.FormControl(i.role,e.Validators.RequiredValidator()),interests:new e.FormControl(i.interest,e.Validators.RequiredValidator()),firstName:new e.FormControl(null,e.Validators.RequiredValidator()),lastName:new e.FormControl(null,e.Validators.RequiredValidator()),email:new e.FormControl(null,[e.Validators.RequiredValidator(),e.Validators.EmailValidator()]),company:new e.FormControl(null,e.Validators.RequiredValidator()),country:new e.FormControl(null,e.Validators.RequiredValidator()),province:new e.FormControl(null,e.Validators.RequiredValidator()),message:null,privacy:new e.FormControl(null,e.Validators.RequiredTrueValidator()),newsletter:2===i.newsletter,scope:window.location.hostname,checkRequest:window.antiforgery,checkField:""}),s=r.controls;s.role.options=o.roles,s.interests.options=o.interests,s.country.options=o.countries,s.province.options=[],this.controls=s,r.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.countryId=e.country,t.pushChanges()})),this.data=o,this.form=r,this.error=null,this.success=!1},o.onChanges=function(t){},o.test=function(){this.form.patch({firstName:"Jhon",lastName:"Appleseed",email:"jhonappleseed@gmail.com",company:"Websolute",role:this.controls.role.options[0].id,interests:this.controls.interests.options[0].id,country:this.controls.country.options[0].id,privacy:!0,checkRequest:window.antiforgery,checkField:""})},o.reset=function(){this.form.reset()},o.onSubmit=function(){var t=this;this.form.valid?(this.form.submitted=!0,x.post$("/api/users/RequestInfo",this.form.value).subscribe((function(e){console.log("NaturalFormRequestInfoComponent.onSubmit",e),t.form.reset(),t.success=!0,dataLayer.push({event:"formSubmission","form type":"Contatti Tiemme"})}),(function(e){console.log("NaturalFormRequestInfoComponent.error",e),t.error=e,t.pushChanges()}))):this.form.touched=!0},o.onBack=function(){this.back.next()},r(i,[{key:"countryId",set:function(t){var e=this;if(this.countryId_!==t){this.countryId_=t;var n=this.data.provinces.filter((function(e){return String(e.idstato)===String(t)}));this.controls.province.options=n,this.controls.province.hidden=0===n.length,n.find((function(t){return t.id===e.controls.province.value}))||(this.controls.province.value=null)}}}]),i}(t.Component);qt.meta={selector:"[natural-form-request-info]",outputs:["back"]};var _t=function(e){function i(){return e.apply(this,arguments)||this}u(i,e);var o=i.prototype;return o.onInit=function(){var e=this;t.getContext(this).node.classList.add("natural-form-search"),$t.form$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.naturalForm=t,e.phrase=$t.phrase}))},o.onNaturalForm=function(t){var e=$t.next();this.change.next(e)},o.onClub=function(t){this.club.next(t)},o.animateUnderlines_=function(t){this.animated=!0;var e=[].concat(t.querySelectorAll(".moodboard__underline"));e.forEach((function(t){gsap.set(t,{transformOrigin:"0 50%",scaleX:0})}));var n=-1;!function t(){n++,n%=e.length;var i=e[n];gsap.set(i,{transformOrigin:"0 50%",scaleX:0}),gsap.to(i,.5,{scaleX:1,transformOrigin:"0 50%",delay:0,ease:Power3.easeInOut,overwrite:"all",onComplete:function(){gsap.set(i,{transformOrigin:"100% 50%",scaleX:1}),gsap.to(i,.5,{scaleX:0,transformOrigin:"100% 50%",delay:1,ease:Power3.easeInOut,overwrite:"all",onComplete:function(){t()}})}})}()},o.animateOff_=function(t){if(this.animated){this.animated=!1;var e=[].concat(t.querySelectorAll(".moodboard__underline"));gsap.set(e,{transformOrigin:"0 50%",scaleX:0}),gsap.to(e,.5,{scaleX:1,transformOrigin:"0 50%",delay:0,ease:Power3.easeInOut,overwrite:"all"})}},r(i,[{key:"phrase",set:function(e){var n=this;if(this.phrase_!==e){this.phrase_=e;var i=t.getContext(this),o=i.node,r=i.module,s=o.querySelector(".content");this.instances_&&r.remove(s),this.instances_=[];var a=e;Object.keys(this.naturalForm).forEach((function(t){a=a.replace("$"+t+"$",(function(){return n.naturalForm[t].options?'\n\t\t\t\t\t\t\t<span class="natural-form__control" natural-form-control [filter]="naturalForm.'+t+'" [label]="naturalForm.'+t+'.label" (change)="onNaturalForm($event)"></span>\n\t\t\t\t\t\t':'<button type="button" class="btn--club-form" (click)="onClub($event)"><span>Tiemme Club</span></button>'}))})),s.innerHTML=a,Array.from(s.childNodes).forEach((function(t){n.instances_=n.instances_.concat(r.compile(t,n))}))}}}]),i}(t.Component);_t.meta={selector:"[natural-form-search]",inputs:["naturalForm"],outputs:["change","club"]};var Ot=function(t){function i(){return t.apply(this,arguments)||this}u(i,t);var o=i.prototype;return o.onInit=function(){var t=this,i=$t.values;this.title=$t.title;var o=window.data||{roles:[],countries:[],provinces:[]},r=new e.FormGroup({role:new e.FormControl(i.role,e.Validators.RequiredValidator()),firstName:new e.FormControl(null,e.Validators.RequiredValidator()),lastName:new e.FormControl(null,e.Validators.RequiredValidator()),company:new e.FormControl(null,e.Validators.RequiredValidator()),country:new e.FormControl(null,e.Validators.RequiredValidator()),province:new e.FormControl(null,e.Validators.RequiredValidator()),address:new e.FormControl(null,e.Validators.RequiredValidator()),zipCode:new e.FormControl(null,e.Validators.RequiredValidator()),city:new e.FormControl(null,e.Validators.RequiredValidator()),telephone:new e.FormControl(null,e.Validators.RequiredValidator()),fax:null,email:new e.FormControl(null,[e.Validators.RequiredValidator(),e.Validators.EmailValidator()]),privacy:new e.FormControl(null,e.Validators.RequiredTrueValidator()),newsletter:2===i.newsletter,checkRequest:window.antiforgery,checkField:""}),s=r.controls;s.role.options=o.roles,s.country.options=o.countries,s.province.options=[],this.controls=s,r.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.countryId=e.country,t.pushChanges()})),this.data=o,this.form=r,this.error=null,this.success=!1},o.test=function(){this.form.patch({firstName:"Jhon",lastName:"Appleseed",company:"Websolute",role:this.controls.role.options[0].id,country:this.controls.country.options[0].id,address:"Strada della Campanara",zipCode:"15",city:"Pesaro",telephone:"00390721411112",email:"jhonappleseed@gmail.com",privacy:!0,checkRequest:window.antiforgery,checkField:""})},o.MatchValidator=function(t){var n=this;return new e.FormValidator((function(e){var i=n.form?n.form.get(t):null;return e&&i&&e!==i.value?{match:{value:e,match:i.value}}:null}))},o.reset=function(){this.form.reset()},o.onSubmit=function(){var t=this;this.form.valid?(this.form.submitted=!0,I.register$(this.form.value).subscribe((function(e){console.log("NaturalFormSignupComponent.onSubmit",e),t.success=!0,dataLayer.push({event:"formSubmission","form type":"Registrazione Tiemme Club"}),t.form.reset(),t.signUp.next(e)}),(function(e){console.log("NaturalFormSignupComponent.error",e),t.error=e,t.pushChanges()}))):this.form.touched=!0},o.onBack=function(){this.back.next()},r(i,[{key:"countryId",set:function(t){var e=this;if(this.countryId_!==t){this.countryId_=t;var n=this.data.provinces.filter((function(e){return String(e.idstato)===String(t)}));this.controls.province.options=n,this.controls.province.hidden=0===n.length,n.find((function(t){return t.id===e.controls.province.value}))||(this.controls.province.value=null)}}}]),i}(t.Component);Ot.meta={selector:"[natural-form-signup]",outputs:["signUp","back"]};var Rt=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var i=e.prototype;return i.onInit=function(){var t=this;this.views={NATURAL:0,TECHNICAL:1,COMMERCIAL:2,NEWSLETTER:3,CLUB:4},this.view=this.views.NATURAL,I.user$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.user=e,t.pushChanges()})),$t.form$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.values=$t.values,t.pushChanges()}))},i.onClub=function(t){var e=this;if(this.user)window.location.href=$t.clubProfileUrl;else{t.preventDefault();var i=v?"/tiemme-com/club-modal.html":$t.clubModalUrl;k.open$({src:i,data:{view:1}}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){t instanceof w&&(I.setUser(t.data),e.user=t.data,e.pushChanges())}))}},i.onNext=function(t){this.view=$t.values.action,this.pushChanges()},i.onBack=function(t){this.view=this.views.NATURAL,this.pushChanges()},r(e,[{key:"disabled",get:function(){return $t.disabled}}]),e}(t.Component);Rt.meta={selector:"[natural-form]",outputs:["club"]};var Ft=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var i=e.prototype;return i.onInit=function(){var t=this,e=window.pricelists||[],i=window.filters||{},o=window.params||{};i.departments.mode=p,i.categories.mode=p;var r=new f(i,o,(function(t,e){switch(t){case"categories":e.filter=function(t,e){return t.category===e};break;default:e.filter=function(t,e){return-1!==t.features.indexOf(e)}}}));r.items$(e).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.items=e,t.pushChanges()})),this.filterService=r,this.filters=r.filters},i.toggleFilter=function(t){var e=this;Object.keys(this.filters).forEach((function(n){var i=e.filters[n];i.active=i===t&&!i.active})),this.pushChanges()},e}(t.Component);Ft.meta={selector:"[price-list]"};var Lt=v?"/tiemme-com/club-modal.html":"/Viewdoc.cshtml?co_id=23649",Et=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var i=e.prototype;return i.onRegister=function(t){t.preventDefault(),k.open$({src:Lt,data:{view:2}}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){t instanceof w&&I.setUser(t.data)}))},i.onLogin=function(t){t.preventDefault(),k.open$({src:Lt,data:{view:1}}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){t instanceof w&&I.setUser(t.data)}))},e}(t.Component);Et.meta={selector:"[register-or-login]"};var Nt=function(t){function i(){return t.apply(this,arguments)||this}u(i,t);var o=i.prototype;return o.onInit=function(){var t=this,i=window.data||{roles:[],interests:[],countries:[],provinces:[]},o=new e.FormGroup({firstName:new e.FormControl(null,e.Validators.RequiredValidator()),lastName:new e.FormControl(null,e.Validators.RequiredValidator()),email:new e.FormControl(null,[e.Validators.RequiredValidator(),e.Validators.EmailValidator()]),company:new e.FormControl(null,e.Validators.RequiredValidator()),role:new e.FormControl(null,e.Validators.RequiredValidator()),interests:new e.FormControl(null,e.Validators.RequiredValidator()),country:new e.FormControl(null,e.Validators.RequiredValidator()),province:new e.FormControl(null,e.Validators.RequiredValidator()),message:null,privacy:new e.FormControl(null,e.Validators.RequiredTrueValidator()),newsletter:null,scope:window.location.hostname,checkRequest:window.antiforgery,checkField:""}),r=o.controls;r.role.options=i.roles,r.interests.options=i.interests,r.country.options=i.countries,r.province.options=[],this.controls=r,o.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.countryId=e.country,t.pushChanges()})),this.data=i,this.form=o,this.error=null,this.success=!1},o.test=function(){this.form.patch({firstName:"Jhon",lastName:"Appleseed",email:"jhonappleseed@gmail.com",company:"Websolute",role:this.controls.role.options[0].id,interests:this.controls.interests.options[0].id,country:this.controls.country.options[0].id,privacy:!0,checkRequest:window.antiforgery,checkField:""})},o.reset=function(){this.form.reset()},o.onSubmit=function(t){var e=this;this.form.valid?(this.form.submitted=!0,x.post$("/api/users/Contact",this.form.value).subscribe((function(n){console.log("RequestInfoCommercialComponent.onSubmit",n),e.success=!0,e.form.reset(),dataLayer.push({event:"formSubmission","form type":null==t?"Contatti Tiemme":t})}),(function(t){console.log("RequestInfoCommercialComponent.error",t),e.error=t,e.pushChanges()}))):this.form.touched=!0},r(i,[{key:"countryId",set:function(t){var e=this;if(this.countryId_!==t){this.countryId_=t;var n=this.data.provinces.filter((function(e){return String(e.idstato)===String(t)}));this.controls.province.options=n,this.controls.province.hidden=0===n.length,n.find((function(t){return t.id===e.controls.province.value}))||(this.controls.province.value=null)}}}]),i}(t.Component);Nt.meta={selector:"[request-info-commercial]"};var Tt=function(t){function e(){return t.apply(this,arguments)||this}u(e,t);var o=e.prototype;return o.onInit=function(){var t=this;I.me$().pipe(n.catchError((function(){return i.of(null)})),n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.user=e}))},o.doLogout=function(t){var e=this;I.logout$().subscribe((function(){e.user=null,window.location.href="/"}))},o.onProfileUpdate=function(t){},o.onPasswordUpdate=function(t){},e}(t.Component);Tt.meta={selector:"[reserved-area]"};var Ut=function(e){function o(){return e.apply(this,arguments)||this}u(o,e);var r=o.prototype;return r.onInit=function(){this.initialFocus=!1;var e=t.getContext(this),i=e.module,o=e.node,r=this.expression=o.getAttribute("(scrollTo)");this.outputFunction=i.makeFunction(r,["$event"]),this.scrollTo$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(){}))},r.scrollTo$=function(){var e=this,o=t.getContext(this),r=o.module,s=o.node,a=o.parentInstance;return i.fromEvent(s,"click").pipe(n.tap((function(t){var n=r.resolve(e.outputFunction,a,t);if("string"==typeof n){var i=document.querySelector(n);if(i){var o=e.currentTop(),s=o+i.getBoundingClientRect().top-50,l={pow:0},u=document.querySelector("html");gsap.set(u,{"scroll-behavior":"auto"}),gsap.to(l,Math.abs(s-o)/2e3,{pow:1,ease:Quad.easeOut,overwrite:"all",onUpdate:function(){window.scrollTo(0,o+(s-o)*l.pow)},onComplete:function(){gsap.set(u,{"scroll-behavior":"smooth"})}})}}})),n.shareReplay(1))},r.currentTop=function(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0},o}(t.Directive);Ut.meta={selector:"[(scrollTo)]"};var Pt=function(){function t(){}return t.download=function(t,e){void 0===e&&(e="download.txt");var n=window.URL.createObjectURL(t),i=this.a;i.href=n,i.download=e,i.click(),window.URL.revokeObjectURL(n)},r(t,null,[{key:"a",get:function(){var t=this.a_;return t||((t=document.createElement("a")).style="display: none",document.body.appendChild(t),this.a_=t),t}}]),t}(),jt=v?"/tiemme-com/club-modal.html":"/Viewdoc.cshtml?co_id=23649",zt=function(e){function o(){return e.apply(this,arguments)||this}u(o,e);var r=o.prototype;return r.onInit=function(){var e=this,o=t.getContext(this).node;this.href=o.getAttribute("href"),i.fromEvent(o,"click").pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){t.preventDefault(),e.tryDownloadHref()}))},r.onChanges=function(){var e=t.getContext(this).node;this.href=e.getAttribute("href")},r.tryDownloadHref=function(){var t=this;x.get$(this.href,void 0,"blob").pipe(n.first()).subscribe((function(e){Pt.download(e,t.href.split("/").pop())}),(function(e){console.log(e),t.onLogin(event)}))},r.onLogin=function(t){var e=this;k.open$({src:jt,data:{view:1}}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){t instanceof w&&(I.setUser(t.data),e.tryDownloadHref())}))},o}(t.Directive);zt.meta={selector:"[secure]"};var Mt=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.transform=function(t,e){void 0===e&&(e=!0),t=parseInt(t);var n=e?1e3:1024;if(Math.abs(t)<n)return t+" B";var i=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],o=-1;do{t/=n,++o}while(Math.abs(t)>=n&&o<i.length-1);return t.toFixed(1)+" "+i[o]},e}(t.Pipe);Mt.meta={name:"fileSize"};var Dt=function(e){function n(){return e.apply(this,arguments)||this}u(n,e);var o=n.prototype;return o.onInit=function(){this.options={slidesPerView:"auto",spaceBetween:0,centeredSlides:!0,speed:600,autoplay:{delay:5e3},keyboardControl:!0,mousewheelControl:!1,pagination:{el:".swiper-pagination",clickable:!0},keyboard:{enabled:!0,onlyInViewport:!0}},this.init_()},o.onChanges=function(){this.swiperInitOrUpdate_()},o.onDestroy=function(){this.removeListeners_(),this.swiperDestroy_()},o.onBeforePrint=function(){this.swiperDestroy_()},o.slideToIndex=function(t){this.swiper&&this.swiper.slideTo(t)},o.init_=function(){var e=this;if(this.events$=new i.Subject,this.enabled){var n=t.getContext(this).node;gsap.set(n,{opacity:0}),this.index=0;var o=this.options.on||{};o.slideChange=function(){var t=e.swiper;e.index=t.activeIndex,e.events$.next(e.index),e.pushChanges()},this.options.on=o,this.addListeners_()}},o.addListeners_=function(){this.onBeforePrint=this.onBeforePrint.bind(this),window.addEventListener("beforeprint",this.onBeforePrint)},o.removeListeners_=function(){window.removeEventListener("beforeprint",this.onBeforePrint)},o.swiperInitOrUpdate_=function(){if(this.enabled){var e=t.getContext(this).node;if(this.swiper)this.swiper.update();else{var n,i=this.options.on||(this.options.on={}),o=i.init;i.init&&i.init.swiperDirectiveInit||(i.init=function(){var t=this;gsap.to(e,.4,{opacity:1,ease:Power2.easeOut}),setTimeout((function(){"function"==typeof o&&o.apply(t,[n,element,scope])}),1)},i.init.swiperDirectiveInit=!0),gsap.set(e,{opacity:1}),n=new Swiper(e,this.options),this.swiper=n,this.swiper._opening=!0,e.classList.add("swiper-init")}}},o.swiperDestroy_=function(){this.swiper&&this.swiper.destroy()},r(n,[{key:"enabled",get:function(){return!window.matchMedia("print").matches}}]),n}(t.Component);Dt.meta={selector:"[swiper]",inputs:["consumer"]};var At=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.prototype.onInit=function(){this.options={slidesPerView:"auto",spaceBetween:30,speed:600,keyboardControl:!0,mousewheelControl:!1,pagination:{el:".swiper-pagination",clickable:!0},keyboard:{enabled:!0,onlyInViewport:!0}},this.init_()},e}(Dt);At.meta={selector:"[swiper-listing]"};var Bt=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e.prototype.onInit=function(){this.options={slidesPerView:3,spaceBetween:0,centeredSlides:!0,loop:!1,loopAdditionalSlides:100,speed:600,keyboardControl:!0,mousewheelControl:!1,onSlideClick:function(t){},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0}},this.init_()},e}(Dt);Bt.meta={selector:"[swiper-slides]"};var Ht=function(){function t(){}return t.push=function(t){return function(t){(window.dataLayer||[]).push(t),console.log("GtmService.dataLayer",t)}(t)},t}(),Jt=function(e){function i(){return e.apply(this,arguments)||this}u(i,e);var o=i.prototype;return o.onInit=function(){var e=this;this.item={};var i=t.getContext(this),o=i.node,r=i.parentInstance;o.classList.add("video"),this.video=o.querySelector("video"),this.progress=o.querySelector(".icon--play-progress path"),r instanceof Dt&&r.events$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){return e.pause()})),this.addListeners()},o.onDestroy=function(){this.removeListeners()},o.addListeners=function(){var t=this.video;t&&(this.onPlay=this.onPlay.bind(this),this.onPause=this.onPause.bind(this),this.onEnded=this.onEnded.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),t.addEventListener("play",this.onPlay),t.addEventListener("pause",this.onPause),t.addEventListener("ended",this.onEnded),t.addEventListener("timeupdate",this.onTimeUpdate))},o.removeListeners=function(){var t=this.video;t&&(t.removeEventListener("play",this.onPlay),t.removeEventListener("pause",this.onPause),t.removeEventListener("ended",this.onEnded),t.removeEventListener("timeupdate",this.onTimeUpdate))},o.togglePlay=function(){var t=this.video;t&&(t.paused?this.play():this.pause())},o.play=function(){var t=this.video;t.muted=!1,t.play()},o.pause=function(){var t=this.video;t.muted=!0,t.pause()},o.onPlay=function(){this.playing=!0,Ht.push({event:"video play",video_name:this.video.src})},o.onPause=function(){this.playing=!1},o.onEnded=function(){this.playing=!1},o.onTimeUpdate=function(){this.progress.style.strokeDashoffset=this.video.currentTime/this.video.duration},r(i,[{key:"playing",get:function(){return this.playing_},set:function(t){this.playing_!==t&&(this.playing_=t,this.pushChanges())}}]),i}(t.Component);Jt.meta={selector:"[video]",inputs:["item"]};var Wt=function(t){function i(){return t.apply(this,arguments)||this}u(i,t);var o=i.prototype;return o.onInit=function(){var t=this,i=window.data||{departments:[]},o=new e.FormGroup({firstName:new e.FormControl(null,e.Validators.RequiredValidator()),lastName:new e.FormControl(null,e.Validators.RequiredValidator()),email:new e.FormControl(null,[e.Validators.RequiredValidator(),e.Validators.EmailValidator()]),telephone:new e.FormControl(null,e.Validators.RequiredValidator()),experience:null,company:new e.FormControl(null),department:new e.FormControl(null,e.Validators.RequiredValidator()),introduction:new e.FormControl(null),privacy:new e.FormControl(null,e.Validators.RequiredTrueValidator()),curricula:new e.FormControl(null,e.Validators.RequiredValidator()),checkRequest:window.antiforgery,checkField:""}),r=o.controls;r.department.options=i.departments,this.controls=r,o.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.pushChanges()})),this.data=i,this.form=o,this.error=null,this.success=!1},o.test=function(){this.form.patch({firstName:"Jhon",lastName:"Appleseed",email:"jhonappleseed@gmail.com",telephone:"00390721411112",experience:!1,company:"Websolute",department:this.controls.department.options[0].id,introduction:"Hi!",privacy:!0,curricula:{},checkRequest:window.antiforgery,checkField:""})},o.reset=function(){this.form.reset()},o.onSubmit=function(){var t=this;this.form.valid?(this.form.submitted=!0,x.post$("/api/users/WorkWithUs",this.form.value).subscribe((function(e){console.log("WorkWithUsComponent.onSubmit",e),t.success=!0,t.form.reset(),dataLayer.push({event:"formSubmission","form type":"Lavora con Noi"})}),(function(e){console.log("WorkWithUsComponent.error",e),t.error=e,t.pushChanges()}))):this.form.touched=!0},i}(t.Component);Wt.meta={selector:"[work-with-us]"};var Gt=function(e){function o(){return e.apply(this,arguments)||this}u(o,e);var s=o.prototype;return s.onInit=function(){var e=this;this.item={};var r=t.getContext(this),s=r.node,a=r.parentInstance;s.classList.add("youtube"),o.MOBILE&&s.classList.add("mobile"),this.progress=s.querySelector(".icon--play-progress path"),this.onPlayerReady=this.onPlayerReady.bind(this),this.onPlayerStateChange=this.onPlayerStateChange.bind(this),this.onPlayerError=this.onPlayerError.bind(this),this.id$=(new i.Subject).pipe(n.distinctUntilChanged()),a instanceof Dt&&a.events$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){return e.pause()}))},s.onChanges=function(t){var e=this.youtubeId;this.id$.next(e)},s.initPlayer=function(){this.player$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){console.log("YoutubeComponent.player$",t)})),this.interval$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(){})),this.id$.next(this.youtubeId)},s.player$=function(){var e=this,i=t.getContext(this).node,r=i.querySelector(".video");return this.id$.pipe(n.switchMap((function(t){return o.once$().pipe(n.map((function(n){return e.destroyPlayer(),e.player=new n.Player(r,{width:i.offsetWidth,height:i.offsetHeight,videoId:t,playerVars:{autoplay:1,controls:1,disablekb:1,enablejsapi:1,fs:0,loop:1,modestbranding:1,playsinline:1,rel:0,showinfo:0,iv_load_policy:3,listType:"user_uploads"},events:{onReady:e.onPlayerReady,onStateChange:e.onPlayerStateChange,onPlayerError:e.onPlayerError}}),e.player})))})))},s.onPlayerReady=function(t){t.target.mute(),t.target.playVideo()},s.onPlayerStateChange=function(t){1===t.data?this.playing=!0:this.playing=!1},s.onPlayerError=function(t){console.log("YoutubeComponent.onPlayerError",t)},s.destroyPlayer=function(){this.player&&this.player.destroy()},s.onDestroy=function(){this.destroyPlayer()},s.interval$=function(){var t=this;return i.interval(500).pipe(n.filter((function(){return t.playing&&t.player})),n.tap((function(){t.progress.style.strokeDashoffset=t.player.getCurrentTime()/t.player.getDuration()})))},s.togglePlay=function(){this.playing?this.pause():this.play()},s.play=function(){this.player?this.player.playVideo():this.initPlayer()},s.pause=function(){this.player&&this.player.stopVideo()},o.once$=function(){if(this.youtube$)return this.youtube$;this.youtube$=new i.BehaviorSubject(null).pipe(n.filter((function(t){return null!==t}))),window.onYouTubeIframeAPIReady=this.onYouTubeIframeAPIReady_.bind(this);var t=document.createElement("script"),e=document.querySelectorAll("script"),o=e[e.length-1];return o.parentNode.insertBefore(t,o),t.src="//www.youtube.com/iframe_api",this.youtube$},o.onYouTubeIframeAPIReady_=function(){this.youtube$.next(window.YT)},o.mobilecheck=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},o.mobileAndTabletcheck=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},r(o,[{key:"playing",get:function(){return this.playing_},set:function(t){this.playing_!==t&&(this.playing_=t,this.pushChanges())}},{key:"cover",get:function(){return this.youtubeId?"//i.ytimg.com/vi/"+this.youtubeId+"/maxresdefault.jpg":""}}]),o}(t.Component);Gt.MOBILE=Gt.mobileAndTabletcheck(),Gt.meta={selector:"[youtube]",inputs:["youtubeId","title"]};var Yt=function(e){function o(){return e.apply(this,arguments)||this}u(o,e);var s=o.prototype;return s.onInit=function(){var e=this,o=t.getContext(this).node;o.classList.add("zoomable");var r=""!==o.getAttribute("zoomable")?o.querySelectorAll(o.getAttribute("zoomable")):o;i.fromEvent(r,"click").pipe(n.map((function(t){return e.zoom=!e.zoom})),n.takeUntil(this.unsubscribe$)).subscribe((function(t){return console.log("ZoomableDirective",t)}))},s.zoomIn=function(){var e=t.getContext(this).node;this.rect=e.getBoundingClientRect(),this.parentNode=e.parentNode,document.querySelector("body").appendChild(e),gsap.set(e,{left:this.rect.left,top:this.rect.top,width:this.rect.width,height:this.rect.height,position:"fixed"}),e.classList.add("zoom"),gsap.set(e,{position:"fixed"});var n={left:0,top:0,width:window.innerWidth,height:window.innerHeight};gsap.to(e,l({},n,{duration:.7,ease:Power3.easeInOut,onComplete:function(){e.classList.add("zoomed")}}))},s.zoomOut=function(){var e=this,n=t.getContext(this).node;n.classList.remove("zoomed");var i={left:this.rect.left,top:this.rect.top,width:this.rect.width,height:this.rect.height};gsap.to(n,l({},i,{duration:.7,ease:Power3.easeInOut,onComplete:function(){e.parentNode.appendChild(n),gsap.set(n,{clearProps:"all"}),n.classList.remove("zoom"),e.parentNode=null,e.rect=null}}))},r(o,[{key:"zoom",get:function(){return this.zoom_},set:function(t){this.zoom_!==t&&(this.zoom_=t,t?this.zoomIn():this.zoomOut())}}]),o}(t.Directive);Yt.meta={selector:"[zoomable]"};var Xt=function(t){function e(){return t.apply(this,arguments)||this}return u(e,t),e}(t.Module);Xt.meta={imports:[t.CoreModule,e.FormModule],declarations:[m,_,D,F,U,A,J,B,W,Y,G,X,Z,Q,nt,ot,rt,st,at,lt,ut,ct,E,K,pt,tt,Mt,mt,ft,wt,Ct,kt,H,xt,Ft,Rt,_t,It,qt,Vt,St,Ot,Nt,Et,Tt,zt,Ut,Dt,At,Bt,dt,Jt,Wt,Gt,Yt],bootstrap:S},t.Browser.bootstrap(Xt)}));
//# sourceMappingURL=main.min.js.map