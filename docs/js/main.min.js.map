{"version":3,"sources":["src/js/main.js","../../src/js/accordion/accordion.directive.js","../../src/js/accordion/accordion-item.directive.js","../../src/js/filter/filter-item.js","../../src/js/location/location.service.js","../../src/js/filter/filter.service.js","../../src/js/agents/agents.component.js","../../src/js/environment/environment.js","../../src/js/css/css.service.js","../../src/js/dropdown/dropdown.directive.js","../../src/js/http/http.service.js","../../src/js/local-storage/local-storage.service.js","../../src/js/user/user.service.js","../../src/js/header/header.component.js","../../src/js/modal/modal.service.js","../../src/js/app.component.js","../../src/js/intersection/intersection.service.js","../../src/js/appear/appear.directive.js","../../src/js/bim-library/bim-library-01.component.js","../../src/js/bim-library/bim-library-02.component.js","../../src/js/filter/filter-menu-item.js","../../src/js/filter/filter-menu.service.js","../../src/js/bim-library/bim-library.component.js","../../src/js/click-outside/click-outside.directive.js","../../src/js/club/club-forgot.component.js","../../src/js/modal/modal-outlet.component.js","../../src/js/club/club.component.js","../../src/js/club/club-modal.component.js","../../src/js/club/club-password-edit.component.js","../../src/js/club/club-password-recovery.component.js","../../src/js/club/club-profile.component.js","../../src/js/club/club-signin.component.js","../../src/js/club/club-signup.component.js","../../src/js/download/downloads.component.js","../../src/js/dropdown/dropdown-item.directive.js","../../src/js/filter/filter-menu-item.component.js","../../src/js/forms/control.component.js","../../src/js/forms/control-checkbox.component.js","../../src/js/keyboard/keyboard.service.js","../../src/js/forms/control-custom-select.component.js","../../src/js/forms/control-email.component.js","../../src/js/forms/control-file.component.js","../../src/js/forms/control-password.component.js","../../src/js/forms/control-select.component.js","../../src/js/forms/control-text.component.js","../../src/js/forms/control-textarea.component.js","../../src/js/forms/errors.component.js","../../src/js/forms/test.component.js","../../src/js/html/html.pipe.js","../../src/js/image/image.service.js","../../src/js/lazy/lazy.cache.js","../../src/js/lazy/lazy.directive.js","../../src/js/main-menu/main-menu.component.js","../../src/js/media-library/media-library.js","../../src/js/modal/modal.component.js","../../src/js/natural-form/natural-form.service.js","../../src/js/natural-form/natural-form-contact.component.js","../../src/js/natural-form/natural-form-control.component.js","../../src/js/natural-form/natural-form-newsletter.component.js","../../src/js/natural-form/natural-form-request-info.component.js","../../src/js/natural-form/natural-form-search.component.js","../../src/js/natural-form/natural-form-signup.component.js","../../src/js/natural-form/natural-form.component.js","../../src/js/price-list/price-list.js","../../src/js/register-or-login/register-or-login.component.js","../../src/js/request-info-commercial/request-info-commercial.component.js","../../src/js/reserved-area/reserved-area.component.js","../../src/js/scroll-to/scroll-to.directive.js","../../src/js/download/download.service.js","../../src/js/secure/secure.directive.js","../../src/js/size/size.pipe.js","../../src/js/swiper/swiper.directive.js","../../src/js/swiper/swiper-listing.directive.js","../../src/js/swiper/swiper-slides.directive.js","../../src/js/swiper/swiper-technician.directive.js","../../src/js/technician-library/technician-library.js","../../src/js/gtm/gtm.service.js","../../src/js/video/video.component.js","../../src/js/work-with-us/work-with-us.component.js","../../src/js/youtube/youtube.component.js","../../src/js/zoomable/zoomable.directive.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["g","f","exports","module","require","define","amd","globalThis","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_inheritsLoose","subClass","superClass","create","constructor","__proto__","ACCORDION_ID","AccordionDirective","_Directive","_proto","onInit","_this","node","getContext","trigger","getAttribute","querySelector","classList","add","opened","onClick","bind","onDocumentClick","openAccordion","closeAccordion","addListeners","accordion$","pipe","takeUntil","unsubscribe$","subscribe","id","remove","setTimeout","event","contains","addDocumentListeners","next","open","removeDocumentListeners","getValue","addEventListener","document","removeListeners","removeEventListener","onDestroy","nextId","get","accordion","id_","Directive","meta","selector","inputs","outputs","BehaviorSubject","AccordionItemDirective","gsap","set","clearProps","height","offsetHeight","console","log","to","overwrite","onComplete","FilterMode","FilterItem","change$","mode","placeholder","values","options","unshift","label","assign","item","match","getSelectedOption","_this2","find","x","has","getLabel","selectedOption","indexOf","undefined","index","splice","first","toggle","toggleActive","active","LocationService","URLSearchParams","window","location","search","keyOrValue","params","replace","history","pushState","title","url","href","split","toString","deserialize","encoded","decode","serialize","encode","decoded","json","atob","JSON","parse","stringify","btoa","FilterService","initialParams","callback","filters","getParamsCount","reduce","p","c","locationParams","any","items$","items","changes","map","merge","auditTime","tap","filterItems","updateFilterStates","skipFilter","_this3","filteredItems","option","count","disabled","AgentsComponent","_Component","agents","countries","regions","provinces","filterService","idCountry","idsRegions","idsProvinces","pushChanges","hasCategory","categories","Component","STATIC","port","host","DEVELOPMENT","ENV","PRODUCTION","CssService","height$","style","documentElement","fromEvent","innerHeight","startWith","vh","setProperty","DROPDOWN_ID","DropdownDirective","openDropdown","closeDropdown","dropdown$","dropped","dropdown","HttpService","http$","method","data","format","response_","from","fetch","getUrl","headers","Accept","Content-Type","body","then","response","ok","Promise","reject","catchError","error","throwError","getError","get$","query","delete$","post$","put$","patch$","statusCode","status","statusMessage","statusText","LocalStorageService","delete","name","isLocalStorageSupported","localStorage","removeItem","exist","e","cache","setItem","supported","UserService","setUser","user","user$","me$","mapStatic__","switchMap","register$","payload","update","login$","_this4","logout$","_this5","retrieve$","_this6","action","HeaderComponent","submenu","of","onChanges","menu","state","toggleMenu","$event","onDropped","ModalEvent","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","getTemplate$","src","template","getNode","modal$","events$","load$","text","div","createElement","innerHTML","firstElementChild","resolve","Subject","AppComponent","parseQueryString","onToggleMenu","openLogin","openRegister","openLoginRegisterModal","view","IntersectionService","observer","observer_","readySubject_","observerSubject_","IntersectionObserver","entries","intersection$","observe","entry","isIntersecting","finalize","unobserve","AppearDirective","appeared","srcMore","srcHint","BimLibrary01Component","files","departments","catalogues","fileExtension","features","visibleFilters","fake__","openMore","preventDefault","openHint","toggleFilter","products","product","productId","image","code","productCode","productName","abstract","description","category1Id","category2Id","slug","fileName","pop","fileSize","catalogue","titleCase__","category2Description","sort","a","b","department","category1Description","d","str","toLowerCase","word","charAt","toUpperCase","slice","join","BimLibrary02Component","visibleItems","breadcrumb","setMenuItem","child","parent","clear","selectedId","selectedLabel","_f","category3Id","category4Id","families","category4Description","solutions","category3Description","s","FilterMenuItem","values_","change$_","isMenuItem","FilterMenuService","init","tree","Array","isArray","flat","flatMap","toggleSelectedAndActiveStates","toggleSelectedStates","selected","childSelected","Boolean","BimLibraryComponent","maxVisibleItems","busy","scroll$","getBoundingClientRect","bottom","combineLatest","toggleMenuItem","ClickOutsideDirective","initialFocus","_getContext","parentInstance","event$","shareReplay","expression","outputFunction","makeFunction","clickOutside$","ClubForgotComponent","FormGroup","email","FormControl","Validators","RequiredValidator","EmailValidator","checkRequest","antiforgery","checkField","controls","changes$","success","test","patch","reset","onSubmit","valid","submitted","sent","touched","onLogin","login","onRegister","register","ModalOutletComponent","modalNode","modal_","removeChild","appendChild","compile","ClubComponent","views","SIGN_IN","SIGN_UP","FORGOTTEN","hasAttribute","parseInt","onForgot","onSignIn","club","onSignUp","onForgottenSent","ClubModalComponent","_ClubComponent","call","close","ClubPasswordEditComponent","newPassword","newPasswordConfirm","MatchValidator","fieldName","FormValidator","field","ClubPasswordRecoveryComponent","tokenEncoded","ClubProfileComponent","roles","firstName","lastName","company","role","country","province","address","zipCode","city","telephone","fax","newsletter","countryId","countryId_","String","idstato","hidden","ClubSigninComponent","password","signIn","forgot","ClubSignupComponent","privacy","RequiredTrueValidator","dataLayer","form type","DownloadsComponent","downloads","control","DropdownItemDirective","FilterMenuItemComponent","ControlComponent","flags","ControlCheckboxComponent","_ControlComponent","KeyboardService","keydown$","keyup$","typing$","typing","key$","clearTimeout","regexp","ControlCustomSelectComponent","labels","dropdownId","scrollToWord","children","scrollTo","offsetTop","setOption","isMultiple","hasOption","v","select","multiple","ControlEmailComponent","ControlFileComponent","file","required","onReaderComplete","onInputDidChange","lastModified","lastModifiedDate","size","type","reader","FileReader","readAsDataURL","content","result","ControlPasswordComponent","ControlSelectComponent","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","TestComponent","env","onTest","onReset","HtmlPipe","_Pipe","transform","m","n","fromCharCode","unescapes","rx","RegExp","Pipe","PATH","UID","ImageService","worker","worker_","Worker","isBlob","isCors","postMessage","URL","createObjectURL","blob","revokeObjectURL","LazyCache","cache_","LazyDirective","input$","distinctUntilChanged","input","lazy$","lazy","setAttribute","MainMenuComponent","sticky","onToggleSticky","onSearch","MediaLibraryComponent","medias","languages","category","ModalComponent","NaturalFormService","getDefaultValue","naturalForm","firstId","phrase","form$","profileUrl","modalUrl","NaturalFormContactComponent","interests","interest","message","scope","hostname","onBack","back","NaturalFormControlComponent","scroll","change","cssText","rect","left","width","innerWidth","NaturalFormNewsletterComponent","NaturalFormRequestInfoComponent","NaturalFormSearchComponent","onNaturalForm","onClub","animateUnderlines_","animated","concat","querySelectorAll","transformOrigin","scaleX","animate","u","delay","ease","Power3","easeInOut","animateOff_","phrase_","_getContext2","contentNode","instances_","html","childNodes","NaturalFormSignupComponent","signUp","NaturalFormComponent","NATURAL","TECHNICAL","COMMERCIAL","NEWSLETTER","CLUB","clubProfileUrl","clubModalUrl","onNext","PriceListComponent","pricelists","RegisterOrLoginComponent","RequestInfoCommercialComponent","ReservedAreaComponent","doLogout","onProfileUpdate","onPasswordUpdate","ScrollToDirective","scrollTo$","currentTop","top","o","pow","scroll-behavior","Math","abs","Quad","easeOut","onUpdate","pageYOffset","scrollTop","DownloadService","download","click","a_","SecureDirective","tryDownloadHref","FileSizePipe","si","unit","units","toFixed","SwiperDirective","slidesPerView","spaceBetween","centeredSlides","speed","autoplay","keyboardControl","mousewheelControl","pagination","el","clickable","keyboard","enabled","onlyInViewport","init_","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","opacity","on","slideChange","activeIndex","addListeners_","swiperDirectiveInit","Power2","element","Swiper","_opening","destroy","more","matchMedia","matches","SwiperListingDirective","_SwiperDirective","SwiperSlidesDirective","loop","loopAdditionalSlides","onSlideClick","navigation","nextEl","prevEl","SwiperTechnicianDirective","disableOnInteraction","TechnicianLibraryComponent","technicians","GtmService","push_","VideoComponent","video","progress","pause","onPlay","onPause","onEnded","onTimeUpdate","togglePlay","paused","play","muted","playing","video_name","strokeDashoffset","currentTime","duration","playing_","WorkWithUsComponent","experience","introduction","curricula","YoutubeComponent","MOBILE","onPlayerReady","onPlayerStateChange","onPlayerError","id$","youtubeId","initPlayer","player$","player","interval$","once$","youtube","destroyPlayer","Player","offsetWidth","videoId","playerVars","disablekb","enablejsapi","fs","modestbranding","playsinline","rel","showinfo","iv_load_policy","listType","events","onReady","onStateChange","mute","playVideo","interval","getCurrentTime","getDuration","stopVideo","youtube$","onYouTubeIframeAPIReady","onYouTubeIframeAPIReady_","script","scripts","last","parentNode","insertBefore","YT","mobilecheck","check","navigator","userAgent","vendor","opera","substr","mobileAndTabletcheck","ZoomableDirective","zoom","zoomIn","position","zoomOut","zoom_","AppModule","_Module","Module","imports","CoreModule","FormModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { Directive, getContext } from \"rxcomp\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\nlet ACCORDION_ID = 1000000;\r\n\r\nexport default class AccordionDirective extends Directive {\r\n\tget id() {\r\n\t\treturn this.accordion || this.id_ || (this.id_ = AccordionDirective.nextId());\r\n\t}\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tlet trigger = node.getAttribute('accordion-trigger');\r\n\t\ttrigger = trigger ? node.querySelector(trigger) : node;\r\n\t\ttrigger.classList.add('accordion-trigger');\r\n\t\tthis.trigger = trigger;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openAccordion = this.openAccordion.bind(this);\r\n\t\tthis.closeAccordion = this.closeAccordion.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tAccordionDirective.accordion$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('AccordionDirective', id, this['accordion-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.remove('opening', 'closing', 'closed');\r\n\t\t\t\tnode.classList.add('opened');\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnode.classList.add('opening');\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tnode.classList.remove('opening');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}, 1);\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('opening', 'closing', 'closed');\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnode.classList.add('closing');\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tnode.classList.remove('opened', 'closing');\r\n\t\t\t\t\t\tnode.classList.add('closed');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}, 1);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openAccordion();\r\n\t\t} else {\r\n\t\t\tconst accordionItemNode = node.querySelector('[accordion-item]');\r\n\t\t\t// console.log('accordionItemNode', accordionItemNode);\r\n\t\t\tif (!accordionItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeAccordion();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeAccordion();\r\n\t\t}\r\n\t}\r\n\topenAccordion() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tAccordionDirective.accordion$.next(this.id);\r\n\t\t\tthis.open.next(this.id);\r\n\t\t}\r\n\t}\r\n\tcloseAccordion() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (AccordionDirective.accordion$.getValue() === this.id) {\r\n\t\t\t\tAccordionDirective.accordion$.next(null);\r\n\t\t\t\tthis.open.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\tstatic nextId() {\r\n\t\treturn ACCORDION_ID++;\r\n\t}\r\n}\r\n\r\nAccordionDirective.meta = {\r\n\tselector: '[accordion]',\r\n\tinputs: ['accordion', 'accordion-trigger'],\r\n\toutputs: ['open']\r\n};\r\n\r\nAccordionDirective.accordion$ = new BehaviorSubject(null);\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport AccordionDirective from \"./accordion.directive\";\r\n\r\nexport default class AccordionItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['accordion-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('accordion-item');\r\n\t\tAccordionDirective.accordion$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('AccordionItemDirective', id, this['accordion-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.remove('opening', 'closing', 'closed');\r\n\t\t\t\tnode.classList.add('opened');\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tgsap.set(node, { clearProps: 'height' });\r\n\t\t\t\t\tconst height = node.offsetHeight;\r\n\t\t\t\t\tconsole.log(height);\r\n\t\t\t\t\tgsap.set(node, { height: 0 });\r\n\t\t\t\t\tnode.classList.add('opening');\r\n\t\t\t\t\tgsap.to(node, .5, {\r\n\t\t\t\t\t\theight,\r\n\t\t\t\t\t\toverwrite: true,\r\n\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\tnode.classList.remove('opening');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 1);\r\n\t\t\t\t/*\r\n\t\t\t\tnode.classList.remove('opening', 'closing', 'closed');\r\n\t\t\t\tnode.classList.add('opened');\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnode.classList.add('opening');\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tnode.classList.remove('opening');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}, 1);\r\n\t\t\t\t*/\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('opening', 'closing', 'closed');\r\n\t\t\t\tnode.classList.add('closing');\r\n\t\t\t\tgsap.to(node, .5, {\r\n\t\t\t\t\theight: 0,\r\n\t\t\t\t\toverwrite: true,\r\n\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\tnode.classList.remove('opened', 'closing');\r\n\t\t\t\t\t\tnode.classList.add('closed');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t/*\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnode.classList.add('closing');\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tnode.classList.remove('opened', 'closing');\r\n\t\t\t\t\t\tnode.classList.add('closed');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}, 1);\r\n\t\t\t\t*/\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nAccordionItemDirective.meta = {\r\n\tselector: '[accordion-item], [[accordion-item]]',\r\n\tinputs: ['accordion-item']\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n};\r\n\r\nexport default class FilterItem {\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\t\tfilter.options.unshift({\r\n\t\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn true; // item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSelectedOption() {\r\n\t\treturn this.options.find(x => this.has(x));\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst selectedOption = this.getSelectedOption();\r\n\t\t\treturn selectedOption ? selectedOption.label : this.placeholder;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.values = [];\r\n\t\t}\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index === -1) {\r\n\t\t\tif (item.value !== undefined) {\r\n\t\t\t\tthis.values.push(item.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.placeholder = item.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleActive() {\r\n\t\tthis.active = !this.active;\r\n\t}\r\n\r\n}\r\n","export default class LocationService {\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.replace(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic replace(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { auditTime, map, tap } from 'rxjs/operators';\r\nimport LocationService from '../location/location.service';\r\nimport FilterItem from './filter-item';\r\n\r\nexport default class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tthis.filters = filters;\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t\tthis.deserialize(this.filters, initialParams);\r\n\t\t}\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.values && filter.values.length > 0) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('FilterService.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\tauditTime(1),\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.values && x.values.length > 0);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\toption.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\n\r\nexport default class AgentsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst items = window.agents || [];\r\n\t\tconst filters = window.filters || {};\r\n\t\tconst initialParams = window.params || {};\r\n\t\tfilters.countries.mode = FilterMode.SELECT;\r\n\t\tfilters.regions.mode = FilterMode.SELECT;\r\n\t\tfilters.provinces.mode = FilterMode.SELECT;\r\n\t\t//filters.categories.mode = FilterMode.SELECT;\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'countries':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.idCountry && item.idCountry.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'regions':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.idsRegions && item.idsRegions.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\t\t\t\t\r\n\t\t\t\tcase 'provinces':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.idsProvinces && item.idsProvinces.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\t//case 'categories':\r\n\t\t\t\t//\tfilter.filter = (item, value) => {\r\n\t\t\t\t//\t\treturn item.categories && item.categories.indexOf(value) !== -1;\r\n\t\t\t\t//\t};\r\n\t\t\t\t//\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.items = [];\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t\t/*\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.items = items;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}, 50);\r\n\t\t\t*/\r\n\t\t\t// console.log('AgentsComponent.items', items.length);\r\n\t\t});\r\n\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\r\n\t}\r\n\r\n\thasCategory(item, id) {\r\n\t\treturn item.categories && item.categories.indexOf(id) !== -1;\r\n\t}\r\n\r\n\t/*\r\n\tcollect() {\r\n\t\tlet provinces = [];\r\n\t\titems.forEach(x => {\r\n\t\t\tif (x.provinces) {\r\n\t\t\t\tx.provinces.forEach(province => {\r\n\t\t\t\t\tif (provinces.indexOf(province) === -1) {\r\n\t\t\t\t\t\tprovinces.push(province);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t});\r\n\t\tprovinces = provinces.sort().map(x => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x,\r\n\t\t\t\tlabel: x,\r\n\t\t\t}\r\n\t\t});\r\n\t\t// console.log(JSON.stringify(provinces));\r\n\t}\r\n\t*/\r\n\r\n}\r\n\r\nAgentsComponent.meta = {\r\n\tselector: '[agents]',\r\n};\r\n","export const STATIC = window.location.port === '41999' || window.location.host === 'actarian.github.io';\r\nexport const DEVELOPMENT = ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1;\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n","import { fromEvent } from \"rxjs\";\r\nimport { map, startWith, tap } from \"rxjs/operators\";\r\n\r\nexport default class CssService {\r\n\r\n\tstatic height$() {\r\n\t\tconst style = document.documentElement.style;\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tmap(event => window.innerHeight),\r\n\t\t\tstartWith(window.innerHeight),\r\n\t\t\ttap(height => {\r\n\t\t\t\t// First we get the viewport height and we multiple it by 1% to get a value for a vh unit\r\n\t\t\t\tlet vh = height * 0.01;\r\n\t\t\t\t// Then we set the value in the --vh custom property to the root of the document\r\n\t\t\t\tstyle.setProperty('--vh', `${vh}px`);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport default class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\n\r\nexport default class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(this.getUrl(url, format), {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response[format]();\r\n\t\t\t} else {\r\n\t\t\t\treturn response.json().then(json => {\r\n\t\t\t\t\treturn Promise.reject(json);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getUrl(url, format = 'json') {\r\n\t\t// console.log(url);\r\n\t\treturn STATIC && format === 'json' && url.indexOf('/') === 0 ? `.${url}.json` : url;\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\tconsole.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","export default class LocalStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\twindow.localStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\treturn window.localStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.localStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isLocalStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.localStorage.setItem('test', '1');\r\n\t\t\t\twindow.localStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\nimport LocalStorageService from '../local-storage/local-storage.service';\r\n\r\nexport default class UserService {\r\n\r\n\tstatic setUser(user) {\r\n\t\tthis.user$.next(user);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\treturn HttpService.get$('/api/users/me').pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'me')),\r\n\t\t\tswitchMap(user => {\r\n\t\t\t\tthis.setUser(user);\r\n\t\t\t\treturn this.user$;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic register$(payload) {\r\n\t\treturn HttpService.post$('/api/users/register', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update(payload) {\r\n\t\treturn HttpService.post$('/api/users/updateprofile', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$(payload) {\r\n\t\treturn HttpService.post$('/api/users/login', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'login')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn HttpService.post$('/api/users/logout').pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'logout')),\r\n\t\t);\r\n\t}\r\n\tstatic retrieve$(payload) {\r\n\t\treturn HttpService.post$('/api/users/retrievepassword', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'retrieve')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic mapStatic__(user, action = 'me') {\r\n\t\tif (!STATIC) {\r\n\t\t\treturn user;\r\n\t\t};\r\n\t\tswitch (action) {\r\n\t\t\tcase 'me':\r\n\t\t\t\tif (!LocalStorageService.exist('user')) {\r\n\t\t\t\t\tuser = null;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'login':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'logout':\r\n\t\t\t\tLocalStorageService.delete('user');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n\r\n}\r\n\r\nUserService.user$ = new BehaviorSubject(null);\r\n","import { Component } from 'rxcomp';\r\nimport { of } from 'rxjs';\r\nimport { catchError, takeUntil } from 'rxjs/operators';\r\nimport CssService from '../css/css.service';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class HeaderComponent extends Component {\r\n\r\n\tstatic state = { menu: null };\r\n\tget menu() {\r\n\t\treturn HeaderComponent.state.menu;\r\n\t}\r\n\tset menu(menu) {\r\n\t\tHeaderComponent.state.menu = menu;\r\n\t\t// console.log('toggleMenu', this.menu);\r\n\t\tconst body = document.querySelector('body');\r\n\t\tmenu ? body.classList.add('fixed') : body.classList.remove('fixed');\r\n\t\tDropdownDirective.dropdown$.next(null);\r\n\t\tthis.submenu = null;\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.submenu = null;\r\n\t\tthis.user = null;\r\n\t\tUserService.user$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tUserService.me$().pipe(\r\n\t\t\tcatchError(() => of(null)),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tconsole.log('user', user);\r\n\t\t});\r\n\t\tCssService.height$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(height => {\r\n\t\t\t// console.log('HeaderComponent.height$', height);\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.menu = HeaderComponent.state.menu;\r\n\t\t// console.log('HeaderComponent.onChanges', this.menu);\r\n\t}\r\n\r\n\ttoggleMenu($event) {\r\n\t\tthis.menu = this.menu !== $event ? $event : null;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('HeaderComponent.onDropped', id);\r\n\t\tthis.submenu = id;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: 'header',\r\n};\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent {}\r\nexport class ModalRejectEvent extends ModalEvent {}\r\n\r\nexport default class ModalService {\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => this.modal$.next(node)),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { STATIC } from './environment/environment';\r\nimport HeaderComponent from './header/header.component';\r\nimport LocationService from './location/location.service';\r\nimport ModalService, { ModalResolveEvent } from './modal/modal.service';\r\nimport UserService from './user/user.service';\r\n\r\nconst src = STATIC ? '/tiemme-com/club-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\t// console.log('context', context);\r\n\t\tUserService.user$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\t// console.log('AppComponent.user$', user);\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.parseQueryString();\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('AppComponent.onDropped', id);\r\n\t}\r\n\r\n\tonToggleMenu(event) {\r\n\t\tHeaderComponent.state.menu = HeaderComponent.state.menu !== event ? event : null;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tparseQueryString() {\r\n\t\tconst action = LocationService.get('action');\r\n\t\tswitch (action) {\r\n\t\t\tcase 'login':\r\n\t\t\t\tthis.openLogin();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tthis.openRegister();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\topenLogin() {\r\n\t\tthis.openLoginRegisterModal(1);\r\n\t}\r\n\r\n\topenRegister() {\r\n\t\tthis.openLoginRegisterModal(2);\r\n\t}\r\n\r\n\topenLoginRegisterModal(view = 1) {\r\n\t\tModalService.open$({ src: src, data: { view } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('RegisterOrLoginComponent.onRegister', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// onView() { const context = getContext(this); }\r\n\r\n\t// onChanges() {}\r\n\r\n\t// onDestroy() {}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { BehaviorSubject, of , Subject } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\n\r\nexport default class IntersectionService {\r\n\r\n\tstatic observer() {\r\n\t\tif (!this.observer_) {\r\n\t\t\tthis.readySubject_ = new BehaviorSubject(false);\r\n\t\t\tthis.observerSubject_ = new Subject();\r\n\t\t\tthis.observer_ = new IntersectionObserver(entries => {\r\n\t\t\t\tthis.observerSubject_.next(entries);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.observer_;\r\n\t}\r\n\r\n\tstatic intersection$(node) {\r\n\t\tif ('IntersectionObserver' in window) {\r\n\t\t\tconst observer = this.observer();\r\n\t\t\tobserver.observe(node);\r\n\t\t\treturn this.observerSubject_.pipe(\r\n\t\t\t\t// tap(entries => console.log(entries.length)),\r\n\t\t\t\tmap(entries => entries.find(entry => entry.target === node)),\r\n\t\t\t\t// tap(entry => console.log('IntersectionService.intersection$', entry)),\r\n\t\t\t\tfilter(entry => entry !== undefined && entry.isIntersecting), // entry.intersectionRatio > 0\r\n\t\t\t\tfirst(),\r\n\t\t\t\tfinalize(() => observer.unobserve(node)),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of({ target: node });\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tfunction observer() {\r\n\t\t\tif ('IntersectionObserver' in window) {\r\n\t\t\t\treturn new IntersectionObserver(entries => {\r\n\t\t\t\t\tentries.forEach(function(entry) {\r\n\t\t\t\t\t\tif (entry.isIntersecting) {\r\n\t\t\t\t\t\t\tentry.target.classList.add('appear');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn { observe: function(node) { node.classList.add('appear')}, unobserve: function() {} };\r\n\t\t\t}\r\n\t\t}\r\n\t\tobserver.observe(node);\r\n\t\tobserver.unobserve(node);\r\n\t\t*/\r\n\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport default class AppearDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear');\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tif (!this.appeared) {\r\n\t\t\tthis.appeared = true;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tIntersectionService.intersection$(node).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(src => {\r\n\t\t\t\tnode.classList.add('appeared');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppearDirective.meta = {\r\n\tselector: '[appear]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nconst srcMore = STATIC ? '/tiemme-com/services-bim-modal-more.html' : '/Viewdoc.cshtml?co_id=25206';\r\nconst srcHint = STATIC ? '/tiemme-com/services-bim-modal-hint.html' : '/Viewdoc.cshtml?co_id=25207';\r\n\r\nexport default class BimLibrary01Component extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst items = window.files || [];\r\n\t\tconst filters = window.filters || {};\r\n\t\tconst initialParams = window.params || {};\r\n\t\tfilters.departments.mode = FilterMode.OR;\r\n\t\tfilters.catalogues.mode = FilterMode.OR;\r\n\t\t// filters.extensions.mode = FilterMode.OR;\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'extensions':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.files.find(x => x.fileExtension === value);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t\t// console.log('BimLibrary01Component.items', items.length);\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tthis.visibleFilters = {\r\n\t\t\tdepartments: filterService.filters.departments\r\n\t\t};\r\n\t\tthis.fake__();\r\n\t}\r\n\r\n\topenMore(event) {\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: srcMore, data: null }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('BimLibrary01Component.onRegister', event);\r\n\t\t});\r\n\t}\r\n\r\n\topenHint(event) {\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: srcHint, data: null }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('BimLibrary01Component.onRegister', event);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tfake__() {\r\n\t\tHttpService.get$('/api/bim/excel').pipe(\r\n\t\t\tfirst()\r\n\t\t).subscribe(items => {\r\n\t\t\tconst products = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tlet product = products.find(x => x.id === item.productId);\r\n\t\t\t\tif (!product) {\r\n\t\t\t\t\tproduct = {\r\n\t\t\t\t\t\tid: item.productId,\r\n\t\t\t\t\t\timage: item.image,\r\n\t\t\t\t\t\tcode: item.productCode,\r\n\t\t\t\t\t\ttitle: item.productName,\r\n\t\t\t\t\t\tabstract: item.description,\r\n\t\t\t\t\t\tfiles: [],\r\n\t\t\t\t\t\tfeatures: [item.category1Id, item.category2Id],\r\n\t\t\t\t\t\tslug: 'https://tiemmeraccorderie.wslabs.it/it/prodotti/componenti-idraulici/tubi/tubi-multistrato-al-cobrapex/standard/0600/'\r\n\t\t\t\t\t};\r\n\t\t\t\t\tproducts.push(product);\r\n\t\t\t\t}\r\n\t\t\t\tif (!product.files.find(x => x.fileName === item.fileName)) {\r\n\t\t\t\t\tproduct.files.push({\r\n\t\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\t\tfileExtension: `.${item.fileName.split('.').pop()}`,\r\n\t\t\t\t\t\tfileSize: 45000,\r\n\t\t\t\t\t\turl: 'https://tiemmeraccorderie.wslabs.it/media/files/' + item.fileName,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log(JSON.stringify(products));\r\n\t\t\tconst catalogues = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst catalogue = catalogues.find(x => x.value === item.category2Id);\r\n\t\t\t\tif (!catalogue) {\r\n\t\t\t\t\tcatalogues.push({\r\n\t\t\t\t\t\tvalue: item.category2Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category2Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcatalogue.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcatalogues.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log(JSON.stringify(catalogues.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst departments = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst department = departments.find(x => x.value === item.category1Id);\r\n\t\t\t\tif (!department) {\r\n\t\t\t\t\tdepartments.push({\r\n\t\t\t\t\t\tvalue: item.category1Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category1Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdepartment.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdepartments.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log(JSON.stringify(departments.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst menu = {\r\n\t\t\t\tid: 'menu',\r\n\t\t\t\ttitle: 'Area',\r\n\t\t\t\titems: departments.map(d => {\r\n\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\tid: d.value,\r\n\t\t\t\t\t\tlabel: d.label,\r\n\t\t\t\t\t\ttitle: 'Catalogo',\r\n\t\t\t\t\t\titems: catalogues.filter(c => {\r\n\t\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1);\r\n\t\t\t\t\t\t}).map(c => {\r\n\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\tid: c.value,\r\n\t\t\t\t\t\t\t\tlabel: c.label,\r\n\t\t\t\t\t\t\t\ttitle: 'Prodotto',\r\n\t\t\t\t\t\t\t\titems: products.filter(p => {\r\n\t\t\t\t\t\t\t\t\treturn p.features.indexOf(c.value) !== -1;\r\n\t\t\t\t\t\t\t\t}).map(p => {\r\n\t\t\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\t\t\tid: p.id,\r\n\t\t\t\t\t\t\t\t\t\tlabel: p.title,\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t})\r\n\t\t\t};\r\n\t\t\tconsole.log(JSON.stringify(menu));\r\n\t\t});\r\n\t}\r\n\r\n\ttitleCase__(str) {\r\n\t\treturn str.toLowerCase().split(' ').map(function(word) {\r\n\t\t\treturn (word.charAt(0).toUpperCase() + word.slice(1));\r\n\t\t}).join(' ');\r\n\t}\r\n\r\n}\r\n\r\nBimLibrary01Component.meta = {\r\n\tselector: '[bim-library-01]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport { STATIC } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nconst srcMore = STATIC ? '/tiemme-com/services-bim-modal-more.html' : '/Viewdoc.cshtml?co_id=25206';\r\nconst srcHint = STATIC ? '/tiemme-com/services-bim-modal-hint.html' : '/Viewdoc.cshtml?co_id=25207';\r\n\r\nexport default class BimLibrary02Component extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst menu = window.menu || {};\r\n\t\tconst items = window.files || [];\r\n\t\tthis.menu = menu;\r\n\t\tthis.items = items;\r\n\t\tthis.visibleItems = items.slice();\r\n\t\tthis.breadcrumb = [menu];\r\n\t\t// this.fake__();\r\n\t}\r\n\r\n\tsetMenuItem(child, parent) {\r\n\t\tconst clear = (items) => {\r\n\t\t\tif (items) {\r\n\t\t\t\titems.forEach(x => {\r\n\t\t\t\t\tdelete x.selectedId;\r\n\t\t\t\t\tdelete x.selectedLabel;\r\n\t\t\t\t\tclear(x.items);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\tclear(parent.items);\r\n\t\tlet index = this.breadcrumb.reduce((p, c, i) => {\r\n\t\t\treturn c.id === parent.id ? i : p;\r\n\t\t}, -1);\r\n\t\tif (index !== -1) {\r\n\t\t\tparent.selectedId = child.id;\r\n\t\t\tparent.selectedLabel = child.label;\r\n\t\t\tconst breadcrumb = this.breadcrumb.slice(0, index + 1);\r\n\t\t\tif (child.items) {\r\n\t\t\t\tbreadcrumb.push(child);\r\n\t\t\t}\r\n\t\t\tthis.breadcrumb = [];\r\n\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\tthis.pushChanges();\r\n\t\t\tthis.breadcrumb = breadcrumb;\r\n\t\t\tthis.visibleItems = this.items.filter(x => {\r\n\t\t\t\treturn breadcrumb.reduce((p, c) => {\r\n\t\t\t\t\tif (c.selectedId) {\r\n\t\t\t\t\t\treturn p && (x.features.indexOf(c.selectedId) !== -1 || x.id === c.selectedId);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn p;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, true);\r\n\t\t\t});\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\topenMore(event) {\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: srcMore, data: null }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('BimLibrary02Component.onRegister', event);\r\n\t\t});\r\n\t}\r\n\r\n\topenHint(event) {\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: srcHint, data: null }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('BimLibrary02Component.onRegister', event);\r\n\t\t});\r\n\t}\r\n\r\n\tfake__() {\r\n\t\tHttpService.get$('/api/bim/excel').pipe(\r\n\t\t\tfirst()\r\n\t\t).subscribe(items => {\r\n\t\t\tconst products = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tlet f = products.find(x => x.id === item.productId);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tf = {\r\n\t\t\t\t\t\tid: item.productId,\r\n\t\t\t\t\t\timage: item.image,\r\n\t\t\t\t\t\tcode: item.productCode,\r\n\t\t\t\t\t\ttitle: item.productName,\r\n\t\t\t\t\t\tfiles: [],\r\n\t\t\t\t\t\tfeatures: [item.category1Id, item.category2Id, item.category3Id],\r\n\t\t\t\t\t\timage: 'https://tiemmeraccorderie.wslabs.it/' + item.image,\r\n\t\t\t\t\t\tslug: 'https://tiemmeraccorderie.wslabs.it/it/prodotti/componenti-idraulici/tubi/tubi-multistrato-al-cobrapex/standard/0600/'\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (item.category4Id) {\r\n\t\t\t\t\t\tf.features.push(item.category4Id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproducts.push(f);\r\n\t\t\t\t}\r\n\t\t\t\tif (!f.files.find(x => x.fileName === item.fileName)) {\r\n\t\t\t\t\tf.files.push({\r\n\t\t\t\t\t\tdescription: item.description,\r\n\t\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\t\tfileExtension: `.${item.fileName.split('.').pop()}`,\r\n\t\t\t\t\t\tfileSize: 45000,\r\n\t\t\t\t\t\turl: 'https://tiemmeraccorderie.wslabs.it/media/files/' + item.fileName,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log('products', JSON.stringify(products));\r\n\t\t\tconst families = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = families.find(x => x.value === item.category4Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tfamilies.push({\r\n\t\t\t\t\t\tvalue: item.category4Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category4Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tfamilies.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('families', JSON.stringify(families.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst solutions = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = solutions.find(x => x.value === item.category3Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tsolutions.push({\r\n\t\t\t\t\t\tvalue: item.category3Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category3Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsolutions.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('solutions', JSON.stringify(solutions.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst catalogues = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = catalogues.find(x => x.value === item.category2Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tcatalogues.push({\r\n\t\t\t\t\t\tvalue: item.category2Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category2Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcatalogues.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('catalogues', JSON.stringify(catalogues.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst departments = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = departments.find(x => x.value === item.category1Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tdepartments.push({\r\n\t\t\t\t\t\tvalue: item.category1Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category1Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdepartments.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('departments', JSON.stringify(departments.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst menu = {\r\n\t\t\t\tid: 'menu',\r\n\t\t\t\ttitle: 'Area',\r\n\t\t\t\titems: departments.map(d => {\r\n\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\tid: d.value,\r\n\t\t\t\t\t\tlabel: d.label,\r\n\t\t\t\t\t\ttitle: 'Catalogo',\r\n\t\t\t\t\t\titems: catalogues.filter(c => {\r\n\t\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1);\r\n\t\t\t\t\t\t}).map(c => {\r\n\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\tid: c.value,\r\n\t\t\t\t\t\t\t\tlabel: c.label,\r\n\t\t\t\t\t\t\t\ttitle: 'Soluzione',\r\n\t\t\t\t\t\t\t\titems: solutions.filter(s => {\r\n\t\t\t\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1 && p.features.indexOf(s.value) !== -1);\r\n\t\t\t\t\t\t\t\t}).map(s => {\r\n\t\t\t\t\t\t\t\t\tlet item = {\r\n\t\t\t\t\t\t\t\t\t\tid: s.value,\r\n\t\t\t\t\t\t\t\t\t\tlabel: s.label,\r\n\t\t\t\t\t\t\t\t\t\ttitle: 'Famiglia',\r\n\t\t\t\t\t\t\t\t\t\titems: families.filter(f => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1 && p.features.indexOf(s.value) !== -1 && p.features.indexOf(f.value) !== -1);\r\n\t\t\t\t\t\t\t\t\t\t}).map(f => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\t\t\t\t\tid: f.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: f.label,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Prodotto',\r\n\t\t\t\t\t\t\t\t\t\t\t\titems: products.filter(p => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn p.features.indexOf(f.value) !== -1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}).map(p => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: p.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: p.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tif (item.items.length === 0) {\r\n\t\t\t\t\t\t\t\t\t\titem = {\r\n\t\t\t\t\t\t\t\t\t\t\tid: s.value,\r\n\t\t\t\t\t\t\t\t\t\t\tlabel: s.label,\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Prodotto',\r\n\t\t\t\t\t\t\t\t\t\t\titems: products.filter(p => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn p.features.indexOf(s.value) !== -1;\r\n\t\t\t\t\t\t\t\t\t\t\t}).map(p => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: p.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: p.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t})\r\n\t\t\t};\r\n\t\t\tconsole.log('menu', JSON.stringify(menu));\r\n\t\t});\r\n\t}\r\n\r\n\ttitleCase__(str) {\r\n\t\treturn str.toLowerCase().split(' ').map(function(word) {\r\n\t\t\treturn (word.charAt(0).toUpperCase() + word.slice(1));\r\n\t\t}).join(' ');\r\n\t}\r\n\r\n}\r\n\r\nBimLibrary02Component.meta = {\r\n\tselector: '[bim-library-02]',\r\n};\r\n","// import FilterItem, { FilterMode } from './filter-item';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { FilterMode } from './filter-item';\r\n\r\nexport default class FilterMenuItem {\r\n\r\n\t/*\r\n\tconstructor(filter, parent) {\r\n\t\tfilter.mode = filter.mode || FilterMode.OR;\r\n\t\tfilter.options = filter.options ? filter.options.map(x => x.options ? new FilterMenuItem(x, parent || this) : x) : [];\r\n\t\tsuper(filter);\r\n\t}\r\n\t*/\r\n\r\n\tget values() {\r\n\t\treturn this.parent ? this.parent.values : this.values_;\r\n\t}\r\n\r\n\tget change$() {\r\n\t\tif (this.parent) {\r\n\t\t\treturn this.parent.change$;\r\n\t\t} else if (!this.change$_) {\r\n\t\t\tthis.change$_ = new BehaviorSubject();\r\n\t\t}\r\n\t\treturn this.change$_;\r\n\t}\r\n\r\n\tconstructor(filter, parent) {\r\n\t\t// this.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values_ = [];\r\n\t\tthis.options = [];\r\n\t\tthis.items = [];\r\n\t\tif (filter) {\r\n\t\t\tfilter.mode = filter.mode || FilterMode.OR;\r\n\t\t\tfilter.options = filter.options ? filter.options.map(x => x.options ? new FilterMenuItem(x, parent || this) : x) : [];\r\n\t\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\t\tfilter.options.unshift({\r\n\t\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t\tthis.parent = parent;\r\n\t\tif (parent) {\r\n\t\t\tparent.items.push.apply(parent.items, this.options);\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn true; // item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\treturn this.placeholder || this.label;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.values_ = [];\r\n\t\t}\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index === -1) {\r\n\t\t\tif (item.value !== undefined) {\r\n\t\t\t\tthis.values.push(item.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.placeholder = item.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// remove all child items\r\n\t\tif (item instanceof FilterMenuItem) {\r\n\t\t\titem.options.forEach(x => item.remove(x));\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleActive() {\r\n\t\tthis.active = !this.active;\r\n\t}\r\n\r\n\tisMenuItem(option) {\r\n\t\treturn option instanceof FilterMenuItem;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { auditTime, map, tap } from 'rxjs/operators';\r\nimport LocationService from '../location/location.service';\r\nimport FilterMenuItem from './filter-menu-item';\r\n\r\nexport default class FilterMenuService {\r\n\r\n\tconstructor() {\r\n\t\tthis.filters = [];\r\n\t}\r\n\r\n\tinit(tree, initialParams, callback) {\r\n\t\tthis.filters = Array.isArray(tree) ? tree.map(x => new FilterMenuItem(x)) : [];\r\n\t\tthis.flat = this.flatMap(this.filters);\r\n\t\tif (typeof callback === 'function') {\r\n\t\t\tthis.flat.forEach(x => callback(x));\r\n\t\t}\r\n\t\t// console.log(this.flat);\r\n\t\tthis.deserialize(this.filters, initialParams);\r\n\t\tthis.toggleSelectedAndActiveStates(this.filters);\r\n\t\treturn this.filters;\r\n\t}\r\n\r\n\titems$(filters, items, callback) {\r\n\t\tfilters = this.init(filters, null, callback);\r\n\t\tconst changes = filters.map(x => x.change$);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\tauditTime(1),\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(this.flat, items)),\r\n\t\t\ttap(() => this.toggleSelectedStates(filters)), // forza apertura menu\r\n\t\t);\r\n\t}\r\n\r\n\tflatMap(filters, items) {\r\n\t\titems = items || [];\r\n\t\tfilters.forEach(x => {\r\n\t\t\tif (x instanceof FilterMenuItem) {\r\n\t\t\t\titems.push(x);\r\n\t\t\t}\r\n\t\t\tif (x.options) {\r\n\t\t\t\tthis.flatMap(x.options, items);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\t// const filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.value !== null);\r\n\t\t// const filters = this.flat.filter(x => x.values && x.values.length > 0);\r\n\t\t// console.log(this.filters);\r\n\t\tconst filters = this.filters.filter(x => x.values && x.values.length > 0);\r\n\t\t/*\r\n\t\tif (!skipFilter) {\r\n\t\t\tconsole.log('cycles', filters.length, 'x', items.length, '=', filters.length * items.length);\r\n\t\t}\r\n\t\t*/\r\n\t\tif (filters.length) {\r\n\t\t\t// console.log('filters', filters);\r\n\t\t\treturn items.filter(item => {\r\n\t\t\t\tlet has = true;\r\n\t\t\t\tfilters.forEach(filter => {\r\n\t\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn has;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn items.slice();\r\n\t\t}\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items) {\r\n\t\t// console.log(filters);\r\n\t\tfilters.forEach(filter => {\r\n\t\t\tconst filteredItems = this.filterItems(items, filter.parent ? filter.parent : filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(count);\r\n\t\t\t\toption.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tfilter.values_ = params[filter.key + '-' + filter.value] || [];\r\n\t\t\t\t// console.log('deserialize', filter.key + '-' + filter.value, filter.values_);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\ttoggleSelectedAndActiveStates(filters, parent) {\r\n\t\tlet selected = false;\r\n\t\tif (filters) {\r\n\t\t\tselected = filters.reduce((p, c) => {\r\n\t\t\t\tconst childSelected = this.toggleSelectedAndActiveStates(c.options, c);\r\n\t\t\t\treturn p || Boolean(parent && parent.has(c)) || childSelected;\r\n\t\t\t}, false);\r\n\t\t}\r\n\t\tif (parent) {\r\n\t\t\tparent.selected = selected;\r\n\t\t\tparent.active = selected;\r\n\t\t}\r\n\t\treturn selected;\r\n\t}\r\n\r\n\ttoggleSelectedStates(filters, parent) {\r\n\t\tlet selected = false;\r\n\t\tif (filters) {\r\n\t\t\tselected = filters.reduce((p, c) => {\r\n\t\t\t\tconst childSelected = this.toggleSelectedStates(c.options, c);\r\n\t\t\t\treturn p || Boolean(parent && parent.has(c)) || childSelected;\r\n\t\t\t}, false);\r\n\t\t}\r\n\t\tif (parent) {\r\n\t\t\tparent.selected = selected;\r\n\t\t}\r\n\t\treturn selected;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tfilters.forEach((filter) => {\r\n\t\t\tif (filter.values && filter.values.length > 0) {\r\n\t\t\t\tparams[filter.key + '-' + filter.value] = filter.values;\r\n\t\t\t\t// console.log('serialize', filter.values);\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('FilterMenuService.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { combineLatest, fromEvent } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport FilterMenuService from '../filter/filter-menu.service';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nconst srcMore = STATIC ? '/tiemme-com/services-bim-modal-more.html' : '/Viewdoc.cshtml?co_id=25206';\r\nconst srcHint = STATIC ? '/tiemme-com/services-bim-modal-hint.html' : '/Viewdoc.cshtml?co_id=25207';\r\n\r\nconst MAX_VISIBLE_ITEMS = 20;\r\n\r\nexport default class BimLibraryComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.filters = [];\r\n\t\tthis.items = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.filterService = new FilterMenuService();\r\n\t\tthis.maxVisibleItems = MAX_VISIBLE_ITEMS;\r\n\t\tthis.busy = false;\r\n\t\t// this.fake__();\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\t// console.log(data);\r\n\t\t\tthis.filterService.items$(data[0], data[1], (filter) => {\r\n\t\t\t\tswitch (filter.key) {\r\n\t\t\t\t\tcase 'feature':\r\n\t\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'extension':\r\n\t\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\t\treturn item.files.find(x => x.fileExtension === value);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(items => {\r\n\t\t\t\tthis.maxVisibleItems = MAX_VISIBLE_ITEMS;\r\n\t\t\t\tthis.items = items;\r\n\t\t\t\tthis.visibleItems = items.slice(0, this.maxVisibleItems);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\t// console.log('BimLibrary01Component.items', items.length);\r\n\t\t\t});\r\n\t\t\tthis.scroll$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe();\r\n\t\t\tthis.filters = this.filterService.filters; // data[0].map(x => new FilterMenuItem(x));\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(window, 'scroll').pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tif (this.items.length > this.visibleItems.length && !this.busy) {\r\n\t\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\t\tif (rect.bottom < window.innerHeight) {\r\n\t\t\t\t\t\tthis.busy = true;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.busy = false;\r\n\t\t\t\t\t\t\tthis.maxVisibleItems += MAX_VISIBLE_ITEMS;\r\n\t\t\t\t\t\t\tthis.visibleItems = this.items.slice(0, this.maxVisibleItems);\r\n\t\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest(\r\n\t\t\tHttpService.get$('/api/bim/filters'),\r\n\t\t\tHttpService.get$('/api/bim/files')\r\n\t\t);\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tfilter.active = !filter.active;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\ttoggleMenuItem(filter, option) {\r\n\t\tif (filter.isMenuItem(option)) {\r\n\t\t\toption.toggleActive();\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\topenMore(event) {\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: srcMore, data: null }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('BimLibraryComponent.onRegister', event);\r\n\t\t});\r\n\t}\r\n\r\n\topenHint(event) {\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: srcHint, data: null }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('BimLibraryComponent.onRegister', event);\r\n\t\t});\r\n\t}\r\n\r\n\tfake__() {\r\n\t\tHttpService.get$('/api/bim/excel').pipe(\r\n\t\t\tfirst()\r\n\t\t).subscribe(items => {\r\n\t\t\tconst products = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tlet f = products.find(x => x.id === item.productId);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tf = {\r\n\t\t\t\t\t\tid: item.productId,\r\n\t\t\t\t\t\timage: item.image,\r\n\t\t\t\t\t\tcode: item.productCode,\r\n\t\t\t\t\t\ttitle: item.productName,\r\n\t\t\t\t\t\tfiles: [],\r\n\t\t\t\t\t\tfeatures: [item.category1Id, item.category2Id, item.category3Id],\r\n\t\t\t\t\t\timage: 'https://tiemmeraccorderie.wslabs.it/' + item.image,\r\n\t\t\t\t\t\tslug: 'https://tiemmeraccorderie.wslabs.it/it/prodotti/componenti-idraulici/tubi/tubi-multistrato-al-cobrapex/standard/0600/'\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (item.category4Id) {\r\n\t\t\t\t\t\tf.features.push(item.category4Id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproducts.push(f);\r\n\t\t\t\t}\r\n\t\t\t\tif (!f.files.find(x => x.fileName === item.fileName)) {\r\n\t\t\t\t\tf.files.push({\r\n\t\t\t\t\t\tdescription: item.description,\r\n\t\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\t\tfileExtension: `.${item.fileName.split('.').pop()}`,\r\n\t\t\t\t\t\tfileSize: 45000,\r\n\t\t\t\t\t\turl: 'https://tiemmeraccorderie.wslabs.it/media/files/' + item.fileName,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log('products', JSON.stringify(products));\r\n\t\t\tconst families = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = families.find(x => x.value === item.category4Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tfamilies.push({\r\n\t\t\t\t\t\tvalue: item.category4Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category4Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tfamilies.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('families', JSON.stringify(families.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst solutions = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = solutions.find(x => x.value === item.category3Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tsolutions.push({\r\n\t\t\t\t\t\tvalue: item.category3Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category3Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsolutions.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('solutions', JSON.stringify(solutions.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst catalogues = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = catalogues.find(x => x.value === item.category2Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tcatalogues.push({\r\n\t\t\t\t\t\tvalue: item.category2Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category2Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcatalogues.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('catalogues', JSON.stringify(catalogues.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst departments = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = departments.find(x => x.value === item.category1Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tdepartments.push({\r\n\t\t\t\t\t\tvalue: item.category1Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category1Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdepartments.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('departments', JSON.stringify(departments.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst menu = departments.map(d => {\r\n\t\t\t\tconst item = {\r\n\t\t\t\t\tvalue: d.value,\r\n\t\t\t\t\tlabel: d.label,\r\n\t\t\t\t\tkey: 'feature',\r\n\t\t\t\t\toptions: catalogues.filter(c => {\r\n\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1);\r\n\t\t\t\t\t}).map(c => {\r\n\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\tvalue: c.value,\r\n\t\t\t\t\t\t\tlabel: c.label,\r\n\t\t\t\t\t\t\tkey: 'feature',\r\n\t\t\t\t\t\t\toptions: solutions.filter(s => {\r\n\t\t\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1 && p.features.indexOf(s.value) !== -1);\r\n\t\t\t\t\t\t\t}).map(s => {\r\n\t\t\t\t\t\t\t\tlet item = {\r\n\t\t\t\t\t\t\t\t\tvalue: s.value,\r\n\t\t\t\t\t\t\t\t\tlabel: s.label,\r\n\t\t\t\t\t\t\t\t\tkey: 'feature',\r\n\t\t\t\t\t\t\t\t\toptions: families.filter(f => {\r\n\t\t\t\t\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1 && p.features.indexOf(s.value) !== -1 && p.features.indexOf(f.value) !== -1);\r\n\t\t\t\t\t\t\t\t\t}).map(f => {\r\n\t\t\t\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: f.value,\r\n\t\t\t\t\t\t\t\t\t\t\tlabel: f.label\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tif (item.options.length === 0) {\r\n\t\t\t\t\t\t\t\t\titem = {\r\n\t\t\t\t\t\t\t\t\t\tvalue: s.value,\r\n\t\t\t\t\t\t\t\t\t\tlabel: s.label\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\treturn item;\r\n\t\t\t});\r\n\t\t\tmenu.push({\r\n\t\t\t\t\"value\": null,\r\n\t\t\t\t\"label\": \"Estensione\",\r\n\t\t\t\t\"key\": \"extension\",\r\n\t\t\t\t\"options\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"value\": \".rte\",\r\n\t\t\t\t\t\t\"label\": \".rte\"\r\n\t\t\t\t\t  },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"value\": \".rfa\",\r\n\t\t\t\t\t\t\"label\": \".rfa\"\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t]\r\n\t\t\t});\r\n\t\t\tconsole.log('menu', JSON.stringify(menu));\r\n\t\t});\r\n\t}\r\n\r\n\ttitleCase__(str) {\r\n\t\treturn str.toLowerCase().split(' ').map(function(word) {\r\n\t\t\treturn (word.charAt(0).toUpperCase() + word.slice(1));\r\n\t\t}).join(' ');\r\n\t}\r\n\r\n}\r\n\r\nBimLibraryComponent.meta = {\r\n\tselector: '[bim-library]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter, shareReplay, takeUntil } from 'rxjs/operators';\r\n\r\nexport default class ClickOutsideDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\r\n\t\tconst event$ = this.event$ = fromEvent(document, 'click').pipe(\r\n\t\t\tfilter(event => {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, target, this.element.nativeElement.contains(target));\r\n\t\t\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(target) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t\t\t// console.log(target, documentContained);\r\n\t\t\t\tconst clickedInside = node.contains(target) || !document.contains(target);\r\n\t\t\t\tif (!clickedInside) {\r\n\t\t\t\t\tif (this.initialFocus) {\r\n\t\t\t\t\t\tthis.initialFocus = false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.initialFocus = true;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t\tconst expression = node.getAttribute(`(clickOutside)`);\r\n\t\tif (expression) {\r\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\t\tevent$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparentInstance.clickOutside$ = event$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClickOutsideDirective.meta = {\r\n\tselector: `[(clickOutside)]`,\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ClubForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('ClubForgotComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('ClubForgotComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('ClubForgotComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tUserService.retrieve$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('ClubForgotComponent.onSubmit', response);\r\n\t\t\t\t\tthis.sent.next(true);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ClubForgotComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nClubForgotComponent.meta = {\r\n\tselector: '[club-forgot]',\r\n\toutputs: ['sent', 'login', 'register'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ModalComponent.onRegister');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ModalComponent.onLogin');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ClubComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.views = {\r\n\t\t\tSIGN_IN: 1,\r\n\t\t\tSIGN_UP: 2,\r\n\t\t\tFORGOTTEN: 3,\r\n\t\t};\r\n\t\tthis.view = node.hasAttribute('view') ? parseInt(node.getAttribute('view')) : this.views.SIGN_IN;\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\t// console.log('ClubComponent.onForgot');\r\n\t\tthis.view = this.views.FORGOTTEN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ClubComponent.onLogin');\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ClubComponent.onRegister');\r\n\t\tthis.view = this.views.SIGN_UP;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('ClubComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.club;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('ClubComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.club;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgottenSent(email) {\r\n\t\t/*\r\n\t\tconsole.log('ClubComponent.onForgottenSent', email);\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nClubComponent.meta = {\r\n\tselector: '[club]',\r\n\tinputs: ['club']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\nimport ClubComponent from './club.component';\r\n\r\nexport default class ClubModalComponent extends ClubComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\t// console.log('ClubModalComponent.onInit', data);\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('ClubModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('ClubModalComponent.onSignUp', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\t/*\r\n\tonDestroy() {\r\n\t\t// console.log('ClubModalComponent.onDestroy');\r\n\t}\r\n\t*/\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nClubModalComponent.meta = {\r\n\tselector: '[club-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, FormValidator, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ClubPasswordEditComponent extends Component {\r\n\r\n\tonInit() {\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tnewPassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewPasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), this.MatchValidator('newPassword')]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('ClubPasswordEditComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\t// user 'rpiemonti@websolute.it'\r\n\t\tthis.form.patch({\r\n\t\t\tnewPassword: 'npword',\r\n\t\t\tnewPasswordConfirm: 'npword',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tMatchValidator(fieldName) {\r\n\t\treturn new FormValidator((value) => {\r\n\t\t\tconst field = this.form ? this.form.get(fieldName) : null;\r\n\t\t\tif (!value || !field) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('ClubPasswordEditComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t // Lo ri-imposto perché essendoci il campo password Chrome fa l'autocomplete dei dati, e riempie il campo checkField con l'username\r\n\t\t\tthis.form.patch({\r\n\t\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\t\tcheckField: ''\r\n\t\t\t});\r\n\t\t\t// console.log('ClubPasswordEditComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/users/editpassword', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('ClubPasswordEditComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t// this.update.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ClubPasswordEditComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClubPasswordEditComponent.meta = {\r\n\tselector: '[club-password-edit]',\r\n\t//outputs: ['update'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, FormValidator, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ClubPasswordRecoveryComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tnewPassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewPasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), this.MatchValidator('newPassword')]),\r\n\t\t\ttokenEncoded: window.tokenEncoded,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('ClubPasswordComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\t// user 'rpiemonti@websolute.it'\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tnewPassword: 'npword',\r\n\t\t\tnewPasswordConfirm: 'npword',\r\n\t\t\ttokenEncoded: 'TESTLOCAL',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tMatchValidator(fieldName) {\r\n\t\treturn new FormValidator((value) => {\r\n\t\t\tconst field = this.form ? this.form.get(fieldName) : null;\r\n\t\t\tif (!value || !field) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('ClubPasswordComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('ClubPasswordComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/users/resetpassword', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('ClubPasswordRecoveryComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t// this.update.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ClubPasswordRecoveryComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClubPasswordRecoveryComponent.meta = {\r\n\tselector: '[club-password-recovery]',\r\n\t//outputs: ['update'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, FormValidator, Validators } from 'rxcomp-form';\r\nimport { of } from 'rxjs';\r\nimport { catchError, takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ClubProfileComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: [],\r\n\t\t}\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\trole: null,\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\taddress: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tzipCode: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcity: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\ttelephone: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tfax: null,\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t/*\r\n\t\t\t// password autogenerata\r\n\t\t\tusername: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), this.MatchValidator('password')]),\r\n\t\t\t*/\r\n\t\t\t// privacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: null,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('ClubProfileComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\r\n\t\tUserService.me$().pipe(\r\n\t\t\tcatchError(() => of (null)),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.form.patch(user);\r\n\t\t});\r\n\t}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('ClubProfileComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\taddress: 'Strada della Campanara',\r\n\t\t\tzipCode: '15',\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\ttelephone: '00390721411112',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t/*\r\n\t\t\t// password autogenerata\r\n\t\t\tusername: 'username',\r\n\t\t\tpassword: 'password',\r\n\t\t\tpasswordConfirm: 'password',\r\n\t\t\t*/\r\n\t\t\t// privacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tMatchValidator(fieldName) {\r\n\t\treturn new FormValidator((value) => {\r\n\t\t\tconst field = this.form ? this.form.get(fieldName) : null;\r\n\t\t\tif (!value || !field) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('ClubProfileComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('ClubProfileComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tUserService.update(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('ClubProfileComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\tthis.update.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ClubProfileComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClubProfileComponent.meta = {\r\n\tselector: '[club-profile]',\r\n\toutputs: ['update'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ClubSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\tinterests: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('ClubSigninComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: 'password',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('ClubSigninComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('ClubSigninComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Login', this.form.value)\r\n\t\t\tUserService.login$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('ClubSigninComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\tthis.signIn.next(typeof response === 'string' ? { status: response } : response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ClubSigninComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot() {\r\n\t\tthis.forgot.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nClubSigninComponent.meta = {\r\n\tselector: '[club-signin]',\r\n\toutputs: ['signIn', 'forgot', 'register'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, FormValidator, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ClubSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: [],\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\trole: null,\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\taddress: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tzipCode: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcity: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\ttelephone: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tfax: null,\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t/*\r\n\t\t\t// password autogenerata\r\n\t\t\tusername: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), this.MatchValidator('password')]),\r\n\t\t\t*/\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: null,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('ClubSignupComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('ClubSignupComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\taddress: 'Strada della Campanara',\r\n\t\t\tzipCode: '15',\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\ttelephone: '00390721411112',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t/*\r\n\t\t\tusername: 'username',\r\n\t\t\tpassword: 'password',\r\n\t\t\tpasswordConfirm: 'password',\r\n\t\t\t*/\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tMatchValidator(fieldName) {\r\n\t\treturn new FormValidator((value) => {\r\n\t\t\tconst field = this.form ? this.form.get(fieldName) : null;\r\n\t\t\tif (!value || !field) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('ClubSignupComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('ClubSignupComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Register', this.form.value)\r\n\t\t\tUserService.register$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('ClubSignupComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Registrazione Tiemme Club'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t// this.signUp.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ClubSignupComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.form.submitted = false;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n}\r\n\r\nClubSignupComponent.meta = {\r\n\tselector: '[club-signup]',\r\n\t//outputs: ['signUp', 'login'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nexport default class DownloadsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconsole.log(this.downloads);\r\n\t\tthis.items = window[this.downloads];\r\n\t\tthis.control = new FormControl(this.items[0].id);\r\n\t\tthis.control.options = this.items;\r\n\t\tthis.control.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(changes => this.pushChanges());\r\n\t}\r\n\r\n}\r\n\r\nDownloadsComponent.meta = {\r\n\tselector: '[downloads]',\r\n\tinputs: ['downloads']\r\n};\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport DropdownDirective from \"./dropdown.directive\";\r\n\r\nexport default class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport FilterMenuItem from './filter-menu-item';\r\n\r\nexport default class FilterMenuItemComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\t// console.log('FilterMenuItemComponent.onInit', this);\r\n\t}\r\n\r\n\ttoggleActive(option) {\r\n\t\tif (option instanceof FilterMenuItem) {\r\n\t\t\toption.toggleActive();\r\n\t\t\tthis.pushChanges();\r\n\t\t} else {\r\n\t\t\tthis.filter.toggle(option);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nFilterMenuItemComponent.meta = {\r\n\tselector: '[menu-item]',\r\n\tinputs: ['filter', 'item'],\r\n\ttemplate: /* html */ `\r\n\t\t<span class=\"option\" [class]=\"{ active: filter.has(item), disabled: item.disabled, selected: item.selected }\">\r\n\t\t\t<span class=\"checkbox\" (click)=\"filter.toggle(item)\"></span>\r\n\t\t\t<span class=\"name\" [class]=\"{ menu: filter.isMenuItem(item), active: item.active }\" (click)=\"toggleActive(item)\" [innerHTML]=\"item.label\"></span>\r\n\t\t\t<span class=\"count\" [innerHTML]=\"item.count || ''\"></span>\r\n\t\t</span>\r\n\t\t<ul class=\"nav--options\" *if=\"filter.isMenuItem(item) && (item.active)\">\r\n\t\t\t<li class=\"nav--options__menu\" menu-item [filter]=\"item\" [item]=\"option\" *for=\"let option of item.options\"></li>\r\n\t\t</ul>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label>\r\n\t\t\t\t<input type=\"checkbox\" class=\"control--checkbox\" [formControl]=\"control\" [value]=\"true\" />\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t</label>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent } from 'rxjs';\r\nimport { filter, map, shareReplay } from 'rxjs/operators';\r\n\r\nexport default class KeyboardService {\r\n\r\n\tstatic keydown$() {\r\n\t\treturn fromEvent(window, 'keydown').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\treturn fromEvent(window, 'keyup').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tlet typing = '',\r\n\t\t\tto;\r\n\t\treturn this.key$().pipe(\r\n\t\t\tmap(key => {\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t}\r\n\t\t\t\ttyping += key;\r\n\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\ttyping = '';\r\n\t\t\t\t}, 1500);\r\n\t\t\t\treturn typing;\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tconst regexp = /\\w/;\r\n\t\treturn this.keydown$().pipe(\r\n\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\tmap(event => event.key),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport KeyboardService from '../keyboard/keyboard.service';\r\nimport ControlComponent from './control.component';\r\n\r\nexport default class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tsetOption(item) {\r\n\t\tthis.control.value = item.id;\r\n\t\t// DropdownDirective.dropdown$.next(null);\r\n\t}\r\n\t*/\r\n\r\n\tsetOption(item) {\r\n\t\tconsole.log('setOption', item, this.isMultiple);\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tthis.control.value = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tthis.control.value = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log($event);\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\t/*\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.add('dropped');\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tonClickOutside(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.remove('dropped');\r\n\t}\r\n\t*/\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\tinputs: ['control', 'label', 'multiple'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--select\" [innerHTML]=\"getLabel()\"></span>\r\n\t\t\t<svg class=\"icon icon--caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t<li *for=\"let item of control.options\" (click)=\"setOption(item)\"><span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name\"></span></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n\t/*  (click)=\"onClick($event)\" (clickOutside)=\"onClickOutside($event)\" */\r\n\t/*  <!-- <div class=\"dropdown\" [class]=\"{ dropped: dropped }\"> --> */\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlEmailComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlEmailComponent.meta = {\r\n\tselector: '[control-email]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" required email />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlFileComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.file = null;\r\n\t\tthis.required = false;\r\n\t\tthis.onReaderComplete = this.onReaderComplete.bind(this);\r\n\t}\r\n\r\n\tonInputDidChange(event) {\r\n\t\tconst input = event.target;\r\n\t\tconst file = input.files[0];\r\n\t\tthis.file = {\r\n\t\t\tname: file.name,\r\n\t\t\tlastModified: file.lastModified,\r\n\t\t\tlastModifiedDate: file.lastModifiedDate,\r\n\t\t\tsize: file.size,\r\n\t\t\ttype: file.type,\r\n\t\t}\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', this.onReaderComplete);\r\n\t\treader.readAsDataURL(file);\r\n\t\t// reader.readAsArrayBuffer() // Starts reading the contents of the specified Blob, once finished, the result attribute contains an ArrayBuffer representing the file's data.\r\n\t\t// reader.readAsBinaryString() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the raw binary data from the file as a string.\r\n\t\t// reader.readAsDataURL() // Starts reading the contents of the specified Blob, once finished, the result attribute contains a data: URL representing the file's data.\r\n\t\t// reader.readAsText() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the contents of the file as a text string. An optional encoding name can be specified.\r\n\t}\r\n\r\n\tonReaderComplete(event) {\r\n\t\tconst content = event.target.result;\r\n\t\tthis.file.content = content;\r\n\t\tthis.control.value = this.file;\r\n\t\t// console.log('ControlFileComponent.onReaderComplete', this.file);\r\n\t\t// image/*,\r\n\t}\r\n\r\n}\r\n\r\nControlFileComponent.meta = {\r\n\tselector: '[control-file]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--file\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label for=\"file\" [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--select\" [innerHTML]=\"file?.name || labels.select_file\"></span>\r\n\t\t\t<svg class=\"icon icon--upload\"><use xlink:href=\"#upload\"></use></svg>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t\t<input name=\"file\" type=\"file\" accept=\".pdf,.doc,.docx,*.txt\" class=\"control--file\" (change)=\"onInputDidChange($event)\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n}\r\n\r\nControlSelectComponent.meta = {\r\n\tselector: '[control-select]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<select class=\"control--select\" [formControl]=\"control\" required>\r\n\t\t\t\t<option value=\"\">{{labels.select}}</option>\r\n\t\t\t\t<option [value]=\"item.id\" *for=\"let item of control.options\" [innerHTML]=\"item.name\"></option>\r\n\t\t\t</select>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t\t<svg class=\"icon icon--caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<textarea class=\"control--text\" [formControl]=\"control\" [innerHTML]=\"label\" rows=\"4\"></textarea>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ErrorsComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = this.labels[`error_${key}`];\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { ENV } from '../environment/environment';\r\n\r\nexport default class TestComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.env = ENV;\r\n\t}\r\n\r\n\tonTest(event) {\r\n\t\tthis.test.next(event);\r\n\t}\r\n\r\n\tonReset(event) {\r\n\t\tthis.reset.next(event);\r\n\t}\r\n\r\n}\r\n\r\nTestComponent.meta = {\r\n\tselector: 'test-component',\r\n\tinputs: ['form'],\r\n\toutputs: ['test', 'reset'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"group--form--results\" *if=\"env.DEVELOPMENT\">\r\n\t\t<code [innerHTML]=\"form.value | json\"></code>\r\n\t\t<button type=\"button\" class=\"btn--link\" (click)=\"onTest($event)\"><span>test</span></button>\r\n\t\t<button type=\"button\" class=\"btn--link\" (click)=\"onReset($event)\"><span>reset</span></button>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n*/\r\n\r\nexport default class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '¡', '¢', '£', '¤', '¥', '¦', '§', '¨', '©', 'ª', '«', '¬', '­', '®', '¯', '°', '±', '²', '³', '´', 'µ', '¶', '·', '¸', '¹', 'º', '»', '¼', '½', '¾', '¿', 'À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', '×', 'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'Þ', 'ß', 'à', 'á', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 'ð', 'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', '÷', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'þ', 'ÿ', '&', '•', '°', '∞', '‰', '⋅', '±', '†', '—', '¬', 'µ', '⊥', '∥', '€', '£', '¥', '¢', '©', '®', '™', 'α', 'β', 'γ', 'δ', 'ε', 'ζ', 'η', 'θ', 'ι', 'κ', 'λ', 'μ', 'ν', 'ξ', 'ο', 'π', 'ρ', 'σ', 'τ', 'υ', 'φ', 'χ', 'ψ', 'ω', 'Α', 'Β', 'Γ', 'Δ', 'Ε', 'Ζ', 'Η', 'Θ', 'Ι', 'Κ', 'Λ', 'Μ', 'Ν', 'Ξ', 'Ο', 'Π', 'Ρ', 'Σ', 'Τ', 'Υ', 'Φ', 'Χ', 'Ψ', 'Ω'];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { fromEvent, of } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\n\r\nconst PATH = STATIC ? './' : '/Client/docs/';\r\n\r\nlet UID = 0;\r\n\r\nexport default class ImageService {\r\n\r\n\tstatic worker() {\r\n\t\tif (!this.worker_) {\r\n\t\t\tthis.worker_ = new Worker(`${PATH}js/workers/image.service.worker.js`);\r\n\t\t}\r\n\t\treturn this.worker_;\r\n\t}\r\n\r\n\tstatic load$(src) {\r\n\t\tif (!('Worker' in window) || this.isBlob(src) || this.isCors(src)) {\r\n\t\t\treturn of(src);\r\n\t\t}\r\n\t\tconst id = ++UID;\r\n\t\tconst worker = this.worker();\r\n\t\tworker.postMessage({ src, id });\r\n\t\treturn fromEvent(worker, 'message').pipe(\r\n\t\t\tfilter(event => event.data.src === src),\r\n\t\t\tmap(event => {\r\n\t\t\t\tconst url = URL.createObjectURL(event.data.blob);\r\n\t\t\t\treturn url;\r\n\t\t\t}),\r\n\t\t\tfirst(),\r\n\t\t\tfinalize(url => {\r\n\t\t\t\tworker.postMessage({ id });\r\n\t\t\t\tif (url) {\r\n\t\t\t\t\tURL.revokeObjectURL(url);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic isCors(src) {\r\n\t\treturn src.indexOf('//') !== -1 && src.indexOf(window.location.host) === -1;\r\n\t}\r\n\r\n\tstatic isBlob(src) {\r\n\t\treturn src.indexOf('blob:') === 0;\r\n\t}\r\n\r\n}\r\n","export default class LazyCache {\r\n\tstatic get cache() {\r\n\t\tif (!this.cache_) {\r\n\t\t\tthis.cache_ = {};\r\n\t\t}\r\n\t\treturn this.cache_;\r\n\t}\r\n\r\n\tstatic get(src) {\r\n\t\treturn this.cache[src];\r\n\t}\r\n\r\n\tstatic set(src, blob) {\r\n\t\tthis.cache[src] = blob;\r\n\t\tconst keys = Object.keys(this.cache);\r\n\t\tif (keys.length > 100) {\r\n\t\t\tthis.remove(keys[0]);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic remove(src) {\r\n\t\tdelete this.cache[src];\r\n\t}\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { of , Subject } from 'rxjs';\r\nimport { distinctUntilChanged, first, switchMap, takeUntil } from 'rxjs/operators';\r\nimport ImageService from '../image/image.service';\r\nimport IntersectionService from '../intersection/intersection.service';\r\nimport LazyCache from './lazy.cache';\r\n\r\nexport default class LazyDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('lazy');\r\n\t\tthis.input$ = new Subject().pipe(\r\n\t\t\tdistinctUntilChanged(),\r\n\t\t\tswitchMap(input => {\r\n\t\t\t\tconst src = LazyCache.get(input);\r\n\t\t\t\tif (src) {\r\n\t\t\t\t\treturn of(src);\r\n\t\t\t\t}\r\n\t\t\t\tnode.classList.remove('lazyed');\r\n\t\t\t\treturn this.lazy$(input);\r\n\t\t\t}),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t);\r\n\t\tthis.input$.subscribe(src => {\r\n\t\t\tLazyCache.set(this.lazy, src);\r\n\t\t\tnode.setAttribute('src', src);\r\n\t\t\tnode.classList.add('lazyed');\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.input$.next(this.lazy);\r\n\t}\r\n\r\n\tlazy$(input) {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn IntersectionService.intersection$(node).pipe(\r\n\t\t\tfirst(),\r\n\t\t\tswitchMap(() => ImageService.load$(input)),\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nLazyDirective.meta = {\r\n\tselector: '[lazy],[[lazy]]',\r\n\tinputs: ['lazy']\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport default class MainMenuComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.sticky = false;\r\n\t}\r\n\r\n\tonToggleSticky(event) {\r\n\t\tthis.sticky = !this.sticky;\r\n\t\tconst body = document.querySelector('body');\r\n\t\tthis.sticky ? body.classList.add('fixed') : body.classList.remove('fixed');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonToggleMenu(event) {\r\n\t\tthis.toggle.next('main');\r\n\t}\r\n\r\n\tonSearch(url, query) {\r\n\t\tconsole.log(query);\r\n\t\twindow.location.href = `${url}?txtSiteSearch=${query}`;\r\n\t}\r\n}\r\n\r\nMainMenuComponent.meta = {\r\n\tselector: '[main-menu]',\r\n\toutputs: ['toggle'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\n\r\nexport default class MediaLibraryComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst items = this.items = window.medias || [];\r\n\t\tconst filters = window.filters || {};\r\n\t\tconst initialParams = window.params || {};\r\n\t\tfilters.departments.mode = FilterMode.OR;\r\n\t\tfilters.languages.mode = FilterMode.OR;\r\n\t\tfilters.categories.mode = FilterMode.OR;\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'languages':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.languages.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'categories':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.category === value;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tconsole.log('MediaLibraryComponent.items', items.length);\r\n\t\t});\r\n\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nMediaLibraryComponent.meta = {\r\n\tselector: '[media-library]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tthis.data = parentInstance.modal.data;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalComponent.meta = {\r\n\tselector: '[modal]'\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { STATIC } from '../environment/environment';\r\n\r\nexport default class NaturalFormService {\r\n\r\n\tstatic get values() {\r\n\t\tconst values = {};\r\n\t\tconst form = this.form;\r\n\t\tconst phrase = this.phrase;\r\n\t\tObject.keys(this.form).forEach(key => {\r\n\t\t\tif (phrase.indexOf(`$${key}$`) !== -1) {\r\n\t\t\t\tvalues[key] = form[key].value;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn values;\r\n\t}\r\n\r\n\tstatic set form(form) {\r\n\t\tthis.form$.next(form);\r\n\t}\r\n\r\n\tstatic get form() {\r\n\t\treturn this.form$.getValue();\r\n\t}\r\n\r\n\tstatic get phrase() {\r\n\t\tconst form = this.form;\r\n\t\t// console.log('NaturalFormService.set phrase form', form);\r\n\t\tlet action = form.action.options.find(x => x.id === form.action.value);\r\n\t\tif (!action) {\r\n\t\t\taction = form.action.options[0];\r\n\t\t}\r\n\t\treturn action.phrase;\r\n\t}\r\n\r\n\tstatic get title() {\r\n\t\tlet phrase = this.phrase;\r\n\t\tconst form = this.form;\r\n\t\tObject.keys(form).forEach(key => {\r\n\t\t\tlet label;\r\n\t\t\tconst filter = this.form[key];\r\n\t\t\tlet value = filter.value;\r\n\t\t\tconst items = filter.options || [];\r\n\t\t\tif (filter.multiple) {\r\n\t\t\t\tvalue = value || [];\r\n\t\t\t\tif (value.length) {\r\n\t\t\t\t\tlabel = value.map(v => {\r\n\t\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t\t}).join(', ');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlabel = items.length ? '...' : filter.label;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\tlabel = item.name;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlabel = items.length ? '...' : filter.label;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tphrase = phrase.replace(`$${key}$`, label);\r\n\t\t});\r\n\t\treturn phrase;\r\n\t}\r\n\r\n\tstatic get clubProfileUrl() {\r\n\t\treturn this.form.club.profileUrl;\r\n\t}\r\n\r\n\tstatic get clubModalUrl() {\r\n\t\treturn STATIC ? '/tiemme-com/club-modal.html' : this.form.club.modalUrl;\r\n\t}\r\n\r\n\tstatic next(form) {\r\n\t\tthis.form = form || this.form; // setter & getter\r\n\t}\r\n\r\n\tstatic getDefaultValue() {\r\n\t\tconst form = window.naturalForm || {};\r\n\t\tObject.keys(form).forEach(key => {\r\n\t\t\tconst filter = form[key];\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'club':\r\n\t\t\t\tcase 'newsletter':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconst firstId = filter.options[0].id;\r\n\t\t\t\t\tfilter.value = filter.multiple ? [firstId] : firstId;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn form;\r\n\t}\r\n\r\n\tstatic get disabled() {\r\n\t\treturn false; // !!! return false until getDefaultValue set initial value\r\n\t\tlet disabled = false;\r\n\t\tconst values = this.values;\r\n\t\tObject.keys(values).forEach(key => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'club':\r\n\t\t\t\tcase 'newsletter':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdisabled = disabled || values[key] == undefined;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn disabled;\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormService.form$ = new BehaviorSubject(NaturalFormService.getDefaultValue()); // !!! static\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\nimport NaturalFormService from './natural-form.service';\r\n\r\nexport default class NaturalFormContactComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst values = NaturalFormService.values;\r\n\t\tthis.title = NaturalFormService.title;\r\n\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tinterests: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\trole: new FormControl(values.role, Validators.RequiredValidator()),\r\n\t\t\tinterests: new FormControl(values.interest, Validators.RequiredValidator()),\r\n\t\t\t//\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tmessage: null,\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: values.newsletter === 2 ? true : false,\r\n\t\t\tscope: window.location.hostname,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.interests.options = data.interests;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('NaturalFormContactComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\tonChanges(changes) {}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('NaturalFormContactComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tinterests: this.controls.interests.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('NaturalFormContactComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('NaturalFormContactComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t//HttpService.post$('/WS/wsUsers.asmx/Contact', { data: this.form.value })\r\n\t\t\tHttpService.post$('/api/users/Contact', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('NaturalFormContactComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Contatti Tiemme'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('NaturalFormContactComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonBack() {\r\n\t\tthis.back.next();\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormContactComponent.meta = {\r\n\tselector: '[natural-form-contact]',\r\n\toutputs: ['back'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport KeyboardService from '../keyboard/keyboard.service';\r\n\r\nexport default class NaturalFormControlComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\t// console.log('NaturalFormControlComponent.onInit');\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\tif (!this.filter.value) {\r\n\t\t\tconst firstId = this.filter.options[0].id;\r\n\t\t\tthis.filter.value = this.filter.multiple ? [firstId] : firstId;\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\tscrollToWord(word) {\r\n\t\tconst items = this.filter.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scroll(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\tsetOption(item) {\r\n\t\t// console.log('setOption', item);\r\n\t\tif (this.filter.multiple) {\r\n\t\t\tthis.filter.value = this.filter.value || [];\r\n\t\t\tconst index = this.filter.value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tif (this.filter.value.length > 1) {\r\n\t\t\t\t\tthis.filter.value.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.filter.value.push(item.id);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.filter.value = item.id;\r\n\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tthis.change.next(this.filter); // !!! for last, it may cause a destroy\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.filter.multiple) {\r\n\t\t\tconst values = this.filter.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.filter.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.filter.value;\r\n\t\tconst items = this.filter.options || [];\r\n\t\t// console.log(value, this.filter);\r\n\t\tif (this.filter.multiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn '...'; // this.labels.select;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn '...'; // this.labels.select;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\tif (dropdown) {\r\n\t\t\tdropdown.style.cssText = '';\r\n\t\t\tconst rect = dropdown.getBoundingClientRect();\r\n\t\t\tif (rect.left + rect.width > window.innerWidth - 15) {\r\n\t\t\t\tdropdown.style.cssText = `transform: translateX(${window.innerWidth - 15 - (rect.left + rect.width)}px);`;\r\n\t\t\t}\r\n\t\t\t// console.log(rect.left + rect.width, window.innerWidth - 15);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nNaturalFormControlComponent.meta = {\r\n\tselector: '[natural-form-control]',\r\n\tinputs: ['filter', 'label'],\r\n\toutputs: ['change'],\r\n\ttemplate: /* html */ `\r\n\t\t<span [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<span class=\"label\" [innerHTML]=\"getLabel()\"></span>\r\n\t\t\t<svg class=\"icon icon--caret-right\"><use xlink:href=\"#caret-right\"></use></svg>\r\n\t\t</span>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: filter.multiple }\">\r\n\t\t\t\t<li *for=\"let item of filter.options\" (click)=\"setOption(item)\"><span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name\"></span></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\nimport NaturalFormService from './natural-form.service';\r\n\r\nexport default class NaturalFormNewsletterComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst values = NaturalFormService.values;\r\n\t\tthis.title = NaturalFormService.title;\r\n\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tinterests: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\trole: new FormControl(values.role, Validators.RequiredValidator()),\r\n\t\t\tinterests: new FormControl(values.interest, Validators.RequiredValidator()),\r\n\t\t\t//\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: new FormControl(true, Validators.RequiredTrueValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.interests.options = data.interests;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('NaturalFormNewsletterComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tinterests: this.controls.interests.options[0].id,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('NaturalFormNewsletterComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('NaturalFormNewsletterComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t//HttpService.post$('/WS/wsUsers.asmx/Newsletter', { data: this.form.value })\r\n\t\t\tHttpService.post$('/api/users/Newsletter', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('NaturalFormNewsletterComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Iscrizione alla Newsletter'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('NaturalFormNewsletterComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonBack() {\r\n\t\tthis.back.next();\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormNewsletterComponent.meta = {\r\n\tselector: '[natural-form-newsletter]',\r\n\toutputs: ['back'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\nimport NaturalFormService from './natural-form.service';\r\n\r\nexport default class NaturalFormRequestInfoComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst values = NaturalFormService.values;\r\n\t\tthis.title = NaturalFormService.title;\r\n\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tinterests: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\trole: new FormControl(values.role, Validators.RequiredValidator()),\r\n\t\t\tinterests: new FormControl(values.interest, Validators.RequiredValidator()),\r\n\t\t\t//\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tmessage: null,\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: values.newsletter === 2 ? true : false,\r\n\t\t\tscope: window.location.hostname,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.interests.options = data.interests;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('NaturalFormRequestInfoComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\tonChanges(changes) {}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('NaturalFormRequestInfoComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tinterests: this.controls.interests.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('NaturalFormRequestInfoComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('NaturalFormRequestInfoComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t//HttpService.post$('/WS/wsUsers.asmx/Contact', { data: this.form.value })\r\n\t\t\tHttpService.post$('/api/users/RequestInfo', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('NaturalFormRequestInfoComponent.onSubmit', response);\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Contatti Tiemme'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('NaturalFormRequestInfoComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonBack() {\r\n\t\tthis.back.next();\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormRequestInfoComponent.meta = {\r\n\tselector: '[natural-form-request-info]',\r\n\toutputs: ['back'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport NaturalFormService from './natural-form.service';\r\n\r\nexport default class NaturalFormSearchComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\t// console.log('NaturalFormSearchComponent.onInit');\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('natural-form-search');\r\n\t\tNaturalFormService.form$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(form => {\r\n\t\t\tthis.naturalForm = form;\r\n\t\t\tthis.phrase = NaturalFormService.phrase;\r\n\t\t});\r\n\t}\r\n\r\n\tset phrase(phrase) {\r\n\t\tif (this.phrase_ !== phrase) {\r\n\t\t\tthis.phrase_ = phrase;\r\n\t\t\tconst { node, module } = getContext(this);\r\n\t\t\tconst contentNode = node.querySelector('.content');\r\n\t\t\tif (this.instances_) {\r\n\t\t\t\tmodule.remove(contentNode);\r\n\t\t\t}\r\n\t\t\tthis.instances_ = [];\r\n\t\t\t// const form = NaturalFormService.form;\r\n\t\t\t// console.log('NaturalFormSearchComponent.initControls', form);\r\n\t\t\tlet html = phrase;\r\n\t\t\tconst keys = Object.keys(this.naturalForm);\r\n\t\t\tkeys.forEach(key => {\r\n\t\t\t\t// console.log(key);\r\n\t\t\t\thtml = html.replace(`$${key}$`, () => {\r\n\t\t\t\t\tconst item = this.naturalForm[key];\r\n\t\t\t\t\tif (item.options) {\r\n\t\t\t\t\t\treturn /* html */ `\r\n\t\t\t\t\t\t\t<span class=\"natural-form__control\" natural-form-control [filter]=\"naturalForm.${key}\" [label]=\"naturalForm.${key}.label\" (change)=\"onNaturalForm($event)\"></span>\r\n\t\t\t\t\t\t`;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn /* html */ `<button type=\"button\" class=\"btn--club-form\" (click)=\"onClub($event)\"><span>Tiemme Club</span></button>`;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t// console.log('MoodboardSearchDirective', html);\r\n\t\t\tcontentNode.innerHTML = html;\r\n\t\t\tArray.from(contentNode.childNodes).forEach(node => {\r\n\t\t\t\tthis.instances_ = this.instances_.concat(module.compile(node, this));\r\n\t\t\t});\r\n\t\t\t/*\r\n\t\t\tconst hasFilter = Object.keys(scope.naturalForm).map(x => scope.naturalForm[x]).find(x => x.value !== null) !== undefined;\r\n\t\t\tif (!hasFilter) {\r\n\t\t\t\tthis.animateUnderlines_(node);\r\n\t\t\t}\r\n\t\t\tscope.animateOff_ = () => {\r\n\t\t\t\tthis.animateOff_(node);\r\n\t\t\t};\r\n\t\t\t*/\r\n\t\t}\r\n\t}\r\n\r\n\tonNaturalForm(event) {\r\n\t\tconst form = NaturalFormService.next();\r\n\t\tthis.change.next(form);\r\n\t}\r\n\r\n\tonClub(event) {\r\n\t\tthis.club.next(event);\r\n\t}\r\n\r\n\tanimateUnderlines_(node) {\r\n\t\tthis.animated = true;\r\n\t\tconst values = [...node.querySelectorAll('.moodboard__underline')];\r\n\t\tvalues.forEach(x => {\r\n\t\t\tgsap.set(x, { transformOrigin: '0 50%', scaleX: 0 });\r\n\t\t});\r\n\t\tlet i = -1;\r\n\t\tconst animate = () => {\r\n\t\t\ti++;\r\n\t\t\ti = i % values.length;\r\n\t\t\tconst u = values[i];\r\n\t\t\tgsap.set(u, { transformOrigin: '0 50%', scaleX: 0 });\r\n\t\t\tgsap.to(u, 0.50, {\r\n\t\t\t\tscaleX: 1,\r\n\t\t\t\ttransformOrigin: '0 50%',\r\n\t\t\t\tdelay: 0,\r\n\t\t\t\tease: Power3.easeInOut,\r\n\t\t\t\toverwrite: 'all',\r\n\t\t\t\tonComplete: () => {\r\n\t\t\t\t\tgsap.set(u, { transformOrigin: '100% 50%', scaleX: 1 });\r\n\t\t\t\t\tgsap.to(u, 0.50, {\r\n\t\t\t\t\t\tscaleX: 0,\r\n\t\t\t\t\t\ttransformOrigin: '100% 50%',\r\n\t\t\t\t\t\tdelay: 1.0,\r\n\t\t\t\t\t\tease: Power3.easeInOut,\r\n\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\tanimate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\tanimate();\r\n\t}\r\n\r\n\tanimateOff_(node) {\r\n\t\tif (this.animated) {\r\n\t\t\tthis.animated = false;\r\n\t\t\t// console.log('animateOff_');\r\n\t\t\t// gsap.killAll();\r\n\t\t\tconst values = [...node.querySelectorAll('.moodboard__underline')];\r\n\t\t\tgsap.set(values, { transformOrigin: '0 50%', scaleX: 0 });\r\n\t\t\tgsap.to(values, 0.50, {\r\n\t\t\t\tscaleX: 1,\r\n\t\t\t\ttransformOrigin: '0 50%',\r\n\t\t\t\tdelay: 0,\r\n\t\t\t\tease: Power3.easeInOut,\r\n\t\t\t\toverwrite: 'all',\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormSearchComponent.meta = {\r\n\tselector: '[natural-form-search]',\r\n\tinputs: ['naturalForm'],\r\n\toutputs: ['change', 'club']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, FormValidator, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\nimport NaturalFormService from './natural-form.service';\r\n\r\nexport default class NaturalFormSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst values = NaturalFormService.values;\r\n\t\tthis.title = NaturalFormService.title;\r\n\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: [],\r\n\t\t}\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\trole: new FormControl(values.role, Validators.RequiredValidator()),\r\n\t\t\t//\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\taddress: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tzipCode: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcity: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\ttelephone: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tfax: null,\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t/*\r\n\t\t\t// password autogenerata\r\n\t\t\tusername: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), this.MatchValidator('password')]),\r\n\t\t\t*/\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: values.newsletter === 2 ? true : false,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('NaturalFormSignupComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('NaturalFormSignupComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\taddress: 'Strada della Campanara',\r\n\t\t\tzipCode: '15',\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\ttelephone: '00390721411112',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t/*\r\n\t\t\tusername: 'username',\r\n\t\t\tpassword: 'password',\r\n\t\t\tpasswordConfirm: 'password',\r\n\t\t\t*/\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tMatchValidator(fieldName) {\r\n\t\treturn new FormValidator((value) => {\r\n\t\t\tconst field = this.form ? this.form.get(fieldName) : null;\r\n\t\t\tif (!value || !field) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('NaturalFormSignupComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('NaturalFormSignupComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Register', this.form.value)\r\n\t\t\tUserService.register$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('NaturalFormSignupComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Registrazione Tiemme Club'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\tthis.signUp.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('NaturalFormSignupComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonBack() {\r\n\t\tthis.back.next();\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormSignupComponent.meta = {\r\n\tselector: '[natural-form-signup]',\r\n\toutputs: ['signUp', 'back'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\nimport NaturalFormService from './natural-form.service';\r\n\r\nexport default class NaturalFormComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.views = {\r\n\t\t\tNATURAL: 0,\r\n\t\t\tTECHNICAL: 1,\r\n\t\t\tCOMMERCIAL: 2,\r\n\t\t\tNEWSLETTER: 3,\r\n\t\t\tCLUB: 4,\r\n\t\t};\r\n\t\tthis.view = this.views.NATURAL;\r\n\t\tUserService.user$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tNaturalFormService.form$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(form => {\r\n\t\t\t// console.log(NaturalFormService.values);\r\n\t\t\tthis.values = NaturalFormService.values;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\t// console.log('NaturalFormComponent.onInit', this.naturalForm);\r\n\t}\r\n\r\n\tonClub(event) {\r\n\t\tif (this.user) {\r\n\t\t\twindow.location.href = NaturalFormService.clubProfileUrl;\r\n\t\t} else {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tconst src = STATIC ? '/tiemme-com/club-modal.html' : NaturalFormService.clubModalUrl;\r\n\t\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('RegisterOrLoginComponent.onRegister', event);\r\n\t\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\t\tthis.user = event.data;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonNext(event) {\r\n\t\tthis.view = NaturalFormService.values.action;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonBack(event) {\r\n\t\tthis.view = this.views.NATURAL;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tget disabled() {\r\n\t\treturn NaturalFormService.disabled;\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormComponent.meta = {\r\n\tselector: '[natural-form]',\r\n\toutputs: ['club']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\n\r\nexport default class PriceListComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst items = window.pricelists || [];\r\n\t\tconst filters = window.filters || {};\r\n\t\tconst initialParams = window.params || {};\r\n\t\tfilters.departments.mode = FilterMode.OR;\r\n\t\tfilters.categories.mode = FilterMode.OR;\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'categories':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.category === value;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t\t// console.log('PriceListComponent.items', items.length);\r\n\t\t});\r\n\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nPriceListComponent.meta = {\r\n\tselector: '[price-list]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/tiemme-com/club-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class RegisterOrLoginComponent extends Component {\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('RegisterOrLoginComponent.onRegister');\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 2 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('RegisterOrLoginComponent.onRegister', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('RegisterOrLoginComponent.onLogin');\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('RegisterOrLoginComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nRegisterOrLoginComponent.meta = {\r\n\tselector: '[register-or-login]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\n/*\r\nMail\r\nLa mail di recap presenterà i dati inseriti dall’utente e come oggetto “Richiesta Informazioni commerciali”\r\n\r\nGenerazione Mail\r\n•\tRomania > tiemmesystems@tiemme.com\r\n•\tSpagna > tiemmesistemas@tiemme.com\r\n•\tGrecia > customerservice.gr@tiemme.com\r\n•\tAlbania, Kosovo, Serbia, Montenegro, Bulgaria > infobalkans@tiemme.com\r\n•\tTutti gli altri > info@tiemme.com\r\n*/\r\n\r\nexport default class RequestInfoCommercialComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tinterests: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\trole: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tinterests: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tmessage: null,\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: null,\r\n\t\t\tscope: window.location.hostname,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.interests.options = data.interests;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('RequestInfoCommercialComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('RequestInfoCommercialComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tinterests: this.controls.interests.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit(from) {\r\n\t\t// console.log('RequestInfoCommercialComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('RequestInfoCommercialComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/WS/wsUsers.asmx/Contact', { data: this.form.value })\r\n\t\t\tHttpService.post$('/api/users/Contact', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('RequestInfoCommercialComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': (null == from ? 'Contatti Tiemme' : from)\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('RequestInfoCommercialComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nRequestInfoCommercialComponent.meta = {\r\n\tselector: '[request-info-commercial]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { of } from 'rxjs';\r\nimport { catchError, takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ReservedAreaComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tUserService.me$().pipe(\r\n\t\t\tcatchError(() => of (null)),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t});\r\n\t}\r\n\r\n\tdoLogout(event) {\r\n\t\tUserService.logout$().subscribe(() => {\r\n\t\t\tthis.user = null;\r\n\t\t\twindow.location.href = '/';\r\n\t\t});\r\n\t}\r\n\r\n\tonProfileUpdate(event) {\r\n\r\n\t}\r\n\r\n\tonPasswordUpdate(event) {\r\n\r\n\t}\r\n\r\n}\r\n\r\nReservedAreaComponent.meta = {\r\n\tselector: '[reserved-area]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(scrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst result = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof result === 'string') {\r\n\t\t\t\t\tconst target = document.querySelector(result);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst from = this.currentTop();\r\n\t\t\t\t\t\tconst to = from + target.getBoundingClientRect().top - 50;\r\n\t\t\t\t\t\tconst o = { pow: 0 };\r\n\t\t\t\t\t\tconst html = document.querySelector('html');\r\n\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgsap.to(o, Math.abs((to - from)) / 2000, {\r\n\t\t\t\t\t\t\tpow: 1,\r\n\t\t\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\t\twindow.scrollTo(0, from + (to - from) * o.pow);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tcurrentTop() {\r\n\t\t// Firefox, Chrome, Opera, Safari\r\n\t\tif (self.pageYOffset) return self.pageYOffset;\r\n\t\t// Internet Explorer 6 - standards mode\r\n\t\tif (document.documentElement && document.documentElement.scrollTop)\r\n\t\t\treturn document.documentElement.scrollTop;\r\n\t\t// Internet Explorer 6, 7 and 8\r\n\t\tif (document.body.scrollTop) return document.body.scrollTop;\r\n\t\treturn 0;\r\n\t}\r\n\r\n}\r\n\r\nScrollToDirective.meta = {\r\n\tselector: `[(scrollTo)]`\r\n};\r\n","export default class DownloadService {\r\n\r\n\tstatic get a() {\r\n\t\tlet a = this.a_;\r\n\t\tif (!a) {\r\n\t\t\ta = document.createElement(\"a\");\r\n\t\t\ta.style = \"display: none\";\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\tthis.a_ = a;\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tstatic download(blob, fileName = 'download.txt') {\r\n\t\t// var json = JSON.stringify(data),\r\n\t\t// blob = new Blob([json], {type: \"octet/stream\"}),\r\n\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\tconst a = this.a;\r\n\t\ta.href = url;\r\n\t\ta.download = fileName;\r\n\t\ta.click();\r\n\t\twindow.URL.revokeObjectURL(url);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport DownloadService from '../download/download.service';\r\nimport { STATIC } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/tiemme-com/club-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class SecureDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.href = node.getAttribute('href');\r\n\t\tfromEvent(node, 'click').pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.tryDownloadHref();\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.href = node.getAttribute('href');\r\n\t}\r\n\r\n\ttryDownloadHref() {\r\n\t\tthis.onChanges();\r\n\r\n\t\tHttpService.get$(this.href, undefined, 'blob').pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(blob => {\r\n\t\t\tDownloadService.download(blob, this.href.split('/').pop());\r\n\t\t}, error => {\r\n\t\t\tconsole.log(error);\r\n\t\t\tthis.onLogin(event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('SecureDirective.onLogin');\r\n\t\t// event.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\tthis.tryDownloadHref();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\t/*\r\n\tonRegister(event) {\r\n\t\t// console.log('SecureDirective.onRegister');\r\n\t\t// event.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 2 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onRegister', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\t*/\r\n\r\n}\r\n\r\nSecureDirective.meta = {\r\n\tselector: '[secure]',\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\nexport default class FileSizePipe extends Pipe {\r\n\r\n\tstatic transform(value, si = true) {\r\n\t\tvalue = parseInt(value);\r\n\t\tconst unit = si ? 1000 : 1024;\r\n\t\tif (Math.abs(value) < unit) {\r\n\t\t\treturn value + ' B';\r\n\t\t}\r\n\t\tconst units = si ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'] : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n\t\tlet u = -1;\r\n\t\tdo {\r\n\t\t\tvalue /= unit;\r\n\t\t\t++u;\r\n\t\t} while (Math.abs(value) >= unit && u < units.length - 1);\r\n\t\treturn `${value.toFixed(1)} ${units[u]}`;\r\n\t}\r\n\r\n}\r\n\r\nFileSizePipe.meta = {\r\n\tname: 'fileSize',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport default class SwiperDirective extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.swiperInitOrUpdate_();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_() {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tgsap.set(node, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\ton.slideChange = () => {\r\n\t\t\t\tconst swiper = this.swiper;\r\n\t\t\t\tthis.index = swiper.activeIndex;\r\n\t\t\t\tthis.events$.next(this.index);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t};\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(node, 0.4, {\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(node, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(node, this.options);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\tnode.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\topenMore(event) {\r\n\t\tthis.more.next(event);\r\n\t}\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer'],\r\n\toutputs: ['more']\r\n};\r\n","import SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperListingDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tspeed: 600,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperListingDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperListingDirective.meta = {\r\n\tselector: '[swiper-listing]'\r\n};\r\n","import SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperSlidesDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 3,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t    delay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tonSlideClick: function(swiper) {\r\n\t\t\t\t// angular.element(swiper.clickedSlide).scope().clicked(angular.element(swiper.clickedSlide).scope().$index);\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: '.swiper-button-next',\r\n\t\t\t\tprevEl: '.swiper-button-prev',\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n}\r\n\r\nSwiperSlidesDirective.meta = {\r\n\tselector: '[swiper-slides]'\r\n};\r\n","import SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperTechnicianDirective extends SwiperDirective {\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 1,\r\n\t\t\tspaceBetween: 80,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t\tdisableOnInteraction: true,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperTechnicianDirective.onInit');\r\n\t}\r\n}\r\n\r\nSwiperTechnicianDirective.meta = {\r\n\tselector: '[swiper-technician]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\n\r\nexport default class TechnicianLibraryComponent extends Component {\r\n\tonInit() {\r\n\t\tconst items = this.items = window.technicians || [];\r\n\t\tconst filters = window.filters || {};\r\n\t\tconst initialParams = window.params || {};\r\n\t\tfilters.departments.mode = FilterMode.OR;\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'departments':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\tconsole.log(item, value);\r\n\t\t\t\t\t\treturn item.department.id === value;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tconsole.log('TechnicianLibraryComponent.items', items.length);\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t}\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n}\r\n\r\nTechnicianLibraryComponent.meta = {\r\n\tselector: '[technician-library]',\r\n};\r\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport default class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport GtmService from '../gtm/gtm.service';\r\nimport SwiperDirective from '../swiper/swiper.directive';\r\n\r\nexport default class VideoComponent extends Component {\r\n\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.item = {};\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tnode.classList.add('video');\r\n\t\tthis.video = node.querySelector('video');\r\n\t\tthis.progress = node.querySelector('.icon--play-progress path');\r\n\t\tif (parentInstance instanceof SwiperDirective) {\r\n\t\t\tparentInstance.events$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => this.pause());\r\n\t\t}\r\n\t\tthis.addListeners();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\t\tthis.onPause = this.onPause.bind(this);\r\n\t\t\tthis.onEnded = this.onEnded.bind(this);\r\n\t\t\tthis.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n\t\t\tvideo.addEventListener('play', this.onPlay);\r\n\t\t\tvideo.addEventListener('pause', this.onPause);\r\n\t\t\tvideo.addEventListener('ended', this.onEnded);\r\n\t\t\tvideo.addEventListener('timeupdate', this.onTimeUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tvideo.removeEventListener('play', this.onPlay);\r\n\t\t\tvideo.removeEventListener('pause', this.onPause);\r\n\t\t\tvideo.removeEventListener('ended', this.onEnded);\r\n\t\t\tvideo.removeEventListener('timeupdate', this.onTimeUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\ttogglePlay() {\r\n\t\t// console.log('VideoComponent.togglePlay')\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tif (video.paused) {\r\n\t\t\t\tthis.play();\r\n\t\t\t} else {\r\n\t\t\t\tthis.pause();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\tconst video = this.video;\r\n\t\tvideo.muted = false;\r\n\t\tvideo.play();\r\n\t}\r\n\r\n\tpause() {\r\n\t\tconst video = this.video;\r\n\t\tvideo.muted = true;\r\n\t\tvideo.pause();\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tthis.playing = true;\r\n\t\tGtmService.push({\r\n\t\t\tevent: 'video play',\r\n\t\t\tvideo_name: this.video.src\r\n\t\t});\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tthis.playing = false;\r\n\t}\r\n\r\n\tonEnded() {\r\n\t\tthis.playing = false;\r\n\t}\r\n\r\n\tonTimeUpdate() {\r\n\t\tthis.progress.style.strokeDashoffset = this.video.currentTime / this.video.duration;\r\n\t}\r\n\r\n}\r\n\r\nVideoComponent.meta = {\r\n\tselector: '[video]',\r\n\tinputs: ['item'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class WorkWithUsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\tdepartments: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\ttelephone: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\texperience: null,\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\tdepartment: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tintroduction: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tcurricula: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.department.options = data.departments;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('WorkWithUsComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\ttelephone: '00390721411112',\r\n\t\t\texperience: false,\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\tdepartment: this.controls.department.options[0].id,\r\n\t\t\tintroduction: 'Hi!',\r\n\t\t\tprivacy: true,\r\n\t\t\tcurricula: {},\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('WorkWithUsComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('WorkWithUsComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/users/WorkWithUs', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('WorkWithUsComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Lavora con Noi'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('WorkWithUsComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nWorkWithUsComponent.meta = {\r\n\tselector: '[work-with-us]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { BehaviorSubject, interval, Subject } from 'rxjs';\r\nimport { distinctUntilChanged, filter, map, switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport SwiperDirective from '../swiper/swiper.directive';\r\n\r\nexport default class YoutubeComponent extends Component {\r\n\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tget cover() {\r\n\t\treturn this.youtubeId ? `//i.ytimg.com/vi/${this.youtubeId}/maxresdefault.jpg` : '';\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.item = {};\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tnode.classList.add('youtube');\r\n\t\tif (YoutubeComponent.MOBILE) {\r\n\t\t\tnode.classList.add('mobile');\r\n\t\t}\r\n\t\tthis.progress = node.querySelector('.icon--play-progress path');\r\n\t\tthis.onPlayerReady = this.onPlayerReady.bind(this);\r\n\t\tthis.onPlayerStateChange = this.onPlayerStateChange.bind(this);\r\n\t\tthis.onPlayerError = this.onPlayerError.bind(this);\r\n\t\tthis.id$ = new Subject().pipe(distinctUntilChanged());\r\n\t\tif (parentInstance instanceof SwiperDirective) {\r\n\t\t\tparentInstance.events$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => this.pause());\r\n\t\t}\r\n\t\t// this.addListeners();\r\n\t}\r\n\r\n\tonChanges(changes) {\r\n\t\tconst id = this.youtubeId;\r\n\t\t// console.log('YoutubeComponent.onChanges', id);\r\n\t\tthis.id$.next(id);\r\n\t}\r\n\r\n\tinitPlayer() {\r\n\t\t// console.log('VideoComponent.initPlayer');\r\n\t\tthis.player$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(player => {\r\n\t\t\tconsole.log('YoutubeComponent.player$', player);\r\n\t\t});\r\n\t\tthis.interval$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t\tthis.id$.next(this.youtubeId);\r\n\t}\r\n\r\n\tplayer$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst video = node.querySelector('.video');\r\n\t\treturn this.id$.pipe(\r\n\t\t\tswitchMap(id => {\r\n\t\t\t\t// console.log('YoutubeComponent.videoId', id);\r\n\t\t\t\treturn YoutubeComponent.once$().pipe(\r\n\t\t\t\t\tmap(youtube => {\r\n\t\t\t\t\t\t// console.log('YoutubeComponent.once$', youtube);\r\n\t\t\t\t\t\tthis.destroyPlayer();\r\n\t\t\t\t\t\tthis.player = new youtube.Player(video, {\r\n\t\t\t\t\t\t\twidth: node.offsetWidth,\r\n\t\t\t\t\t\t\theight: node.offsetHeight,\r\n\t\t\t\t\t\t\tvideoId: id,\r\n\t\t\t\t\t\t\tplayerVars: {\r\n\t\t\t\t\t\t\t\tautoplay: 1,\r\n\t\t\t\t\t\t\t\tcontrols: 1, // YoutubeComponent.MOBILE ? 1 : 0,\r\n\t\t\t\t\t\t\t\tdisablekb: 1,\r\n\t\t\t\t\t\t\t\tenablejsapi: 1,\r\n\t\t\t\t\t\t\t\tfs: 0,\r\n\t\t\t\t\t\t\t\tloop: 1,\r\n\t\t\t\t\t\t\t\tmodestbranding: 1,\r\n\t\t\t\t\t\t\t\tplaysinline: 1,\r\n\t\t\t\t\t\t\t\trel: 0,\r\n\t\t\t\t\t\t\t\tshowinfo: 0,\r\n\t\t\t\t\t\t\t\tiv_load_policy: 3,\r\n\t\t\t\t\t\t\t\tlistType: 'user_uploads',\r\n\t\t\t\t\t\t\t\t// origin: 'https://log6i.csb.app/'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tevents: {\r\n\t\t\t\t\t\t\t\tonReady: this.onPlayerReady,\r\n\t\t\t\t\t\t\t\tonStateChange: this.onPlayerStateChange,\r\n\t\t\t\t\t\t\t\tonPlayerError: this.onPlayerError\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn this.player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonPlayerReady(event) {\r\n\t\t// console.log('YoutubeComponent.onPlayerReady', event);\r\n\t\tevent.target.mute();\r\n\t\tevent.target.playVideo();\r\n\t}\r\n\r\n\tonPlayerStateChange(event) {\r\n\t\t// console.log('YoutubeComponent.onPlayerStateChange', event.data);\r\n\t\tif (event.data === 1) {\r\n\t\t\tthis.playing = true;\r\n\t\t} else {\r\n\t\t\tthis.playing = false;\r\n\t\t}\r\n\t}\r\n\r\n\tonPlayerError(event) {\r\n\t\tconsole.log('YoutubeComponent.onPlayerError', event);\r\n\t}\r\n\r\n\tdestroyPlayer() {\r\n\t\tif (this.player) {\r\n\t\t\tthis.player.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.destroyPlayer();\r\n\t}\r\n\r\n\tinterval$() {\r\n\t\treturn interval(500).pipe(\r\n\t\t\tfilter(() => this.playing && this.player),\r\n\t\t\ttap(() => {\r\n\t\t\t\tthis.progress.style.strokeDashoffset =\r\n\t\t\t\t\tthis.player.getCurrentTime() / this.player.getDuration();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttogglePlay() {\r\n\t\t// console.log('VideoComponent.togglePlay');\r\n\t\tif (this.playing) {\r\n\t\t\tthis.pause();\r\n\t\t} else {\r\n\t\t\tthis.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\t// console.log('VideoComponent.play');\r\n\t\tif (!this.player) {\r\n\t\t\tthis.initPlayer();\r\n\t\t} else {\r\n\t\t\tthis.player.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause() {\r\n\t\tif (!this.player) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.player.stopVideo();\r\n\t}\r\n\r\n\tstatic once$() {\r\n\t\tif (this.youtube$) {\r\n\t\t\treturn this.youtube$;\r\n\t\t} else {\r\n\t\t\tthis.youtube$ = new BehaviorSubject(null).pipe(\r\n\t\t\t\tfilter(youtube => youtube !== null)\r\n\t\t\t);\r\n\t\t\twindow.onYouTubeIframeAPIReady = this.onYouTubeIframeAPIReady_.bind(this);\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tconst scripts = document.querySelectorAll('script');\r\n\t\t\tconst last = scripts[scripts.length - 1];\r\n\t\t\tlast.parentNode.insertBefore(script, last);\r\n\t\t\tscript.src = '//www.youtube.com/iframe_api';\r\n\t\t\treturn this.youtube$;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic onYouTubeIframeAPIReady_() {\r\n\t\t// console.log('onYouTubeIframeAPIReady');\r\n\t\tthis.youtube$.next(window.YT);\r\n\t}\r\n\r\n\tstatic mobilecheck() {\r\n\t\tlet check = false;\r\n\t\t(function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n\t\treturn check;\r\n\t}\r\n\r\n\tstatic mobileAndTabletcheck() {\r\n\t\tlet check = false;\r\n\t\t(function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n\t\treturn check;\r\n\t}\r\n\r\n}\r\n\r\nYoutubeComponent.MOBILE = YoutubeComponent.mobileAndTabletcheck();\r\n\r\nYoutubeComponent.meta = {\r\n\tselector: '[youtube]',\r\n\tinputs: ['youtubeId', 'title']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { map, takeUntil } from 'rxjs/operators';\r\n\r\nexport default class ZoomableDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('zoomable');\r\n\t\tconst target = node.getAttribute('zoomable') !== '' ? node.querySelectorAll(node.getAttribute('zoomable')) : node;\r\n\t\tfromEvent(target, 'click').pipe(\r\n\t\t\tmap($event => this.zoom = !this.zoom),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(zoom => console.log('ZoomableDirective', zoom));\r\n\t}\r\n\r\n\tget zoom() {\r\n\t\treturn this.zoom_;\r\n\t}\r\n\r\n\tset zoom(zoom) {\r\n\t\tif (this.zoom_ !== zoom) {\r\n\t\t\tthis.zoom_ = zoom;\r\n\t\t\tif (zoom) {\r\n\t\t\t\tthis.zoomIn();\r\n\t\t\t} else {\r\n\t\t\t\tthis.zoomOut();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tzoomIn() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.rect = node.getBoundingClientRect();\r\n\t\tthis.parentNode = node.parentNode;\r\n\t\tdocument.querySelector('body').appendChild(node);\r\n\t\tgsap.set(node, {\r\n\t\t\tleft: this.rect.left,\r\n\t\t\ttop: this.rect.top,\r\n\t\t\twidth: this.rect.width,\r\n\t\t\theight: this.rect.height,\r\n\t\t\tposition: 'fixed'\r\n\t\t});\r\n\t\tnode.classList.add('zoom');\r\n\t\tgsap.set(node, { position: 'fixed' });\r\n\t\tconst to = {\r\n\t\t\tleft: 0,\r\n\t\t\ttop: 0,\r\n\t\t\twidth: window.innerWidth,\r\n\t\t\theight: window.innerHeight,\r\n\t\t};\r\n\t\tgsap.to(node, {\r\n\t\t\t...to,\r\n\t\t\tduration: 0.7,\r\n\t\t\tease: Power3.easeInOut,\r\n\t\t\tonComplete: () => {\r\n\t\t\t\tnode.classList.add('zoomed');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tzoomOut() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('zoomed');\r\n\t\tconst to = {\r\n\t\t\tleft: this.rect.left,\r\n\t\t\ttop: this.rect.top,\r\n\t\t\twidth: this.rect.width,\r\n\t\t\theight: this.rect.height\r\n\t\t};\r\n\t\tgsap.to(node, {\r\n\t\t\t...to,\r\n\t\t\tduration: 0.7,\r\n\t\t\tease: Power3.easeInOut,\r\n\t\t\tonComplete: () => {\r\n\t\t\t\tthis.parentNode.appendChild(node);\r\n\t\t\t\tgsap.set(node, { clearProps: 'all' });\r\n\t\t\t\tnode.classList.remove('zoom');\r\n\t\t\t\tthis.parentNode = null;\r\n\t\t\t\tthis.rect = null;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nZoomableDirective.meta = {\r\n\tselector: '[zoomable]'\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport AccordionItemDirective from './accordion/accordion-item.directive';\r\nimport AccordionDirective from './accordion/accordion.directive';\r\nimport AgentsComponent from './agents/agents.component';\r\nimport AppComponent from './app.component';\r\nimport AppearDirective from './appear/appear.directive';\r\nimport BimLibrary01Component from './bim-library/bim-library-01.component';\r\nimport BimLibrary02Component from './bim-library/bim-library-02.component';\r\nimport BimLibraryComponent from './bim-library/bim-library.component';\r\nimport ClickOutsideDirective from './click-outside/click-outside.directive';\r\nimport ClubForgotComponent from './club/club-forgot.component';\r\nimport ClubModalComponent from './club/club-modal.component';\r\nimport ClubPasswordEditComponent from './club/club-password-edit.component';\r\nimport ClubPasswordRecoveryComponent from './club/club-password-recovery.component';\r\nimport ClubProfileComponent from './club/club-profile.component';\r\nimport ClubSigninComponent from './club/club-signin.component';\r\nimport ClubSignupComponent from './club/club-signup.component';\r\nimport ClubComponent from './club/club.component';\r\nimport DownloadsComponent from './download/downloads.component';\r\nimport DropdownItemDirective from './dropdown/dropdown-item.directive';\r\nimport DropdownDirective from './dropdown/dropdown.directive';\r\nimport FilterMenuItemComponent from './filter/filter-menu-item.component';\r\nimport ControlCheckboxComponent from './forms/control-checkbox.component';\r\nimport ControlCustomSelectComponent from './forms/control-custom-select.component';\r\nimport ControlEmailComponent from './forms/control-email.component';\r\nimport ControlFileComponent from './forms/control-file.component';\r\nimport ControlPasswordComponent from './forms/control-password.component';\r\nimport ControlSelectComponent from './forms/control-select.component';\r\nimport ControlTextComponent from './forms/control-text.component';\r\nimport ControlTextareaComponent from './forms/control-textarea.component';\r\nimport ErrorsComponent from './forms/errors.component';\r\nimport TestComponent from './forms/test.component';\r\n// import ValueDirective from './forms/value.directive';\r\nimport HeaderComponent from './header/header.component';\r\nimport HtmlPipe from './html/html.pipe';\r\nimport LazyDirective from './lazy/lazy.directive';\r\nimport MainMenuComponent from './main-menu/main-menu.component';\r\nimport MediaLibraryComponent from './media-library/media-library';\r\nimport ModalOutletComponent from './modal/modal-outlet.component';\r\nimport ModalComponent from './modal/modal.component';\r\nimport NaturalFormContactComponent from './natural-form/natural-form-contact.component';\r\nimport NaturalFormControlComponent from './natural-form/natural-form-control.component';\r\nimport NaturalFormNewsletterComponent from './natural-form/natural-form-newsletter.component';\r\nimport NaturalFormRequestInfoComponent from './natural-form/natural-form-request-info.component';\r\nimport NaturalFormSearchComponent from './natural-form/natural-form-search.component';\r\nimport NaturalFormSignupComponent from './natural-form/natural-form-signup.component';\r\nimport NaturalFormComponent from './natural-form/natural-form.component';\r\nimport PriceListComponent from './price-list/price-list';\r\nimport RegisterOrLoginComponent from './register-or-login/register-or-login.component';\r\nimport RequestInfoCommercialComponent from './request-info-commercial/request-info-commercial.component';\r\nimport ReservedAreaComponent from './reserved-area/reserved-area.component';\r\nimport ScrollToDirective from './scroll-to/scroll-to.directive';\r\nimport SecureDirective from './secure/secure.directive';\r\nimport FileSizePipe from './size/size.pipe';\r\nimport SwiperListingDirective from './swiper/swiper-listing.directive';\r\nimport SwiperSlidesDirective from './swiper/swiper-slides.directive';\r\nimport SwiperTechnicianDirective from './swiper/swiper-technician.directive';\r\nimport SwiperDirective from './swiper/swiper.directive';\r\nimport TechnicianLibraryComponent from './technician-library/technician-library';\r\nimport VideoComponent from './video/video.component';\r\nimport WorkWithUsComponent from './work-with-us/work-with-us.component';\r\nimport YoutubeComponent from './youtube/youtube.component';\r\nimport ZoomableDirective from './zoomable/zoomable.directive';\r\n\r\nexport default class AppModule extends Module { }\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAccordionDirective,\r\n\t\tAccordionItemDirective,\r\n\t\tAgentsComponent,\r\n\t\tAppearDirective,\r\n\t\tBimLibraryComponent,\r\n\t\tBimLibrary01Component,\r\n\t\tBimLibrary02Component,\r\n\t\tClickOutsideDirective,\r\n\t\tClubComponent,\r\n\t\tClubForgotComponent,\r\n\t\tClubModalComponent,\r\n\t\tClubPasswordRecoveryComponent,\r\n\t\tClubPasswordEditComponent,\r\n\t\tClubProfileComponent,\r\n\t\tClubSigninComponent,\r\n\t\tClubSignupComponent,\r\n\t\tControlCheckboxComponent,\r\n\t\tControlCustomSelectComponent,\r\n\t\tControlEmailComponent,\r\n\t\tControlFileComponent,\r\n\t\tControlPasswordComponent,\r\n\t\tControlSelectComponent,\r\n\t\tControlTextComponent,\r\n\t\tControlTextareaComponent,\r\n\t\tDownloadsComponent,\r\n\t\tDropdownDirective,\r\n\t\tDropdownItemDirective,\r\n\t\tErrorsComponent,\r\n\t\tFilterMenuItemComponent,\r\n\t\tFileSizePipe,\r\n\t\tHtmlPipe,\r\n\t\tHeaderComponent,\r\n\t\tLazyDirective,\r\n\t\tMainMenuComponent,\r\n\t\tMediaLibraryComponent,\r\n\t\tModalOutletComponent,\r\n\t\tModalComponent,\r\n\t\tPriceListComponent,\r\n\t\tNaturalFormComponent,\r\n\t\tNaturalFormSearchComponent,\r\n\t\tNaturalFormContactComponent,\r\n\t\tNaturalFormRequestInfoComponent,\r\n\t\tNaturalFormControlComponent,\r\n\t\tNaturalFormNewsletterComponent,\r\n\t\tNaturalFormSignupComponent,\r\n\t\tRequestInfoCommercialComponent,\r\n\t\tRegisterOrLoginComponent,\r\n\t\tReservedAreaComponent,\r\n\t\tSecureDirective,\r\n\t\tScrollToDirective,\r\n\t\tSwiperDirective,\r\n\t\tSwiperListingDirective,\r\n\t\tSwiperSlidesDirective,\r\n\t\tSwiperTechnicianDirective,\r\n\t\tTechnicianLibraryComponent,\r\n\t\tTestComponent,\r\n\t\t// ValueDirective,\r\n\t\tVideoComponent,\r\n\t\tWorkWithUsComponent,\r\n\t\tYoutubeComponent,\r\n\t\tZoomableDirective,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}