{"version":3,"sources":["src/js/main.js","../../src/js/filter/filter-item.js","../../src/js/location/location.service.js","../../src/js/filter/filter.service.js","../../src/js/agents/agents.component.js","../../src/js/environment/environment.js","../../src/js/modal/modal.service.js","../../src/js/http/http.service.js","../../src/js/local-storage/local-storage.service.js","../../src/js/user/user.service.js","../../src/js/app.component.js","../../src/js/intersection/intersection.service.js","../../src/js/appear/appear.directive.js","../../src/js/bim-library/bim-library-01.component.js","../../src/js/dropdown/dropdown.directive.js","../../src/js/bim-library/bim-library-02.component.js","../../src/js/filter/filter-menu-item.js","../../src/js/filter/filter-menu.service.js","../../src/js/bim-library/bim-library.component.js","../../src/js/click-outside/click-outside.directive.js","../../src/js/club/club-forgot.component.js","../../src/js/modal/modal-outlet.component.js","../../src/js/club/club.component.js","../../src/js/club/club-modal.component.js","../../src/js/club/club-password-edit.component.js","../../src/js/club/club-password-recovery.component.js","../../src/js/club/club-profile.component.js","../../src/js/club/club-signin.component.js","../../src/js/club/club-signup.component.js","../../src/js/download/downloads.component.js","../../src/js/dropdown/dropdown-item.directive.js","../../src/js/filter/filter-menu-item.component.js","../../src/js/forms/control.component.js","../../src/js/forms/control-checkbox.component.js","../../src/js/keyboard/keyboard.service.js","../../src/js/forms/control-custom-select.component.js","../../src/js/forms/control-email.component.js","../../src/js/forms/control-file.component.js","../../src/js/forms/control-password.component.js","../../src/js/forms/control-select.component.js","../../src/js/forms/control-text.component.js","../../src/js/forms/control-textarea.component.js","../../src/js/forms/errors.component.js","../../src/js/forms/test.component.js","../../src/js/css/css.service.js","../../src/js/header/header.component.js","../../src/js/html/html.pipe.js","../../src/js/image/image.service.js","../../src/js/lazy/lazy.cache.js","../../src/js/lazy/lazy.directive.js","../../src/js/main-menu/main-menu.component.js","../../src/js/media-library/media-library.js","../../src/js/modal/modal.component.js","../../src/js/natural-form/natural-form.service.js","../../src/js/natural-form/natural-form-contact.component.js","../../src/js/natural-form/natural-form-control.component.js","../../src/js/natural-form/natural-form-newsletter.component.js","../../src/js/natural-form/natural-form-request-info.component.js","../../src/js/natural-form/natural-form-search.component.js","../../src/js/natural-form/natural-form-signup.component.js","../../src/js/natural-form/natural-form.component.js","../../src/js/price-list/price-list.js","../../src/js/register-or-login/register-or-login.component.js","../../src/js/request-info-commercial/request-info-commercial.component.js","../../src/js/reserved-area/reserved-area.component.js","../../src/js/scroll-to/scroll-to.directive.js","../../src/js/download/download.service.js","../../src/js/secure/secure.directive.js","../../src/js/size/size.pipe.js","../../src/js/swiper/swiper.directive.js","../../src/js/swiper/swiper-listing.directive.js","../../src/js/swiper/swiper-slides.directive.js","../../src/js/gtm/gtm.service.js","../../src/js/video/video.component.js","../../src/js/work-with-us/work-with-us.component.js","../../src/js/youtube/youtube.component.js","../../src/js/zoomable/zoomable.directive.js","../../src/js/app.module.js","../../src/js/main.js"],"names":["global","factory","exports","module","require","define","amd","self","rxcomp","form","rxjs","operators","this","rxcompForm","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_defineProperty","obj","value","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_inheritsLoose","subClass","superClass","create","constructor","__proto__","FilterMode","FilterItem","change$","BehaviorSubject","mode","placeholder","values","options","unshift","label","assign","_proto","item","match","_this","getSelectedOption","_this2","find","x","has","getLabel","selectedOption","indexOf","set","undefined","next","remove","index","splice","first","toggle","toggleActive","active","LocationService","get","URLSearchParams","window","location","search","keyOrValue","params","replace","history","pushState","title","document","url","href","split","toString","deserialize","encoded","decode","serialize","encode","decoded","json","atob","JSON","parse","stringify","btoa","FilterService","initialParams","callback","filters","getParamsCount","reduce","p","c","locationParams","any","items$","items","changes","map","merge","pipe","auditTime","tap","filterItems","updateFilterStates","skipFilter","_this3","filteredItems","option","count","disabled","AgentsComponent","_Component","onInit","agents","countries","regions","categories","filterService","idCountry","idsRegions","takeUntil","unsubscribe$","subscribe","pushChanges","hasCategory","id","Component","meta","selector","STATIC","port","host","DEVELOPMENT","ENV","PRODUCTION","ModalEvent","data","ModalResolveEvent","_ModalEvent","ModalRejectEvent","_ModalEvent2","ModalService","open$","modal","getTemplate$","src","template","node","getNode","modal$","switchMap","events$","load$","from","fetch","then","response","text","div","createElement","innerHTML","firstElementChild","reject","resolve","Subject","HttpService","http$","method","format","response_","getUrl","headers","Accept","Content-Type","body","ok","Promise","catchError","error","throwError","getError","get$","query","delete$","post$","put$","patch$","statusCode","status","statusMessage","statusText","console","log","LocalStorageService","delete","name","isLocalStorageSupported","localStorage","removeItem","exist","e","cache","setItem","supported","UserService","setUser","user","user$","me$","mapStatic__","register$","payload","update","login$","_this4","logout$","_this5","retrieve$","_this6","action","AppComponent","getContext","classList","setTimeout","parseQueryString","onDropped","openLogin","openRegister","openLoginRegisterModal","view","event","IntersectionService","observer","observer_","readySubject_","observerSubject_","IntersectionObserver","entries","intersection$","observe","entry","isIntersecting","finalize","unobserve","of","AppearDirective","_Directive","add","onChanges","appeared","Directive","srcMore","srcHint","BimLibrary01Component","files","departments","catalogues","fileExtension","features","visibleFilters","fake__","openMore","preventDefault","openHint","toggleFilter","f","products","product","productId","image","code","productCode","productName","abstract","description","category1Id","category2Id","slug","fileName","pop","fileSize","catalogue","titleCase__","category2Description","sort","a","b","department","category1Description","menu","d","str","toLowerCase","word","charAt","toUpperCase","slice","join","DROPDOWN_ID","DropdownDirective","trigger","getAttribute","querySelector","opened","onClick","bind","onDocumentClick","openDropdown","closeDropdown","addListeners","dropdown$","contains","addDocumentListeners","dropped","removeDocumentListeners","getValue","addEventListener","removeListeners","removeEventListener","onDestroy","nextId","dropdown","id_","inputs","outputs","BimLibrary02Component","visibleItems","breadcrumb","setMenuItem","child","parent","clear","selectedId","selectedLabel","_f","category3Id","category4Id","families","category4Description","solutions","category3Description","s","FilterMenuItem","values_","change$_","isMenuItem","FilterMenuService","init","tree","Array","isArray","flat","flatMap","toggleSelectedAndActiveStates","toggleSelectedStates","selected","childSelected","Boolean","BimLibraryComponent","maxVisibleItems","busy","scroll$","fromEvent","getBoundingClientRect","bottom","innerHeight","combineLatest","toggleMenuItem","ClickOutsideDirective","initialFocus","_getContext","parentInstance","event$","shareReplay","expression","outputFunction","makeFunction","clickOutside$","ClubForgotComponent","FormGroup","email","FormControl","Validators","RequiredValidator","EmailValidator","checkRequest","antiforgery","checkField","controls","changes$","success","test","patch","reset","onSubmit","valid","submitted","sent","touched","onLogin","login","onRegister","register","ModalOutletComponent","modalNode","modal_","removeChild","appendChild","compile","ClubComponent","views","SIGN_IN","SIGN_UP","FORGOTTEN","hasAttribute","parseInt","onForgot","onSignIn","club","onSignUp","onForgottenSent","ClubModalComponent","_ClubComponent","call","close","ClubPasswordEditComponent","newPassword","newPasswordConfirm","MatchValidator","fieldName","FormValidator","field","ClubPasswordRecoveryComponent","tokenEncoded","ClubProfileComponent","roles","provinces","firstName","lastName","company","role","country","province","address","zipCode","city","telephone","fax","newsletter","countryId","countryId_","String","idstato","hidden","ClubSigninComponent","password","signIn","forgot","ClubSignupComponent","privacy","RequiredTrueValidator","dataLayer","form type","DownloadsComponent","downloads","control","DropdownItemDirective","FilterMenuItemComponent","ControlComponent","flags","ControlCheckboxComponent","_ControlComponent","KeyboardService","keydown$","keyup$","typing$","to","typing","key$","clearTimeout","regexp","ControlCustomSelectComponent","labels","dropdownId","scrollToWord","children","scrollTo","offsetTop","setOption","isMultiple","hasOption","v","select","$event","multiple","ControlEmailComponent","ControlFileComponent","file","required","onReaderComplete","onInputDidChange","lastModified","lastModifiedDate","size","type","reader","FileReader","readAsDataURL","content","result","ControlPasswordComponent","ControlSelectComponent","ControlTextComponent","ControlTextareaComponent","ErrorsComponent","TestComponent","env","onTest","onReset","CssService","height$","style","documentElement","startWith","height","vh","setProperty","HeaderComponent","submenu","toggleMenu","HtmlPipe","_Pipe","transform","m","n","fromCharCode","unescapes","rx","RegExp","Pipe","PATH","UID","ImageService","worker","worker_","Worker","isBlob","isCors","postMessage","URL","createObjectURL","blob","revokeObjectURL","LazyCache","cache_","LazyDirective","input$","distinctUntilChanged","input","lazy$","lazy","setAttribute","MainMenuComponent","sticky","onToggleSticky","onSearch","MediaLibraryComponent","medias","languages","category","ModalComponent","NaturalFormService","getDefaultValue","naturalForm","firstId","phrase","form$","profileUrl","modalUrl","NaturalFormContactComponent","interests","interest","message","scope","hostname","onBack","back","NaturalFormControlComponent","scroll","change","cssText","rect","left","width","innerWidth","NaturalFormNewsletterComponent","NaturalFormRequestInfoComponent","NaturalFormSearchComponent","onNaturalForm","onClub","animateUnderlines_","animated","concat","querySelectorAll","gsap","transformOrigin","scaleX","animate","u","delay","ease","Power3","easeInOut","overwrite","onComplete","animateOff_","phrase_","_getContext2","contentNode","instances_","html","childNodes","NaturalFormSignupComponent","signUp","NaturalFormComponent","NATURAL","TECHNICAL","COMMERCIAL","NEWSLETTER","CLUB","clubProfileUrl","clubModalUrl","onNext","PriceListComponent","pricelists","RegisterOrLoginComponent","RequestInfoCommercialComponent","ReservedAreaComponent","doLogout","onProfileUpdate","onPasswordUpdate","ScrollToDirective","scrollTo$","currentTop","top","o","pow","scroll-behavior","Math","abs","Quad","easeOut","onUpdate","pageYOffset","scrollTop","DownloadService","download","click","a_","SecureDirective","tryDownloadHref","FileSizePipe","si","unit","units","toFixed","SwiperDirective","slidesPerView","spaceBetween","centeredSlides","speed","autoplay","keyboardControl","mousewheelControl","pagination","el","clickable","keyboard","enabled","onlyInViewport","init_","swiperInitOrUpdate_","removeListeners_","swiperDestroy_","onBeforePrint","slideToIndex","swiper","slideTo","opacity","on","slideChange","activeIndex","addListeners_","swiperDirectiveInit","Power2","element","Swiper","_opening","destroy","more","matchMedia","matches","SwiperListingDirective","_SwiperDirective","SwiperSlidesDirective","loop","loopAdditionalSlides","onSlideClick","navigation","nextEl","prevEl","GtmService","push_","VideoComponent","video","progress","pause","onPlay","onPause","onEnded","onTimeUpdate","togglePlay","paused","play","muted","playing","video_name","strokeDashoffset","currentTime","duration","playing_","WorkWithUsComponent","experience","introduction","curricula","YoutubeComponent","MOBILE","onPlayerReady","onPlayerStateChange","onPlayerError","id$","youtubeId","initPlayer","player$","player","interval$","once$","youtube","destroyPlayer","Player","offsetWidth","offsetHeight","videoId","playerVars","disablekb","enablejsapi","fs","modestbranding","playsinline","rel","showinfo","iv_load_policy","listType","events","onReady","onStateChange","mute","playVideo","interval","getCurrentTime","getDuration","stopVideo","youtube$","onYouTubeIframeAPIReady","onYouTubeIframeAPIReady_","script","scripts","last","parentNode","insertBefore","YT","mobilecheck","check","navigator","userAgent","vendor","opera","substr","mobileAndTabletcheck","ZoomableDirective","zoom","zoomIn","position","zoomOut","clearProps","zoom_","AppModule","_Module","Module","imports","CoreModule","FormModule","declarations","bootstrap","Browser"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { BehaviorSubject } from 'rxjs';\r\n\r\nexport const FilterMode = {\r\n\tSELECT: 'select',\r\n\tAND: 'and',\r\n\tOR: 'or',\r\n};\r\n\r\nexport default class FilterItem {\r\n\r\n\tconstructor(filter) {\r\n\t\tthis.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values = [];\r\n\t\tthis.options = [];\r\n\t\tif (filter) {\r\n\t\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\t\tfilter.options.unshift({\r\n\t\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn true; // item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSelectedOption() {\r\n\t\treturn this.options.find(x => this.has(x));\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst selectedOption = this.getSelectedOption();\r\n\t\t\treturn selectedOption ? selectedOption.label : this.placeholder;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.values = [];\r\n\t\t}\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index === -1) {\r\n\t\t\tif (item.value !== undefined) {\r\n\t\t\t\tthis.values.push(item.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.placeholder = item.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleActive() {\r\n\t\tthis.active = !this.active;\r\n\t}\r\n\r\n}\r\n","export default class LocationService {\r\n\r\n\tstatic get(key) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\t// console.log('LocationService.get', params);\r\n\t\treturn params.get(key);\r\n\t}\r\n\r\n\tstatic set(keyOrValue, value) {\r\n\t\tconst params = new URLSearchParams(window.location.search);\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams.set(keyOrValue, value);\r\n\t\t} else {\r\n\t\t\tparams.set(keyOrValue, '');\r\n\t\t}\r\n\t\tthis.replace(params);\r\n\t\t// console.log('LocationService.set', params, keyOrValue, value);\r\n\t}\r\n\r\n\tstatic replace(params) {\r\n\t\tif (window.history && window.history.pushState) {\r\n\t\t\tconst title = document.title;\r\n\t\t\tconst url = `${window.location.href.split('?')[0]}?${params.toString()}`;\r\n\t\t\twindow.history.pushState(params.toString(), title, url);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic deserialize(key) {\r\n\t\tconst encoded = this.get('params');\r\n\t\treturn this.decode(key, encoded);\r\n\t}\r\n\r\n\tstatic serialize(keyOrValue, value) {\r\n\t\tconst params = this.deserialize();\r\n\t\tconst encoded = this.encode(keyOrValue, value, params);\r\n\t\tthis.set('params', encoded);\r\n\t}\r\n\r\n\tstatic decode(key, encoded) {\r\n\t\tlet decoded = null;\r\n\t\tif (encoded) {\r\n\t\t\tconst json = window.atob(encoded);\r\n\t\t\tdecoded = JSON.parse(json);\r\n\t\t}\r\n\t\tif (key && decoded) {\r\n\t\t\tdecoded = decoded[key];\r\n\t\t}\r\n\t\treturn decoded || null;\r\n\t}\r\n\r\n\tstatic encode(keyOrValue, value, params) {\r\n\t\tparams = params || {};\r\n\t\tlet encoded = null;\r\n\t\tif (typeof keyOrValue === 'string') {\r\n\t\t\tparams[keyOrValue] = value;\r\n\t\t} else {\r\n\t\t\tparams = keyOrValue;\r\n\t\t}\r\n\t\tconst json = JSON.stringify(params);\r\n\t\tencoded = window.btoa(json);\r\n\t\treturn encoded;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { auditTime, map, tap } from 'rxjs/operators';\r\nimport LocationService from '../location/location.service';\r\nimport FilterItem from './filter-item';\r\n\r\nexport default class FilterService {\r\n\r\n\tconstructor(options, initialParams, callback) {\r\n\t\tconst filters = {};\r\n\t\tthis.filters = filters;\r\n\t\tif (options) {\r\n\t\t\tObject.keys(options).forEach(key => {\r\n\t\t\t\tconst filter = new FilterItem(options[key]);\r\n\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\tcallback(key, filter);\r\n\t\t\t\t}\r\n\t\t\t\tfilters[key] = filter;\r\n\t\t\t});\r\n\t\t\tthis.deserialize(this.filters, initialParams);\r\n\t\t}\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tObject.keys(filters).forEach(key => {\r\n\t\t\t\tfilters[key].values = params[key] || [];\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tif (filter.values && filter.values.length > 0) {\r\n\t\t\t\tparams[x] = filter.values;\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('FilterService.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\titems$(items) {\r\n\t\tconst filters = this.filters;\r\n\t\tconst changes = Object.keys(filters).map(key => filters[key].change$);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\tauditTime(1),\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(filters, items))\r\n\t\t);\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\tconst filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.values && x.values.length > 0);\r\n\t\titems = items.filter(item => {\r\n\t\t\tlet has = true;\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn has;\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items) {\r\n\t\tObject.keys(filters).forEach(x => {\r\n\t\t\tconst filter = filters[x];\r\n\t\t\tconst filteredItems = this.filterItems(items, filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\toption.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\n\r\nexport default class AgentsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst items = window.agents || [];\r\n\t\tconst filters = window.filters || {};\r\n\t\tconst initialParams = window.params || {};\r\n\t\tfilters.countries.mode = FilterMode.SELECT;\r\n\t\tfilters.regions.mode = FilterMode.SELECT;\r\n\t\t// filters.provinces.mode = FilterMode.SELECT;\r\n\t\tfilters.categories.mode = FilterMode.SELECT;\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'countries':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.idCountry && item.idCountry.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'regions':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.idsRegions && item.idsRegions.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tcase 'provinces':\r\n\t\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\t\treturn item.provinces && item.provinces.indexOf(value) !== -1;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t*/\r\n\t\t\t\tcase 'categories':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.categories && item.categories.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.items = [];\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t\t/*\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.items = items;\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t}, 50);\r\n\t\t\t*/\r\n\t\t\t// console.log('AgentsComponent.items', items.length);\r\n\t\t});\r\n\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\r\n\t}\r\n\r\n\thasCategory(item, id) {\r\n\t\treturn item.categories && item.categories.indexOf(id) !== -1;\r\n\t}\r\n\r\n\t/*\r\n\tcollect() {\r\n\t\tlet provinces = [];\r\n\t\titems.forEach(x => {\r\n\t\t\tif (x.provinces) {\r\n\t\t\t\tx.provinces.forEach(province => {\r\n\t\t\t\t\tif (provinces.indexOf(province) === -1) {\r\n\t\t\t\t\t\tprovinces.push(province);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t});\r\n\t\tprovinces = provinces.sort().map(x => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x,\r\n\t\t\t\tlabel: x,\r\n\t\t\t}\r\n\t\t});\r\n\t\t// console.log(JSON.stringify(provinces));\r\n\t}\r\n\t*/\r\n\r\n}\r\n\r\nAgentsComponent.meta = {\r\n\tselector: '[agents]',\r\n};\r\n","export const STATIC = window.location.port === '41999' || window.location.host === 'actarian.github.io';\r\nexport const DEVELOPMENT = ['localhost', '127.0.0.1', '0.0.0.0'].indexOf(window.location.host.split(':')[0]) !== -1;\r\nexport const PRODUCTION = !DEVELOPMENT;\r\nexport const ENV = {\r\n\tSTATIC,\r\n\tDEVELOPMENT,\r\n\tPRODUCTION\r\n};\r\n","import { from, Subject } from 'rxjs';\r\nimport { map, switchMap, tap } from 'rxjs/operators';\r\n\r\nexport class ModalEvent {\r\n\r\n\tconstructor(data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n}\r\n\r\nexport class ModalResolveEvent extends ModalEvent {}\r\nexport class ModalRejectEvent extends ModalEvent {}\r\n\r\nexport default class ModalService {\r\n\r\n\tstatic open$(modal) {\r\n\t\treturn this.getTemplate$(modal.src).pipe(\r\n\t\t\tmap(template => {\r\n\t\t\t\treturn { node: this.getNode(template), data: modal.data, modal: modal };\r\n\t\t\t}),\r\n\t\t\ttap(node => this.modal$.next(node)),\r\n\t\t\tswitchMap(node => this.events$),\r\n\t\t)\r\n\t}\r\n\r\n\tstatic load$(modal) {\r\n\r\n\t}\r\n\r\n\tstatic getTemplate$(url) {\r\n\t\treturn from(fetch(url).then(response => {\r\n\t\t\treturn response.text();\r\n\t\t}));\r\n\t}\r\n\r\n\tstatic getNode(template) {\r\n\t\tconst div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = template;\r\n\t\tconst node = div.firstElementChild;\r\n\t\treturn node;\r\n\t}\r\n\r\n\tstatic reject(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalRejectEvent(data));\r\n\t}\r\n\r\n\tstatic resolve(data) {\r\n\t\tthis.modal$.next(null);\r\n\t\tthis.events$.next(new ModalResolveEvent(data));\r\n\t}\r\n\r\n}\r\n\r\nModalService.modal$ = new Subject();\r\nModalService.events$ = new Subject();\r\n","import { from, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\n\r\nexport default class HttpService {\r\n\r\n\tstatic http$(method, url, data, format = 'json') {\r\n\t\tconst methods = ['POST', 'PUT', 'PATCH'];\r\n\t\tlet response_ = null;\r\n\t\treturn from(fetch(this.getUrl(url, format), {\r\n\t\t\tmethod: method,\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: methods.indexOf(method) !== -1 ? JSON.stringify(data) : undefined\r\n\t\t}).then((response) => {\r\n\t\t\tresponse_ = response;\r\n\t\t\t// console.log(response);\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response[format]();\r\n\t\t\t} else {\r\n\t\t\t\treturn response.json().then(json => {\r\n\t\t\t\t\treturn Promise.reject(json);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})).pipe(\r\n\t\t\tcatchError(error => {\r\n\t\t\t\treturn throwError(this.getError(error, response_));\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic get$(url, data, format) {\r\n\t\tconst query = this.query(data);\r\n\t\treturn this.http$('GET', `${url}${query}`, undefined, format);\r\n\t}\r\n\r\n\tstatic delete$(url) {\r\n\t\treturn this.http$('DELETE', url);\r\n\t}\r\n\r\n\tstatic post$(url, data) {\r\n\t\treturn this.http$('POST', url, data);\r\n\t}\r\n\r\n\tstatic put$(url, data) {\r\n\t\treturn this.http$('PUT', url, data);\r\n\t}\r\n\r\n\tstatic patch$(url, data) {\r\n\t\treturn this.http$('PATCH', url, data);\r\n\t}\r\n\r\n\tstatic query(data) {\r\n\t\treturn ''; // todo\r\n\t}\r\n\r\n\tstatic getUrl(url, format = 'json') {\r\n\t\t// console.log(url);\r\n\t\treturn STATIC && format === 'json' && url.indexOf('/') === 0 ? `.${url}.json` : url;\r\n\t}\r\n\r\n\tstatic getError(object, response) {\r\n\t\tlet error = typeof object === 'object' ? object : {};\r\n\t\tif (!error.statusCode) {\r\n\t\t\terror.statusCode = response ? response.status : 0;\r\n\t\t}\r\n\t\tif (!error.statusMessage) {\r\n\t\t\terror.statusMessage = response ? response.statusText : object;\r\n\t\t}\r\n\t\tconsole.log('HttpService.getError', error, object);\r\n\t\treturn error;\r\n\t}\r\n\r\n}\r\n","export default class LocalStorageService {\r\n\r\n\tstatic delete(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\twindow.localStorage.removeItem(name);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\treturn window.localStorage[name] !== undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name) {\r\n\t\tlet value = null;\r\n\t\tif (this.isLocalStorageSupported() && window.localStorage[name] !== undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.get.error parsing', name, e);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic set(name, value) {\r\n\t\tif (this.isLocalStorageSupported()) {\r\n\t\t\ttry {\r\n\t\t\t\tconst cache = [];\r\n\t\t\t\tconst json = JSON.stringify(value, function(key, value) {\r\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\r\n\t\t\t\t\t\tif (cache.indexOf(value) !== -1) {\r\n\t\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcache.push(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\t\t\t\twindow.localStorage.setItem(name, json);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('LocalStorageService.set.error serializing', name, value, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isLocalStorageSupported() {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\twindow.localStorage.setItem('test', '1');\r\n\t\t\t\twindow.localStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t}\r\n\r\n}\r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\nimport LocalStorageService from '../local-storage/local-storage.service';\r\n\r\nexport default class UserService {\r\n\r\n\tstatic setUser(user) {\r\n\t\tthis.user$.next(user);\r\n\t}\r\n\r\n\tstatic me$() {\r\n\t\treturn HttpService.get$('/api/users/me').pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'me')),\r\n\t\t\tswitchMap(user => {\r\n\t\t\t\tthis.setUser(user);\r\n\t\t\t\treturn this.user$;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic register$(payload) {\r\n\t\treturn HttpService.post$('/api/users/register', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic update(payload) {\r\n\t\treturn HttpService.post$('/api/users/updateprofile', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'register')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic login$(payload) {\r\n\t\treturn HttpService.post$('/api/users/login', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'login')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic logout$() {\r\n\t\treturn HttpService.post$('/api/users/logout').pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'logout')),\r\n\t\t);\r\n\t}\r\n\tstatic retrieve$(payload) {\r\n\t\treturn HttpService.post$('/api/users/retrievepassword', payload).pipe(\r\n\t\t\tmap((user) => this.mapStatic__(user, 'retrieve')),\r\n\t\t);\r\n\t}\r\n\r\n\tstatic mapStatic__(user, action = 'me') {\r\n\t\tif (!STATIC) {\r\n\t\t\treturn user;\r\n\t\t};\r\n\t\tswitch (action) {\r\n\t\t\tcase 'me':\r\n\t\t\t\tif (!LocalStorageService.exist('user')) {\r\n\t\t\t\t\tuser = null;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'login':\r\n\t\t\t\tLocalStorageService.set('user', user);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'logout':\r\n\t\t\t\tLocalStorageService.delete('user');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n\r\n}\r\n\r\nUserService.user$ = new BehaviorSubject(null);\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { STATIC } from './environment/environment';\r\nimport LocationService from './location/location.service';\r\nimport ModalService, { ModalResolveEvent } from './modal/modal.service';\r\nimport UserService from './user/user.service';\r\n\r\nconst src = STATIC ? '/tiemme-com/club-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class AppComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('hidden');\r\n\t\t// console.log('context', context);\r\n\t\tUserService.user$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tconsole.log('AppComponent.user$', user);\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.parseQueryString();\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\tconsole.log('AppComponent.onDropped', id);\r\n\t}\r\n\r\n\tparseQueryString() {\r\n\t\tconst action = LocationService.get('action');\r\n\t\tswitch (action) {\r\n\t\t\tcase 'login':\r\n\t\t\t\tthis.openLogin();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'register':\r\n\t\t\t\tthis.openRegister();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\topenLogin() {\r\n\t\tthis.openLoginRegisterModal(1);\r\n\t}\r\n\r\n\topenRegister() {\r\n\t\tthis.openLoginRegisterModal(2);\r\n\t}\r\n\r\n\topenLoginRegisterModal(view = 1) {\r\n\t\tModalService.open$({ src: src, data: { view } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('RegisterOrLoginComponent.onRegister', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// onView() { const context = getContext(this); }\r\n\r\n\t// onChanges() {}\r\n\r\n\t// onDestroy() {}\r\n}\r\n\r\nAppComponent.meta = {\r\n\tselector: '[app-component]',\r\n};\r\n","import { BehaviorSubject, of , Subject } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\n\r\nexport default class IntersectionService {\r\n\r\n\tstatic observer() {\r\n\t\tif (!this.observer_) {\r\n\t\t\tthis.readySubject_ = new BehaviorSubject(false);\r\n\t\t\tthis.observerSubject_ = new Subject();\r\n\t\t\tthis.observer_ = new IntersectionObserver(entries => {\r\n\t\t\t\tthis.observerSubject_.next(entries);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.observer_;\r\n\t}\r\n\r\n\tstatic intersection$(node) {\r\n\t\tif ('IntersectionObserver' in window) {\r\n\t\t\tconst observer = this.observer();\r\n\t\t\tobserver.observe(node);\r\n\t\t\treturn this.observerSubject_.pipe(\r\n\t\t\t\t// tap(entries => console.log(entries.length)),\r\n\t\t\t\tmap(entries => entries.find(entry => entry.target === node)),\r\n\t\t\t\t// tap(entry => console.log('IntersectionService.intersection$', entry)),\r\n\t\t\t\tfilter(entry => entry !== undefined && entry.isIntersecting), // entry.intersectionRatio > 0\r\n\t\t\t\tfirst(),\r\n\t\t\t\tfinalize(() => observer.unobserve(node)),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn of({ target: node });\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\tfunction observer() {\r\n\t\t\tif ('IntersectionObserver' in window) {\r\n\t\t\t\treturn new IntersectionObserver(entries => {\r\n\t\t\t\t\tentries.forEach(function(entry) {\r\n\t\t\t\t\t\tif (entry.isIntersecting) {\r\n\t\t\t\t\t\t\tentry.target.classList.add('appear');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\treturn { observe: function(node) { node.classList.add('appear')}, unobserve: function() {} };\r\n\t\t\t}\r\n\t\t}\r\n\t\tobserver.observe(node);\r\n\t\tobserver.unobserve(node);\r\n\t\t*/\r\n\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport IntersectionService from '../intersection/intersection.service';\r\n\r\nexport default class AppearDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('appear');\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tif (!this.appeared) {\r\n\t\t\tthis.appeared = true;\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tIntersectionService.intersection$(node).pipe(\r\n\t\t\t\tfirst(),\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(src => {\r\n\t\t\t\tnode.classList.add('appeared');\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nAppearDirective.meta = {\r\n\tselector: '[appear]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nconst srcMore = STATIC ? '/tiemme-com/services-bim-modal-more.html' : '/Viewdoc.cshtml?co_id=25206';\r\nconst srcHint = STATIC ? '/tiemme-com/services-bim-modal-hint.html' : '/Viewdoc.cshtml?co_id=25207';\r\n\r\nexport default class BimLibrary01Component extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst items = window.files || [];\r\n\t\tconst filters = window.filters || {};\r\n\t\tconst initialParams = window.params || {};\r\n\t\tfilters.departments.mode = FilterMode.OR;\r\n\t\tfilters.catalogues.mode = FilterMode.OR;\r\n\t\t// filters.extensions.mode = FilterMode.OR;\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'extensions':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.files.find(x => x.fileExtension === value);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t\t// console.log('BimLibrary01Component.items', items.length);\r\n\t\t});\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t\tthis.visibleFilters = {\r\n\t\t\tdepartments: filterService.filters.departments\r\n\t\t};\r\n\t\tthis.fake__();\r\n\t}\r\n\r\n\topenMore(event) {\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: srcMore, data: null }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('BimLibrary01Component.onRegister', event);\r\n\t\t});\r\n\t}\r\n\r\n\topenHint(event) {\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: srcHint, data: null }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('BimLibrary01Component.onRegister', event);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tfake__() {\r\n\t\tHttpService.get$('/api/bim/excel').pipe(\r\n\t\t\tfirst()\r\n\t\t).subscribe(items => {\r\n\t\t\tconst products = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tlet product = products.find(x => x.id === item.productId);\r\n\t\t\t\tif (!product) {\r\n\t\t\t\t\tproduct = {\r\n\t\t\t\t\t\tid: item.productId,\r\n\t\t\t\t\t\timage: item.image,\r\n\t\t\t\t\t\tcode: item.productCode,\r\n\t\t\t\t\t\ttitle: item.productName,\r\n\t\t\t\t\t\tabstract: item.description,\r\n\t\t\t\t\t\tfiles: [],\r\n\t\t\t\t\t\tfeatures: [item.category1Id, item.category2Id],\r\n\t\t\t\t\t\tslug: 'https://tiemmeraccorderie.wslabs.it/it/prodotti/componenti-idraulici/tubi/tubi-multistrato-al-cobrapex/standard/0600/'\r\n\t\t\t\t\t};\r\n\t\t\t\t\tproducts.push(product);\r\n\t\t\t\t}\r\n\t\t\t\tif (!product.files.find(x => x.fileName === item.fileName)) {\r\n\t\t\t\t\tproduct.files.push({\r\n\t\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\t\tfileExtension: `.${item.fileName.split('.').pop()}`,\r\n\t\t\t\t\t\tfileSize: 45000,\r\n\t\t\t\t\t\turl: 'https://tiemmeraccorderie.wslabs.it/media/files/' + item.fileName,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log(JSON.stringify(products));\r\n\t\t\tconst catalogues = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst catalogue = catalogues.find(x => x.value === item.category2Id);\r\n\t\t\t\tif (!catalogue) {\r\n\t\t\t\t\tcatalogues.push({\r\n\t\t\t\t\t\tvalue: item.category2Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category2Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcatalogue.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcatalogues.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log(JSON.stringify(catalogues.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst departments = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst department = departments.find(x => x.value === item.category1Id);\r\n\t\t\t\tif (!department) {\r\n\t\t\t\t\tdepartments.push({\r\n\t\t\t\t\t\tvalue: item.category1Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category1Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdepartment.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdepartments.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log(JSON.stringify(departments.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst menu = {\r\n\t\t\t\tid: 'menu',\r\n\t\t\t\ttitle: 'Area',\r\n\t\t\t\titems: departments.map(d => {\r\n\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\tid: d.value,\r\n\t\t\t\t\t\tlabel: d.label,\r\n\t\t\t\t\t\ttitle: 'Catalogo',\r\n\t\t\t\t\t\titems: catalogues.filter(c => {\r\n\t\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1);\r\n\t\t\t\t\t\t}).map(c => {\r\n\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\tid: c.value,\r\n\t\t\t\t\t\t\t\tlabel: c.label,\r\n\t\t\t\t\t\t\t\ttitle: 'Prodotto',\r\n\t\t\t\t\t\t\t\titems: products.filter(p => {\r\n\t\t\t\t\t\t\t\t\treturn p.features.indexOf(c.value) !== -1;\r\n\t\t\t\t\t\t\t\t}).map(p => {\r\n\t\t\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\t\t\tid: p.id,\r\n\t\t\t\t\t\t\t\t\t\tlabel: p.title,\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t})\r\n\t\t\t};\r\n\t\t\tconsole.log(JSON.stringify(menu));\r\n\t\t});\r\n\t}\r\n\r\n\ttitleCase__(str) {\r\n\t\treturn str.toLowerCase().split(' ').map(function(word) {\r\n\t\t\treturn (word.charAt(0).toUpperCase() + word.slice(1));\r\n\t\t}).join(' ');\r\n\t}\r\n\r\n}\r\n\r\nBimLibrary01Component.meta = {\r\n\tselector: '[bim-library-01]',\r\n};\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\nlet DROPDOWN_ID = 1000000;\r\n\r\nexport default class DropdownDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this.dropdown || this.id_ || (this.id_ = DropdownDirective.nextId());\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst trigger = node.getAttribute('dropdown-trigger');\r\n\t\tthis.trigger = trigger ? node.querySelector(trigger) : node;\r\n\t\tthis.opened = null;\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tthis.onDocumentClick = this.onDocumentClick.bind(this);\r\n\t\tthis.openDropdown = this.openDropdown.bind(this);\r\n\t\tthis.closeDropdown = this.closeDropdown.bind(this);\r\n\t\tthis.addListeners();\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.openDropdown();\r\n\t\t} else {\r\n\t\t\tconst dropdownItemNode = node.querySelector('[dropdown-item]');\r\n\t\t\t// console.log('dropdownItemNode', dropdownItemNode);\r\n\t\t\tif (!dropdownItemNode) { // if (this.trigger !== node) {\r\n\t\t\t\tthis.closeDropdown();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDocumentClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst clickedInside = node === event.target || node.contains(event.target);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.closeDropdown();\r\n\t\t}\r\n\t}\r\n\r\n\topenDropdown() {\r\n\t\tif (this.opened === null) {\r\n\t\t\tthis.opened = true;\r\n\t\t\tthis.addDocumentListeners();\r\n\t\t\tDropdownDirective.dropdown$.next(this.id);\r\n\t\t\tthis.dropped.next(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\tcloseDropdown() {\r\n\t\tif (this.opened !== null) {\r\n\t\t\tthis.removeDocumentListeners();\r\n\t\t\tthis.opened = null;\r\n\t\t\tif (DropdownDirective.dropdown$.getValue() === this.id) {\r\n\t\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\t\tthis.dropped.next(null);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tthis.trigger.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\taddDocumentListeners() {\r\n\t\tdocument.addEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tthis.trigger.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tremoveDocumentListeners() {\r\n\t\tdocument.removeEventListener('click', this.onDocumentClick);\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t\tthis.removeDocumentListeners();\r\n\t}\r\n\r\n\tstatic nextId() {\r\n\t\treturn DROPDOWN_ID++;\r\n\t}\r\n\r\n}\r\n\r\nDropdownDirective.meta = {\r\n\tselector: '[dropdown]',\r\n\tinputs: ['dropdown', 'dropdown-trigger'],\r\n\toutputs: ['dropped']\r\n};\r\n\r\nDropdownDirective.dropdown$ = new BehaviorSubject(null);\r\n","import { Component } from 'rxcomp';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport { STATIC } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nconst srcMore = STATIC ? '/tiemme-com/services-bim-modal-more.html' : '/Viewdoc.cshtml?co_id=25206';\r\nconst srcHint = STATIC ? '/tiemme-com/services-bim-modal-hint.html' : '/Viewdoc.cshtml?co_id=25207';\r\n\r\nexport default class BimLibrary02Component extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst menu = window.menu || {};\r\n\t\tconst items = window.files || [];\r\n\t\tthis.menu = menu;\r\n\t\tthis.items = items;\r\n\t\tthis.visibleItems = items.slice();\r\n\t\tthis.breadcrumb = [menu];\r\n\t\t// this.fake__();\r\n\t}\r\n\r\n\tsetMenuItem(child, parent) {\r\n\t\tconst clear = (items) => {\r\n\t\t\tif (items) {\r\n\t\t\t\titems.forEach(x => {\r\n\t\t\t\t\tdelete x.selectedId;\r\n\t\t\t\t\tdelete x.selectedLabel;\r\n\t\t\t\t\tclear(x.items);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\tclear(parent.items);\r\n\t\tlet index = this.breadcrumb.reduce((p, c, i) => {\r\n\t\t\treturn c.id === parent.id ? i : p;\r\n\t\t}, -1);\r\n\t\tif (index !== -1) {\r\n\t\t\tparent.selectedId = child.id;\r\n\t\t\tparent.selectedLabel = child.label;\r\n\t\t\tconst breadcrumb = this.breadcrumb.slice(0, index + 1);\r\n\t\t\tif (child.items) {\r\n\t\t\t\tbreadcrumb.push(child);\r\n\t\t\t}\r\n\t\t\tthis.breadcrumb = [];\r\n\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t\tthis.pushChanges();\r\n\t\t\tthis.breadcrumb = breadcrumb;\r\n\t\t\tthis.visibleItems = this.items.filter(x => {\r\n\t\t\t\treturn breadcrumb.reduce((p, c) => {\r\n\t\t\t\t\tif (c.selectedId) {\r\n\t\t\t\t\t\treturn p && (x.features.indexOf(c.selectedId) !== -1 || x.id === c.selectedId);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn p;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, true);\r\n\t\t\t});\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\topenMore(event) {\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: srcMore, data: null }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('BimLibrary02Component.onRegister', event);\r\n\t\t});\r\n\t}\r\n\r\n\topenHint(event) {\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: srcHint, data: null }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('BimLibrary02Component.onRegister', event);\r\n\t\t});\r\n\t}\r\n\r\n\tfake__() {\r\n\t\tHttpService.get$('/api/bim/excel').pipe(\r\n\t\t\tfirst()\r\n\t\t).subscribe(items => {\r\n\t\t\tconst products = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tlet f = products.find(x => x.id === item.productId);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tf = {\r\n\t\t\t\t\t\tid: item.productId,\r\n\t\t\t\t\t\timage: item.image,\r\n\t\t\t\t\t\tcode: item.productCode,\r\n\t\t\t\t\t\ttitle: item.productName,\r\n\t\t\t\t\t\tfiles: [],\r\n\t\t\t\t\t\tfeatures: [item.category1Id, item.category2Id, item.category3Id],\r\n\t\t\t\t\t\timage: 'https://tiemmeraccorderie.wslabs.it/' + item.image,\r\n\t\t\t\t\t\tslug: 'https://tiemmeraccorderie.wslabs.it/it/prodotti/componenti-idraulici/tubi/tubi-multistrato-al-cobrapex/standard/0600/'\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (item.category4Id) {\r\n\t\t\t\t\t\tf.features.push(item.category4Id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproducts.push(f);\r\n\t\t\t\t}\r\n\t\t\t\tif (!f.files.find(x => x.fileName === item.fileName)) {\r\n\t\t\t\t\tf.files.push({\r\n\t\t\t\t\t\tdescription: item.description,\r\n\t\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\t\tfileExtension: `.${item.fileName.split('.').pop()}`,\r\n\t\t\t\t\t\tfileSize: 45000,\r\n\t\t\t\t\t\turl: 'https://tiemmeraccorderie.wslabs.it/media/files/' + item.fileName,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log('products', JSON.stringify(products));\r\n\t\t\tconst families = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = families.find(x => x.value === item.category4Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tfamilies.push({\r\n\t\t\t\t\t\tvalue: item.category4Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category4Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tfamilies.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('families', JSON.stringify(families.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst solutions = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = solutions.find(x => x.value === item.category3Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tsolutions.push({\r\n\t\t\t\t\t\tvalue: item.category3Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category3Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsolutions.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('solutions', JSON.stringify(solutions.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst catalogues = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = catalogues.find(x => x.value === item.category2Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tcatalogues.push({\r\n\t\t\t\t\t\tvalue: item.category2Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category2Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcatalogues.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('catalogues', JSON.stringify(catalogues.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst departments = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = departments.find(x => x.value === item.category1Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tdepartments.push({\r\n\t\t\t\t\t\tvalue: item.category1Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category1Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdepartments.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('departments', JSON.stringify(departments.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst menu = {\r\n\t\t\t\tid: 'menu',\r\n\t\t\t\ttitle: 'Area',\r\n\t\t\t\titems: departments.map(d => {\r\n\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\tid: d.value,\r\n\t\t\t\t\t\tlabel: d.label,\r\n\t\t\t\t\t\ttitle: 'Catalogo',\r\n\t\t\t\t\t\titems: catalogues.filter(c => {\r\n\t\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1);\r\n\t\t\t\t\t\t}).map(c => {\r\n\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\tid: c.value,\r\n\t\t\t\t\t\t\t\tlabel: c.label,\r\n\t\t\t\t\t\t\t\ttitle: 'Soluzione',\r\n\t\t\t\t\t\t\t\titems: solutions.filter(s => {\r\n\t\t\t\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1 && p.features.indexOf(s.value) !== -1);\r\n\t\t\t\t\t\t\t\t}).map(s => {\r\n\t\t\t\t\t\t\t\t\tlet item = {\r\n\t\t\t\t\t\t\t\t\t\tid: s.value,\r\n\t\t\t\t\t\t\t\t\t\tlabel: s.label,\r\n\t\t\t\t\t\t\t\t\t\ttitle: 'Famiglia',\r\n\t\t\t\t\t\t\t\t\t\titems: families.filter(f => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1 && p.features.indexOf(s.value) !== -1 && p.features.indexOf(f.value) !== -1);\r\n\t\t\t\t\t\t\t\t\t\t}).map(f => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\t\t\t\t\tid: f.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: f.label,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Prodotto',\r\n\t\t\t\t\t\t\t\t\t\t\t\titems: products.filter(p => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn p.features.indexOf(f.value) !== -1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}).map(p => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: p.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: p.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tif (item.items.length === 0) {\r\n\t\t\t\t\t\t\t\t\t\titem = {\r\n\t\t\t\t\t\t\t\t\t\t\tid: s.value,\r\n\t\t\t\t\t\t\t\t\t\t\tlabel: s.label,\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Prodotto',\r\n\t\t\t\t\t\t\t\t\t\t\titems: products.filter(p => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn p.features.indexOf(s.value) !== -1;\r\n\t\t\t\t\t\t\t\t\t\t\t}).map(p => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: p.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: p.title,\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t})\r\n\t\t\t};\r\n\t\t\tconsole.log('menu', JSON.stringify(menu));\r\n\t\t});\r\n\t}\r\n\r\n\ttitleCase__(str) {\r\n\t\treturn str.toLowerCase().split(' ').map(function(word) {\r\n\t\t\treturn (word.charAt(0).toUpperCase() + word.slice(1));\r\n\t\t}).join(' ');\r\n\t}\r\n\r\n}\r\n\r\nBimLibrary02Component.meta = {\r\n\tselector: '[bim-library-02]',\r\n};\r\n","// import FilterItem, { FilterMode } from './filter-item';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { FilterMode } from './filter-item';\r\n\r\nexport default class FilterMenuItem {\r\n\r\n\t/*\r\n\tconstructor(filter, parent) {\r\n\t\tfilter.mode = filter.mode || FilterMode.OR;\r\n\t\tfilter.options = filter.options ? filter.options.map(x => x.options ? new FilterMenuItem(x, parent || this) : x) : [];\r\n\t\tsuper(filter);\r\n\t}\r\n\t*/\r\n\r\n\tget values() {\r\n\t\treturn this.parent ? this.parent.values : this.values_;\r\n\t}\r\n\r\n\tget change$() {\r\n\t\tif (this.parent) {\r\n\t\t\treturn this.parent.change$;\r\n\t\t} else if (!this.change$_) {\r\n\t\t\tthis.change$_ = new BehaviorSubject();\r\n\t\t}\r\n\t\treturn this.change$_;\r\n\t}\r\n\r\n\tconstructor(filter, parent) {\r\n\t\t// this.change$ = new BehaviorSubject();\r\n\t\tthis.mode = FilterMode.SELECT;\r\n\t\tthis.placeholder = 'Select';\r\n\t\tthis.values_ = [];\r\n\t\tthis.options = [];\r\n\t\tthis.items = [];\r\n\t\tif (filter) {\r\n\t\t\tfilter.mode = filter.mode || FilterMode.OR;\r\n\t\t\tfilter.options = filter.options ? filter.options.map(x => x.options ? new FilterMenuItem(x, parent || this) : x) : [];\r\n\t\t\tif (filter.mode === FilterMode.SELECT) {\r\n\t\t\t\tfilter.options.unshift({\r\n\t\t\t\t\tlabel: filter.placeholder,\r\n\t\t\t\t\tvalues: [],\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tObject.assign(this, filter);\r\n\t\t}\r\n\t\tthis.parent = parent;\r\n\t\tif (parent) {\r\n\t\t\tparent.items.push.apply(parent.items, this.options);\r\n\t\t}\r\n\t}\r\n\r\n\tfilter(item, value) {\r\n\t\treturn true; // item.options.indexOf(value) !== -1;\r\n\t}\r\n\r\n\tmatch(item) {\r\n\t\tlet match;\r\n\t\tif (this.mode === FilterMode.OR) {\r\n\t\t\tmatch = this.values.length ? false : true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match || this.filter(item, value);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmatch = true;\r\n\t\t\tthis.values.forEach(value => {\r\n\t\t\t\tmatch = match && this.filter(item, value);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\treturn this.placeholder || this.label;\r\n\t\t} else {\r\n\t\t\treturn this.label;\r\n\t\t}\r\n\t}\r\n\r\n\thas(item) {\r\n\t\treturn this.values.indexOf(item.value) !== -1;\r\n\t}\r\n\r\n\tset(item) {\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.values_ = [];\r\n\t\t}\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index === -1) {\r\n\t\t\tif (item.value !== undefined) {\r\n\t\t\t\tthis.values.push(item.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tthis.placeholder = item.label;\r\n\t\t}\r\n\t\t// console.log('FilterItem.set', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\tremove(item) {\r\n\t\tconst index = this.values.indexOf(item.value);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.values.splice(index, 1);\r\n\t\t}\r\n\t\tif (this.mode === FilterMode.SELECT) {\r\n\t\t\tconst first = this.options[0];\r\n\t\t\tthis.placeholder = first.label;\r\n\t\t}\r\n\t\t// remove all child items\r\n\t\tif (item instanceof FilterMenuItem) {\r\n\t\t\titem.options.forEach(x => item.remove(x));\r\n\t\t}\r\n\t\t// console.log('FilterItem.remove', item);\r\n\t\tthis.change$.next();\r\n\t}\r\n\r\n\ttoggle(item) {\r\n\t\tif (this.has(item)) {\r\n\t\t\tthis.remove(item);\r\n\t\t} else {\r\n\t\t\tthis.set(item);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleActive() {\r\n\t\tthis.active = !this.active;\r\n\t}\r\n\r\n\tisMenuItem(option) {\r\n\t\treturn option instanceof FilterMenuItem;\r\n\t}\r\n\r\n}\r\n","import { merge } from 'rxjs';\r\nimport { auditTime, map, tap } from 'rxjs/operators';\r\nimport LocationService from '../location/location.service';\r\nimport FilterMenuItem from './filter-menu-item';\r\n\r\nexport default class FilterMenuService {\r\n\r\n\tconstructor() {\r\n\t\tthis.filters = [];\r\n\t}\r\n\r\n\tinit(tree, initialParams, callback) {\r\n\t\tthis.filters = Array.isArray(tree) ? tree.map(x => new FilterMenuItem(x)) : [];\r\n\t\tthis.flat = this.flatMap(this.filters);\r\n\t\tif (typeof callback === 'function') {\r\n\t\t\tthis.flat.forEach(x => callback(x));\r\n\t\t}\r\n\t\t// console.log(this.flat);\r\n\t\tthis.deserialize(this.filters, initialParams);\r\n\t\tthis.toggleSelectedAndActiveStates(this.filters);\r\n\t\treturn this.filters;\r\n\t}\r\n\r\n\titems$(filters, items, callback) {\r\n\t\tfilters = this.init(filters, null, callback);\r\n\t\tconst changes = filters.map(x => x.change$);\r\n\t\treturn merge(...changes).pipe(\r\n\t\t\tauditTime(1),\r\n\t\t\t// tap(() => console.log(filters)),\r\n\t\t\ttap(() => this.serialize(filters)),\r\n\t\t\tmap(() => this.filterItems(items)),\r\n\t\t\ttap(() => this.updateFilterStates(this.flat, items)),\r\n\t\t\ttap(() => this.toggleSelectedStates(filters)), // forza apertura menu\r\n\t\t);\r\n\t}\r\n\r\n\tflatMap(filters, items) {\r\n\t\titems = items || [];\r\n\t\tfilters.forEach(x => {\r\n\t\t\tif (x instanceof FilterMenuItem) {\r\n\t\t\t\titems.push(x);\r\n\t\t\t}\r\n\t\t\tif (x.options) {\r\n\t\t\t\tthis.flatMap(x.options, items);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn items;\r\n\t}\r\n\r\n\tfilterItems(items, skipFilter) {\r\n\t\t// const filters = Object.keys(this.filters).map((x) => this.filters[x]).filter(x => x.value !== null);\r\n\t\t// const filters = this.flat.filter(x => x.values && x.values.length > 0);\r\n\t\t// console.log(this.filters);\r\n\t\tconst filters = this.filters.filter(x => x.values && x.values.length > 0);\r\n\t\t/*\r\n\t\tif (!skipFilter) {\r\n\t\t\tconsole.log('cycles', filters.length, 'x', items.length, '=', filters.length * items.length);\r\n\t\t}\r\n\t\t*/\r\n\t\tif (filters.length) {\r\n\t\t\t// console.log('filters', filters);\r\n\t\t\treturn items.filter(item => {\r\n\t\t\t\tlet has = true;\r\n\t\t\t\tfilters.forEach(filter => {\r\n\t\t\t\t\tif (filter !== skipFilter) {\r\n\t\t\t\t\t\thas = has && filter.match(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn has;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn items.slice();\r\n\t\t}\r\n\t}\r\n\r\n\tupdateFilterStates(filters, items) {\r\n\t\t// console.log(filters);\r\n\t\tfilters.forEach(filter => {\r\n\t\t\tconst filteredItems = this.filterItems(items, filter.parent ? filter.parent : filter);\r\n\t\t\tfilter.options.forEach(option => {\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tif (option.value) {\r\n\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\twhile (i < filteredItems.length) {\r\n\t\t\t\t\t\tconst item = filteredItems[i];\r\n\t\t\t\t\t\tif (filter.filter(item, option.value)) {\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = filteredItems.length;\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(count);\r\n\t\t\t\toption.count = count;\r\n\t\t\t\toption.disabled = count === 0;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tdeserialize(filters, initialParams) {\r\n\t\tlet params;\r\n\t\tif (initialParams && this.getParamsCount(initialParams)) {\r\n\t\t\tparams = initialParams;\r\n\t\t}\r\n\t\tconst locationParams = LocationService.deserialize('filters');\r\n\t\tif (locationParams && this.getParamsCount(locationParams)) {\r\n\t\t\tparams = locationParams;\r\n\t\t}\r\n\t\tif (params) {\r\n\t\t\tfilters.forEach(filter => {\r\n\t\t\t\tfilter.values_ = params[filter.key + '-' + filter.value] || [];\r\n\t\t\t\t// console.log('deserialize', filter.key + '-' + filter.value, filter.values_);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn filters;\r\n\t}\r\n\r\n\ttoggleSelectedAndActiveStates(filters, parent) {\r\n\t\tlet selected = false;\r\n\t\tif (filters) {\r\n\t\t\tselected = filters.reduce((p, c) => {\r\n\t\t\t\tconst childSelected = this.toggleSelectedAndActiveStates(c.options, c);\r\n\t\t\t\treturn p || Boolean(parent && parent.has(c)) || childSelected;\r\n\t\t\t}, false);\r\n\t\t}\r\n\t\tif (parent) {\r\n\t\t\tparent.selected = selected;\r\n\t\t\tparent.active = selected;\r\n\t\t}\r\n\t\treturn selected;\r\n\t}\r\n\r\n\ttoggleSelectedStates(filters, parent) {\r\n\t\tlet selected = false;\r\n\t\tif (filters) {\r\n\t\t\tselected = filters.reduce((p, c) => {\r\n\t\t\t\tconst childSelected = this.toggleSelectedStates(c.options, c);\r\n\t\t\t\treturn p || Boolean(parent && parent.has(c)) || childSelected;\r\n\t\t\t}, false);\r\n\t\t}\r\n\t\tif (parent) {\r\n\t\t\tparent.selected = selected;\r\n\t\t}\r\n\t\treturn selected;\r\n\t}\r\n\r\n\tserialize(filters) {\r\n\t\tlet params = {};\r\n\t\tlet any = false;\r\n\t\tfilters.forEach((filter) => {\r\n\t\t\tif (filter.values && filter.values.length > 0) {\r\n\t\t\t\tparams[filter.key + '-' + filter.value] = filter.values;\r\n\t\t\t\t// console.log('serialize', filter.values);\r\n\t\t\t\tany = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (!any) {\r\n\t\t\tparams = null;\r\n\t\t}\r\n\t\t// console.log('FilterMenuService.serialize', params);\r\n\t\tLocationService.serialize('filters', params);\r\n\t\treturn params;\r\n\t}\r\n\r\n\tgetParamsCount(params) {\r\n\t\tif (params) {\r\n\t\t\tconst paramsCount = Object.keys(params).reduce((p, c, i) => {\r\n\t\t\t\tconst values = params[c];\r\n\t\t\t\treturn p + (values ? values.length : 0);\r\n\t\t\t}, 0);\r\n\t\t\treturn paramsCount;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { combineLatest, fromEvent } from 'rxjs';\r\nimport { first, takeUntil, tap } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport FilterMenuService from '../filter/filter-menu.service';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService from '../modal/modal.service';\r\n\r\nconst srcMore = STATIC ? '/tiemme-com/services-bim-modal-more.html' : '/Viewdoc.cshtml?co_id=25206';\r\nconst srcHint = STATIC ? '/tiemme-com/services-bim-modal-hint.html' : '/Viewdoc.cshtml?co_id=25207';\r\n\r\nconst MAX_VISIBLE_ITEMS = 20;\r\n\r\nexport default class BimLibraryComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.filters = [];\r\n\t\tthis.items = [];\r\n\t\tthis.visibleItems = [];\r\n\t\tthis.filterService = new FilterMenuService();\r\n\t\tthis.maxVisibleItems = MAX_VISIBLE_ITEMS;\r\n\t\tthis.busy = false;\r\n\t\t// this.fake__();\r\n\t\tthis.load$().pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(data => {\r\n\t\t\t// console.log(data);\r\n\t\t\tthis.filterService.items$(data[0], data[1], (filter) => {\r\n\t\t\t\tswitch (filter.key) {\r\n\t\t\t\t\tcase 'feature':\r\n\t\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'extension':\r\n\t\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\t\treturn item.files.find(x => x.fileExtension === value);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(items => {\r\n\t\t\t\tthis.maxVisibleItems = MAX_VISIBLE_ITEMS;\r\n\t\t\t\tthis.items = items;\r\n\t\t\t\tthis.visibleItems = items.slice(0, this.maxVisibleItems);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t\t// console.log('BimLibrary01Component.items', items.length);\r\n\t\t\t});\r\n\t\t\tthis.scroll$().pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe();\r\n\t\t\tthis.filters = this.filterService.filters; // data[0].map(x => new FilterMenuItem(x));\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tscroll$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn fromEvent(window, 'scroll').pipe(\r\n\t\t\ttap(() => {\r\n\t\t\t\tif (this.items.length > this.visibleItems.length && !this.busy) {\r\n\t\t\t\t\tconst rect = node.getBoundingClientRect();\r\n\t\t\t\t\tif (rect.bottom < window.innerHeight) {\r\n\t\t\t\t\t\tthis.busy = true;\r\n\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.busy = false;\r\n\t\t\t\t\t\t\tthis.maxVisibleItems += MAX_VISIBLE_ITEMS;\r\n\t\t\t\t\t\t\tthis.visibleItems = this.items.slice(0, this.maxVisibleItems);\r\n\t\t\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tload$() {\r\n\t\treturn combineLatest(\r\n\t\t\tHttpService.get$('/api/bim/filters'),\r\n\t\t\tHttpService.get$('/api/bim/files')\r\n\t\t);\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tfilter.active = !filter.active;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\ttoggleMenuItem(filter, option) {\r\n\t\tif (filter.isMenuItem(option)) {\r\n\t\t\toption.toggleActive();\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\topenMore(event) {\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: srcMore, data: null }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('BimLibraryComponent.onRegister', event);\r\n\t\t});\r\n\t}\r\n\r\n\topenHint(event) {\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: srcHint, data: null }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('BimLibraryComponent.onRegister', event);\r\n\t\t});\r\n\t}\r\n\r\n\tfake__() {\r\n\t\tHttpService.get$('/api/bim/excel').pipe(\r\n\t\t\tfirst()\r\n\t\t).subscribe(items => {\r\n\t\t\tconst products = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tlet f = products.find(x => x.id === item.productId);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tf = {\r\n\t\t\t\t\t\tid: item.productId,\r\n\t\t\t\t\t\timage: item.image,\r\n\t\t\t\t\t\tcode: item.productCode,\r\n\t\t\t\t\t\ttitle: item.productName,\r\n\t\t\t\t\t\tfiles: [],\r\n\t\t\t\t\t\tfeatures: [item.category1Id, item.category2Id, item.category3Id],\r\n\t\t\t\t\t\timage: 'https://tiemmeraccorderie.wslabs.it/' + item.image,\r\n\t\t\t\t\t\tslug: 'https://tiemmeraccorderie.wslabs.it/it/prodotti/componenti-idraulici/tubi/tubi-multistrato-al-cobrapex/standard/0600/'\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (item.category4Id) {\r\n\t\t\t\t\t\tf.features.push(item.category4Id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tproducts.push(f);\r\n\t\t\t\t}\r\n\t\t\t\tif (!f.files.find(x => x.fileName === item.fileName)) {\r\n\t\t\t\t\tf.files.push({\r\n\t\t\t\t\t\tdescription: item.description,\r\n\t\t\t\t\t\tfileName: item.fileName,\r\n\t\t\t\t\t\tfileExtension: `.${item.fileName.split('.').pop()}`,\r\n\t\t\t\t\t\tfileSize: 45000,\r\n\t\t\t\t\t\turl: 'https://tiemmeraccorderie.wslabs.it/media/files/' + item.fileName,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log('products', JSON.stringify(products));\r\n\t\t\tconst families = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = families.find(x => x.value === item.category4Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tfamilies.push({\r\n\t\t\t\t\t\tvalue: item.category4Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category4Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tfamilies.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('families', JSON.stringify(families.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst solutions = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = solutions.find(x => x.value === item.category3Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tsolutions.push({\r\n\t\t\t\t\t\tvalue: item.category3Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category3Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsolutions.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('solutions', JSON.stringify(solutions.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst catalogues = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = catalogues.find(x => x.value === item.category2Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tcatalogues.push({\r\n\t\t\t\t\t\tvalue: item.category2Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category2Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcatalogues.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('catalogues', JSON.stringify(catalogues.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst departments = [];\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tconst f = departments.find(x => x.value === item.category1Id);\r\n\t\t\t\tif (!f) {\r\n\t\t\t\t\tdepartments.push({\r\n\t\t\t\t\t\tvalue: item.category1Id,\r\n\t\t\t\t\t\tlabel: this.titleCase__(item.category1Description),\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tf.count++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdepartments.sort(function(a, b) {\r\n\t\t\t\treturn (a.count - b.count) * -1;\r\n\t\t\t});\r\n\t\t\tconsole.log('departments', JSON.stringify(departments.map(x => {\r\n\t\t\t\tdelete x.count;\r\n\t\t\t\treturn x;\r\n\t\t\t})));\r\n\t\t\tconst menu = departments.map(d => {\r\n\t\t\t\tconst item = {\r\n\t\t\t\t\tvalue: d.value,\r\n\t\t\t\t\tlabel: d.label,\r\n\t\t\t\t\tkey: 'feature',\r\n\t\t\t\t\toptions: catalogues.filter(c => {\r\n\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1);\r\n\t\t\t\t\t}).map(c => {\r\n\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\tvalue: c.value,\r\n\t\t\t\t\t\t\tlabel: c.label,\r\n\t\t\t\t\t\t\tkey: 'feature',\r\n\t\t\t\t\t\t\toptions: solutions.filter(s => {\r\n\t\t\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1 && p.features.indexOf(s.value) !== -1);\r\n\t\t\t\t\t\t\t}).map(s => {\r\n\t\t\t\t\t\t\t\tlet item = {\r\n\t\t\t\t\t\t\t\t\tvalue: s.value,\r\n\t\t\t\t\t\t\t\t\tlabel: s.label,\r\n\t\t\t\t\t\t\t\t\tkey: 'feature',\r\n\t\t\t\t\t\t\t\t\toptions: families.filter(f => {\r\n\t\t\t\t\t\t\t\t\t\treturn products.find(p => p.features.indexOf(d.value) !== -1 && p.features.indexOf(c.value) !== -1 && p.features.indexOf(s.value) !== -1 && p.features.indexOf(f.value) !== -1);\r\n\t\t\t\t\t\t\t\t\t}).map(f => {\r\n\t\t\t\t\t\t\t\t\t\tconst item = {\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: f.value,\r\n\t\t\t\t\t\t\t\t\t\t\tlabel: f.label\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tif (item.options.length === 0) {\r\n\t\t\t\t\t\t\t\t\titem = {\r\n\t\t\t\t\t\t\t\t\t\tvalue: s.value,\r\n\t\t\t\t\t\t\t\t\t\tlabel: s.label\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\treturn item;\r\n\t\t\t});\r\n\t\t\tmenu.push({\r\n\t\t\t\t\"value\": null,\r\n\t\t\t\t\"label\": \"Estensione\",\r\n\t\t\t\t\"key\": \"extension\",\r\n\t\t\t\t\"options\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"value\": \".rte\",\r\n\t\t\t\t\t\t\"label\": \".rte\"\r\n\t\t\t\t\t  },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"value\": \".rfa\",\r\n\t\t\t\t\t\t\"label\": \".rfa\"\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t]\r\n\t\t\t});\r\n\t\t\tconsole.log('menu', JSON.stringify(menu));\r\n\t\t});\r\n\t}\r\n\r\n\ttitleCase__(str) {\r\n\t\treturn str.toLowerCase().split(' ').map(function(word) {\r\n\t\t\treturn (word.charAt(0).toUpperCase() + word.slice(1));\r\n\t\t}).join(' ');\r\n\t}\r\n\r\n}\r\n\r\nBimLibraryComponent.meta = {\r\n\tselector: '[bim-library]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter, shareReplay, takeUntil } from 'rxjs/operators';\r\n\r\nexport default class ClickOutsideDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node, parentInstance, selector } = getContext(this);\r\n\t\tconst event$ = this.event$ = fromEvent(document, 'click').pipe(\r\n\t\t\tfilter(event => {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, target, this.element.nativeElement.contains(target));\r\n\t\t\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(target) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t\t\t// console.log(target, documentContained);\r\n\t\t\t\tconst clickedInside = node.contains(target) || !document.contains(target);\r\n\t\t\t\tif (!clickedInside) {\r\n\t\t\t\t\tif (this.initialFocus) {\r\n\t\t\t\t\t\tthis.initialFocus = false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.initialFocus = true;\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t\tconst expression = node.getAttribute(`(clickOutside)`);\r\n\t\tif (expression) {\r\n\t\t\tconst outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\t\tevent$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\tmodule.resolve(outputFunction, parentInstance, event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tparentInstance.clickOutside$ = event$;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClickOutsideDirective.meta = {\r\n\tselector: `[(clickOutside)]`,\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ClubForgotComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('ClubForgotComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('ClubForgotComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('ClubForgotComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tUserService.retrieve$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('ClubForgotComponent.onSubmit', response);\r\n\t\t\t\t\tthis.sent.next(true);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ClubForgotComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nClubForgotComponent.meta = {\r\n\tselector: '[club-forgot]',\r\n\toutputs: ['sent', 'login', 'register'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalOutletComponent extends Component {\r\n\r\n\tget modal() {\r\n\t\treturn this.modal_;\r\n\t}\r\n\r\n\tset modal(modal) {\r\n\t\t// console.log('ModalOutletComponent set modal', modal, this);\r\n\t\tconst { module } = getContext(this);\r\n\t\tif (this.modal_ && this.modal_.node) {\r\n\t\t\tmodule.remove(this.modal_.node, this);\r\n\t\t\tthis.modalNode.removeChild(this.modal_.node);\r\n\t\t}\r\n\t\tif (modal && modal.node) {\r\n\t\t\tthis.modal_ = modal;\r\n\t\t\tthis.modalNode.appendChild(modal.node);\r\n\t\t\tconst instances = module.compile(modal.node);\r\n\t\t}\r\n\t\tthis.modal_ = modal;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.modalNode = node.querySelector('.modal-outlet__modal');\r\n\t\tModalService.modal$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(modal => {\r\n\t\t\tthis.modal = modal;\r\n\t\t});\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ModalComponent.onRegister');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ModalComponent.onLogin');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\treject(event) {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalOutletComponent.meta = {\r\n\tselector: '[modal-outlet]',\r\n\ttemplate: /* html */ `\r\n\t<div class=\"modal-outlet__container\" [class]=\"{ active: modal }\">\r\n\t\t<div class=\"modal-outlet__background\" (click)=\"reject($event)\"></div>\r\n\t\t<div class=\"modal-outlet__modal\"></div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ClubComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.views = {\r\n\t\t\tSIGN_IN: 1,\r\n\t\t\tSIGN_UP: 2,\r\n\t\t\tFORGOTTEN: 3,\r\n\t\t};\r\n\t\tthis.view = node.hasAttribute('view') ? parseInt(node.getAttribute('view')) : this.views.SIGN_IN;\r\n\t}\r\n\r\n\tonForgot(event) {\r\n\t\t// console.log('ClubComponent.onForgot');\r\n\t\tthis.view = this.views.FORGOTTEN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('ClubComponent.onLogin');\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('ClubComponent.onRegister');\r\n\t\tthis.view = this.views.SIGN_UP;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\tconsole.log('ClubComponent.onSignIn', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.club;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\tconsole.log('ClubComponent.onSignUp', user);\r\n\t\tUserService.setUser(user);\r\n\t\twindow.location.href = this.club;\r\n\t\t// nav to profile\r\n\t}\r\n\r\n\tonForgottenSent(email) {\r\n\t\t/*\r\n\t\tconsole.log('ClubComponent.onForgottenSent', email);\r\n\t\tthis.view = this.views.SIGN_IN;\r\n\t\tthis.pushChanges();\r\n\t\t*/\r\n\t}\r\n}\r\n\r\nClubComponent.meta = {\r\n\tselector: '[club]',\r\n\tinputs: ['club']\r\n};\r\n","import { getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from '../modal/modal.service';\r\nimport ClubComponent from './club.component';\r\n\r\nexport default class ClubModalComponent extends ClubComponent {\r\n\r\n\tonInit() {\r\n\t\tsuper.onInit();\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tconst data = parentInstance.modal.data;\r\n\t\t\tthis.view = data.view;\r\n\t\t\t// console.log('ClubModalComponent.onInit', data);\r\n\t\t}\r\n\t}\r\n\r\n\tonSignIn(user) {\r\n\t\t// console.log('ClubModalComponent.onSignIn', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\tonSignUp(user) {\r\n\t\t// console.log('ClubModalComponent.onSignUp', user);\r\n\t\tModalService.resolve(user);\r\n\t}\r\n\r\n\t/*\r\n\tonDestroy() {\r\n\t\t// console.log('ClubModalComponent.onDestroy');\r\n\t}\r\n\t*/\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nClubModalComponent.meta = {\r\n\tselector: '[club-modal]'\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, FormValidator, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ClubPasswordEditComponent extends Component {\r\n\r\n\tonInit() {\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tnewPassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewPasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), this.MatchValidator('newPassword')]),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('ClubPasswordEditComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\t// user 'rpiemonti@websolute.it'\r\n\t\tthis.form.patch({\r\n\t\t\tnewPassword: 'npword',\r\n\t\t\tnewPasswordConfirm: 'npword',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tMatchValidator(fieldName) {\r\n\t\treturn new FormValidator((value) => {\r\n\t\t\tconst field = this.form ? this.form.get(fieldName) : null;\r\n\t\t\tif (!value || !field) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('ClubPasswordEditComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t // Lo ri-imposto perch essendoci il campo password Chrome fa l'autocomplete dei dati, e riempie il campo checkField con l'username\r\n\t\t\tthis.form.patch({\r\n\t\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\t\tcheckField: ''\r\n\t\t\t});\r\n\t\t\t// console.log('ClubPasswordEditComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/users/editpassword', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('ClubPasswordEditComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t// this.update.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ClubPasswordEditComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClubPasswordEditComponent.meta = {\r\n\tselector: '[club-password-edit]',\r\n\t//outputs: ['update'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, FormValidator, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class ClubPasswordRecoveryComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tnewPassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tnewPasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), this.MatchValidator('newPassword')]),\r\n\t\t\ttokenEncoded: window.tokenEncoded,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('ClubPasswordComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\t// user 'rpiemonti@websolute.it'\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tnewPassword: 'npword',\r\n\t\t\tnewPasswordConfirm: 'npword',\r\n\t\t\ttokenEncoded: 'TESTLOCAL',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tMatchValidator(fieldName) {\r\n\t\treturn new FormValidator((value) => {\r\n\t\t\tconst field = this.form ? this.form.get(fieldName) : null;\r\n\t\t\tif (!value || !field) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('ClubPasswordComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('ClubPasswordComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/users/resetpassword', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('ClubPasswordRecoveryComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t// this.update.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ClubPasswordRecoveryComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClubPasswordRecoveryComponent.meta = {\r\n\tselector: '[club-password-recovery]',\r\n\t//outputs: ['update'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, FormValidator, Validators } from 'rxcomp-form';\r\nimport { of } from 'rxjs';\r\nimport { catchError, takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ClubProfileComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: [],\r\n\t\t}\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\trole: null,\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\taddress: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tzipCode: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcity: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\ttelephone: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tfax: null,\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t/*\r\n\t\t\t// password autogenerata\r\n\t\t\tusername: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), this.MatchValidator('password')]),\r\n\t\t\t*/\r\n\t\t\t// privacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: null,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('ClubProfileComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\r\n\t\tUserService.me$().pipe(\r\n\t\t\tcatchError(() => of (null)),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.form.patch(user);\r\n\t\t});\r\n\t}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('ClubProfileComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\taddress: 'Strada della Campanara',\r\n\t\t\tzipCode: '15',\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\ttelephone: '00390721411112',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t/*\r\n\t\t\t// password autogenerata\r\n\t\t\tusername: 'username',\r\n\t\t\tpassword: 'password',\r\n\t\t\tpasswordConfirm: 'password',\r\n\t\t\t*/\r\n\t\t\t// privacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tMatchValidator(fieldName) {\r\n\t\treturn new FormValidator((value) => {\r\n\t\t\tconst field = this.form ? this.form.get(fieldName) : null;\r\n\t\t\tif (!value || !field) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('ClubProfileComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('ClubProfileComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tUserService.update(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('ClubProfileComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\tthis.update.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ClubProfileComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nClubProfileComponent.meta = {\r\n\tselector: '[club-profile]',\r\n\toutputs: ['update'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ClubSigninComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\tinterests: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tpassword: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('ClubSigninComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tpassword: 'password',\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('ClubSigninComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('ClubSigninComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Login', this.form.value)\r\n\t\t\tUserService.login$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('ClubSigninComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\t// this.form.reset();\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t\tthis.signIn.next(typeof response === 'string' ? { status: response } : response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ClubSigninComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonForgot() {\r\n\t\tthis.forgot.next();\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.register.next();\r\n\t}\r\n\r\n}\r\n\r\nClubSigninComponent.meta = {\r\n\tselector: '[club-signin]',\r\n\toutputs: ['signIn', 'forgot', 'register'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, FormValidator, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ClubSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: [],\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\trole: null,\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\taddress: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tzipCode: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcity: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\ttelephone: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tfax: null,\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t/*\r\n\t\t\t// password autogenerata\r\n\t\t\tusername: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), this.MatchValidator('password')]),\r\n\t\t\t*/\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: null,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('ClubSignupComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('ClubSignupComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\taddress: 'Strada della Campanara',\r\n\t\t\tzipCode: '15',\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\ttelephone: '00390721411112',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t/*\r\n\t\t\tusername: 'username',\r\n\t\t\tpassword: 'password',\r\n\t\t\tpasswordConfirm: 'password',\r\n\t\t\t*/\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tMatchValidator(fieldName) {\r\n\t\treturn new FormValidator((value) => {\r\n\t\t\tconst field = this.form ? this.form.get(fieldName) : null;\r\n\t\t\tif (!value || !field) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('ClubSignupComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('ClubSignupComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Register', this.form.value)\r\n\t\t\tUserService.register$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('ClubSignupComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Registrazione Tiemme Club'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\t// this.signUp.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('ClubSignupComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.form.submitted = false;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonLogin() {\r\n\t\tthis.login.next();\r\n\t}\r\n\r\n}\r\n\r\nClubSignupComponent.meta = {\r\n\tselector: '[club-signup]',\r\n\t//outputs: ['signUp', 'login'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nexport default class DownloadsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconsole.log(this.downloads);\r\n\t\tthis.items = window[this.downloads];\r\n\t\tthis.control = new FormControl(this.items[0].id);\r\n\t\tthis.control.options = this.items;\r\n\t\tthis.control.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(changes => this.pushChanges());\r\n\t}\r\n\r\n}\r\n\r\nDownloadsComponent.meta = {\r\n\tselector: '[downloads]',\r\n\tinputs: ['downloads']\r\n};\r\n","import { Directive, getContext } from \"rxcomp\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport DropdownDirective from \"./dropdown.directive\";\r\n\r\nexport default class DropdownItemDirective extends Directive {\r\n\r\n\tget id() {\r\n\t\treturn this['dropdown-item'];\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('dropdown-item');\r\n\t\tDropdownDirective.dropdown$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(id => {\r\n\t\t\t// console.log('DropdownItemDirective', id, this['dropdown-item']);\r\n\t\t\tif (this.id === id) {\r\n\t\t\t\tnode.classList.add('dropped');\r\n\t\t\t} else {\r\n\t\t\t\tnode.classList.remove('dropped');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nDropdownItemDirective.meta = {\r\n\tselector: '[dropdown-item], [[dropdown-item]]',\r\n\tinputs: ['dropdown-item']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport FilterMenuItem from './filter-menu-item';\r\n\r\nexport default class FilterMenuItemComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\t// console.log('FilterMenuItemComponent.onInit', this);\r\n\t}\r\n\r\n\ttoggleActive(option) {\r\n\t\tif (option instanceof FilterMenuItem) {\r\n\t\t\toption.toggleActive();\r\n\t\t\tthis.pushChanges();\r\n\t\t} else {\r\n\t\t\tthis.filter.toggle(option);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nFilterMenuItemComponent.meta = {\r\n\tselector: '[menu-item]',\r\n\tinputs: ['filter', 'item'],\r\n\ttemplate: /* html */ `\r\n\t\t<span class=\"option\" [class]=\"{ active: filter.has(item), disabled: item.disabled, selected: item.selected }\">\r\n\t\t\t<span class=\"checkbox\" (click)=\"filter.toggle(item)\"></span>\r\n\t\t\t<span class=\"name\" [class]=\"{ menu: filter.isMenuItem(item), active: item.active }\" (click)=\"toggleActive(item)\" [innerHTML]=\"item.label\"></span>\r\n\t\t\t<span class=\"count\" [innerHTML]=\"item.count || ''\"></span>\r\n\t\t</span>\r\n\t\t<ul class=\"nav--options\" *if=\"filter.isMenuItem(item) && (item.active)\">\r\n\t\t\t<li class=\"nav--options__menu\" menu-item [filter]=\"item\" [item]=\"option\" *for=\"let option of item.options\"></li>\r\n\t\t</ul>\r\n\t`\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\n\r\nexport default class ControlComponent extends Component {\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst control = this.control;\r\n\t\tconst flags = control.flags;\r\n\t\tObject.keys(flags).forEach((key) => {\r\n\t\t\tflags[key] ? node.classList.add(key) : node.classList.remove(key);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nControlComponent.meta = {\r\n\tselector: '[control]',\r\n\tinputs: ['control']\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlCheckboxComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlCheckboxComponent.meta = {\r\n\tselector: '[control-checkbox]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--checkbox\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label>\r\n\t\t\t\t<input type=\"checkbox\" class=\"control--checkbox\" [formControl]=\"control\" [value]=\"true\" />\r\n\t\t\t\t<span [innerHTML]=\"label | html\"></span>\r\n\t\t\t</label>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import { fromEvent } from 'rxjs';\r\nimport { filter, map, shareReplay } from 'rxjs/operators';\r\n\r\nexport default class KeyboardService {\r\n\r\n\tstatic keydown$() {\r\n\t\treturn fromEvent(window, 'keydown').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic keyup$() {\r\n\t\treturn fromEvent(window, 'keyup').pipe(\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tstatic typing$() {\r\n\t\tlet typing = '',\r\n\t\t\tto;\r\n\t\treturn this.key$().pipe(\r\n\t\t\tmap(key => {\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tclearTimeout(to);\r\n\t\t\t\t}\r\n\t\t\t\ttyping += key;\r\n\t\t\t\tto = setTimeout(() => {\r\n\t\t\t\t\ttyping = '';\r\n\t\t\t\t}, 1500);\r\n\t\t\t\treturn typing;\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n\tstatic key$() {\r\n\t\tconst regexp = /\\w/;\r\n\t\treturn this.keydown$().pipe(\r\n\t\t\tfilter(event => event.key && event.key.match(regexp)),\r\n\t\t\tmap(event => event.key),\r\n\t\t\tshareReplay(1)\r\n\t\t)\r\n\t}\r\n\r\n}\r\n","import { getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport KeyboardService from '../keyboard/keyboard.service';\r\nimport ControlComponent from './control.component';\r\n\r\nexport default class ControlCustomSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tscrollToWord(word) {\r\n\t\t// console.log('ControlCustomSelectComponent.scrollToWord', word);\r\n\t\tconst items = this.control.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\t// console.log(word, x.name);\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scrollTo(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\tsetOption(item) {\r\n\t\tthis.control.value = item.id;\r\n\t\t// DropdownDirective.dropdown$.next(null);\r\n\t}\r\n\t*/\r\n\r\n\tsetOption(item) {\r\n\t\tconsole.log('setOption', item, this.isMultiple);\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst value = this.control.value || [];\r\n\t\t\tconst index = value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\t// if (value.length > 1) {\r\n\t\t\t\tvalue.splice(index, 1);\r\n\t\t\t\t// }\r\n\t\t\t} else {\r\n\t\t\t\tvalue.push(item.id);\r\n\t\t\t}\r\n\t\t\tthis.control.value = value.length ? value.slice() : null;\r\n\t\t} else {\r\n\t\t\tthis.control.value = item.id;\r\n\t\t\t// DropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.isMultiple) {\r\n\t\t\tconst values = this.control.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.control.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('ControlCustomSelectComponent.onDropped', id);\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.control.value;\r\n\t\tconst items = this.control.options || [];\r\n\t\tif (this.isMultiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.labels.select;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\t// console.log($event);\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t}\r\n\r\n\t/*\r\n\tonClick(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.add('dropped');\r\n\t}\r\n\t*/\r\n\r\n\t/*\r\n\tonClickOutside(event) {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.querySelector('.dropdown').classList.remove('dropped');\r\n\t}\r\n\t*/\r\n\r\n\tget isMultiple() {\r\n\t\treturn this.multiple && this.multiple !== false && this.multiple !== 'false';\r\n\t}\r\n\r\n}\r\n\r\nControlCustomSelectComponent.meta = {\r\n\tselector: '[control-custom-select]',\r\n\tinputs: ['control', 'label', 'multiple'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length, multiple: isMultiple }\" [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--select\" [innerHTML]=\"getLabel()\"></span>\r\n\t\t\t<svg class=\"icon icon--caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: isMultiple }\">\r\n\t\t\t<li *for=\"let item of control.options\" (click)=\"setOption(item)\"><span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name\"></span></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n\t/*  (click)=\"onClick($event)\" (clickOutside)=\"onClickOutside($event)\" */\r\n\t/*  <!-- <div class=\"dropdown\" [class]=\"{ dropped: dropped }\"> --> */\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlEmailComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t}\r\n\r\n}\r\n\r\nControlEmailComponent.meta = {\r\n\tselector: '[control-email]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" required email />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlFileComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.file = null;\r\n\t\tthis.required = false;\r\n\t\tthis.onReaderComplete = this.onReaderComplete.bind(this);\r\n\t}\r\n\r\n\tonInputDidChange(event) {\r\n\t\tconst input = event.target;\r\n\t\tconst file = input.files[0];\r\n\t\tthis.file = {\r\n\t\t\tname: file.name,\r\n\t\t\tlastModified: file.lastModified,\r\n\t\t\tlastModifiedDate: file.lastModifiedDate,\r\n\t\t\tsize: file.size,\r\n\t\t\ttype: file.type,\r\n\t\t}\r\n\t\tconst reader = new FileReader();\r\n\t\treader.addEventListener('load', this.onReaderComplete);\r\n\t\treader.readAsDataURL(file);\r\n\t\t// reader.readAsArrayBuffer() // Starts reading the contents of the specified Blob, once finished, the result attribute contains an ArrayBuffer representing the file's data.\r\n\t\t// reader.readAsBinaryString() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the raw binary data from the file as a string.\r\n\t\t// reader.readAsDataURL() // Starts reading the contents of the specified Blob, once finished, the result attribute contains a data: URL representing the file's data.\r\n\t\t// reader.readAsText() // Starts reading the contents of the specified Blob, once finished, the result attribute contains the contents of the file as a text string. An optional encoding name can be specified.\r\n\t}\r\n\r\n\tonReaderComplete(event) {\r\n\t\tconst content = event.target.result;\r\n\t\tthis.file.content = content;\r\n\t\tthis.control.value = this.file;\r\n\t\t// console.log('ControlFileComponent.onReaderComplete', this.file);\r\n\t\t// image/*,\r\n\t}\r\n\r\n}\r\n\r\nControlFileComponent.meta = {\r\n\tselector: '[control-file]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--file\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label for=\"file\" [innerHTML]=\"label\"></label>\r\n\t\t\t<span class=\"control--select\" [innerHTML]=\"file?.name || labels.select_file\"></span>\r\n\t\t\t<svg class=\"icon icon--upload\"><use xlink:href=\"#upload\"></use></svg>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t\t<input name=\"file\" type=\"file\" accept=\".pdf,.doc,.docx,*.txt\" class=\"control--file\" (change)=\"onInputDidChange($event)\" />\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlPasswordComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlPasswordComponent.meta = {\r\n\tselector: '[control-password]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"password\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlSelectComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n}\r\n\r\nControlSelectComponent.meta = {\r\n\tselector: '[control-select]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--select\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<select class=\"control--select\" [formControl]=\"control\" required>\r\n\t\t\t\t<option value=\"\">{{labels.select}}</option>\r\n\t\t\t\t<option [value]=\"item.id\" *for=\"let item of control.options\" [innerHTML]=\"item.name\"></option>\r\n\t\t\t</select>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t\t<svg class=\"icon icon--caret-down\"><use xlink:href=\"#caret-down\"></use></svg>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextComponent.meta = {\r\n\tselector: '[control-text]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<input type=\"text\" class=\"control--text\" [formControl]=\"control\" [placeholder]=\"label\" />\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ControlTextareaComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.label = 'label';\r\n\t\tthis.required = false;\r\n\t}\r\n\r\n}\r\n\r\nControlTextareaComponent.meta = {\r\n\tselector: '[control-textarea]',\r\n\tinputs: ['control', 'label'],\r\n\ttemplate: /* html */ `\r\n\t\t<div class=\"group--form--textarea\" [class]=\"{ required: control.validators.length }\">\r\n\t\t\t<label [innerHTML]=\"label\"></label>\r\n\t\t\t<textarea class=\"control--text\" [formControl]=\"control\" [innerHTML]=\"label\" rows=\"4\"></textarea>\r\n\t\t\t<span class=\"required__badge\">required</span>\r\n\t\t</div>\r\n\t\t<errors-component [control]=\"control\"></errors-component>\r\n\t`\r\n};\r\n","import ControlComponent from './control.component';\r\n\r\nexport default class ErrorsComponent extends ControlComponent {\r\n\r\n\tonInit() {\r\n\t\tthis.labels = window.labels || {};\r\n\t}\r\n\r\n\tgetLabel(key, value) {\r\n\t\tconst label = this.labels[`error_${key}`];\r\n\t\treturn label;\r\n\t}\r\n\r\n}\r\n\r\nErrorsComponent.meta = {\r\n\tselector: 'errors-component',\r\n\tinputs: ['control'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"inner\" [style]=\"{ display: control.invalid && control.touched ? 'block' : 'none' }\">\r\n\t\t<div class=\"error\" *for=\"let [key, value] of control.errors\">\r\n\t\t\t<span [innerHTML]=\"getLabel(key, value)\"></span>\r\n\t\t\t<!-- <span class=\"key\" [innerHTML]=\"key\"></span> <span class=\"value\" [innerHTML]=\"value | json\"></span> -->\r\n\t\t</div>\r\n\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { ENV } from '../environment/environment';\r\n\r\nexport default class TestComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.env = ENV;\r\n\t}\r\n\r\n\tonTest(event) {\r\n\t\tthis.test.next(event);\r\n\t}\r\n\r\n\tonReset(event) {\r\n\t\tthis.reset.next(event);\r\n\t}\r\n\r\n}\r\n\r\nTestComponent.meta = {\r\n\tselector: 'test-component',\r\n\tinputs: ['form'],\r\n\toutputs: ['test', 'reset'],\r\n\ttemplate: /* html */ `\r\n\t<div class=\"group--form--results\" *if=\"env.DEVELOPMENT\">\r\n\t\t<code [innerHTML]=\"form.value | json\"></code>\r\n\t\t<button type=\"button\" class=\"btn--link\" (click)=\"onTest($event)\"><span>test</span></button>\r\n\t\t<button type=\"button\" class=\"btn--link\" (click)=\"onReset($event)\"><span>reset</span></button>\r\n\t</div>\r\n\t`\r\n};\r\n","import { fromEvent } from \"rxjs\";\r\nimport { map, startWith, tap } from \"rxjs/operators\";\r\n\r\nexport default class CssService {\r\n\r\n\tstatic height$() {\r\n\t\tconst style = document.documentElement.style;\r\n\t\treturn fromEvent(window, 'resize').pipe(\r\n\t\t\tmap(event => window.innerHeight),\r\n\t\t\tstartWith(window.innerHeight),\r\n\t\t\ttap(height => {\r\n\t\t\t\t// First we get the viewport height and we multiple it by 1% to get a value for a vh unit\r\n\t\t\t\tlet vh = height * 0.01;\r\n\t\t\t\t// Then we set the value in the --vh custom property to the root of the document\r\n\t\t\t\tstyle.setProperty('--vh', `${vh}px`);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import { Component } from 'rxcomp';\r\nimport { of } from 'rxjs';\r\nimport { catchError, takeUntil } from 'rxjs/operators';\r\nimport CssService from '../css/css.service';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class HeaderComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.menu = null;\r\n\t\tthis.submenu = null;\r\n\t\tthis.user = null;\r\n\t\tUserService.user$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tUserService.me$().pipe(\r\n\t\t\tcatchError(() => of (null)),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tconsole.log('user', user);\r\n\t\t});\r\n\t\tCssService.height$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(height => {\r\n\t\t\t// console.log('HeaderComponent.height$', height);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleMenu($event) {\r\n\t\tthis.menu = this.menu !== $event ? $event : null;\r\n\t\t// console.log('toggleMenu', this.menu);\r\n\t\tconst body = document.querySelector('body');\r\n\t\tthis.menu ? body.classList.add('fixed') : body.classList.remove('fixed');\r\n\t\tthis.submenu = null;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonDropped(id) {\r\n\t\t// console.log('HeaderComponent.onDropped', id);\r\n\t\tthis.submenu = id;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nHeaderComponent.meta = {\r\n\tselector: 'header',\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\n/*\r\n['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n['\"', '&', ''', '<', '>', ' ', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '&', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];\r\n*/\r\n\r\nexport default class HtmlPipe extends Pipe {\r\n\r\n\tstatic transform(value) {\r\n\t\tif (value) {\r\n\t\t\tvalue = value.replace(/&#(\\d+);/g, function(m, n) {\r\n\t\t\t\treturn String.fromCharCode(parseInt(n));\r\n\t\t\t});\r\n\t\t\tconst escapes = ['quot', 'amp', 'apos', 'lt', 'gt', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'amp', 'bull', 'deg', 'infin', 'permil', 'sdot', 'plusmn', 'dagger', 'mdash', 'not', 'micro', 'perp', 'par', 'euro', 'pound', 'yen', 'cent', 'copy', 'reg', 'trade', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega'];\r\n\t\t\tconst unescapes = ['\"', '&', '\\'', '<', '>', ' ', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '&', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];\r\n\t\t\tconst rx = new RegExp(`(&${escapes.join(';)|(&')};)`, 'g');\r\n\t\t\tvalue = value.replace(rx, function() {\r\n\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\r\n\t\t\t\t\tif (arguments[i]) {\r\n\t\t\t\t\t\t// console.log(arguments[i], unescapes[i - 1]);\r\n\t\t\t\t\t\treturn unescapes[i - 1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// console.log(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nHtmlPipe.meta = {\r\n\tname: 'html',\r\n};\r\n","import { fromEvent, of } from 'rxjs';\r\nimport { filter, finalize, first, map } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\n\r\nconst PATH = STATIC ? './' : '/Client/docs/';\r\n\r\nlet UID = 0;\r\n\r\nexport default class ImageService {\r\n\r\n\tstatic worker() {\r\n\t\tif (!this.worker_) {\r\n\t\t\tthis.worker_ = new Worker(`${PATH}js/workers/image.service.worker.js`);\r\n\t\t}\r\n\t\treturn this.worker_;\r\n\t}\r\n\r\n\tstatic load$(src) {\r\n\t\tif (!('Worker' in window) || this.isBlob(src) || this.isCors(src)) {\r\n\t\t\treturn of(src);\r\n\t\t}\r\n\t\tconst id = ++UID;\r\n\t\tconst worker = this.worker();\r\n\t\tworker.postMessage({ src, id });\r\n\t\treturn fromEvent(worker, 'message').pipe(\r\n\t\t\tfilter(event => event.data.src === src),\r\n\t\t\tmap(event => {\r\n\t\t\t\tconst url = URL.createObjectURL(event.data.blob);\r\n\t\t\t\treturn url;\r\n\t\t\t}),\r\n\t\t\tfirst(),\r\n\t\t\tfinalize(url => {\r\n\t\t\t\tworker.postMessage({ id });\r\n\t\t\t\tif (url) {\r\n\t\t\t\t\tURL.revokeObjectURL(url);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tstatic isCors(src) {\r\n\t\treturn src.indexOf('//') !== -1 && src.indexOf(window.location.host) === -1;\r\n\t}\r\n\r\n\tstatic isBlob(src) {\r\n\t\treturn src.indexOf('blob:') === 0;\r\n\t}\r\n\r\n}\r\n","export default class LazyCache {\r\n\tstatic get cache() {\r\n\t\tif (!this.cache_) {\r\n\t\t\tthis.cache_ = {};\r\n\t\t}\r\n\t\treturn this.cache_;\r\n\t}\r\n\r\n\tstatic get(src) {\r\n\t\treturn this.cache[src];\r\n\t}\r\n\r\n\tstatic set(src, blob) {\r\n\t\tthis.cache[src] = blob;\r\n\t\tconst keys = Object.keys(this.cache);\r\n\t\tif (keys.length > 100) {\r\n\t\t\tthis.remove(keys[0]);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic remove(src) {\r\n\t\tdelete this.cache[src];\r\n\t}\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { of , Subject } from 'rxjs';\r\nimport { distinctUntilChanged, first, switchMap, takeUntil } from 'rxjs/operators';\r\nimport ImageService from '../image/image.service';\r\nimport IntersectionService from '../intersection/intersection.service';\r\nimport LazyCache from './lazy.cache';\r\n\r\nexport default class LazyDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('lazy');\r\n\t\tthis.input$ = new Subject().pipe(\r\n\t\t\tdistinctUntilChanged(),\r\n\t\t\tswitchMap(input => {\r\n\t\t\t\tconst src = LazyCache.get(input);\r\n\t\t\t\tif (src) {\r\n\t\t\t\t\treturn of(src);\r\n\t\t\t\t}\r\n\t\t\t\tnode.classList.remove('lazyed');\r\n\t\t\t\treturn this.lazy$(input);\r\n\t\t\t}),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t);\r\n\t\tthis.input$.subscribe(src => {\r\n\t\t\tLazyCache.set(this.lazy, src);\r\n\t\t\tnode.setAttribute('src', src);\r\n\t\t\tnode.classList.add('lazyed');\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.input$.next(this.lazy);\r\n\t}\r\n\r\n\tlazy$(input) {\r\n\t\tconst { node } = getContext(this);\r\n\t\treturn IntersectionService.intersection$(node).pipe(\r\n\t\t\tfirst(),\r\n\t\t\tswitchMap(() => ImageService.load$(input)),\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nLazyDirective.meta = {\r\n\tselector: '[lazy],[[lazy]]',\r\n\tinputs: ['lazy']\r\n};\r\n","import { Component } from 'rxcomp';\r\n\r\nexport default class MainMenuComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.sticky = false;\r\n\t}\r\n\r\n\tonToggleSticky(event) {\r\n\t\tthis.sticky = !this.sticky;\r\n\t\tconst body = document.querySelector('body');\r\n\t\tthis.sticky ? body.classList.add('fixed') : body.classList.remove('fixed');\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonSearch(url, query) {\r\n\t\tconsole.log(query);\r\n\t\twindow.location.href = `${url}?txtSiteSearch=${query}`;\r\n\t}\r\n}\r\n\r\nMainMenuComponent.meta = {\r\n\tselector: '[main-menu]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\n\r\nexport default class MediaLibraryComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst items = this.items = window.medias || [];\r\n\t\tconst filters = window.filters || {};\r\n\t\tconst initialParams = window.params || {};\r\n\t\tfilters.departments.mode = FilterMode.OR;\r\n\t\tfilters.languages.mode = FilterMode.OR;\r\n\t\tfilters.categories.mode = FilterMode.OR;\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'languages':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.languages.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'categories':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.category === value;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t\tconsole.log('MediaLibraryComponent.items', items.length);\r\n\t\t});\r\n\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nMediaLibraryComponent.meta = {\r\n\tselector: '[media-library]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport ModalOutletComponent from '../modal/modal-outlet.component';\r\nimport ModalService from './modal.service';\r\n\r\nexport default class ModalComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst { parentInstance } = getContext(this);\r\n\t\tif (parentInstance instanceof ModalOutletComponent) {\r\n\t\t\tthis.data = parentInstance.modal.data;\r\n\t\t}\r\n\t}\r\n\r\n\tclose() {\r\n\t\tModalService.reject();\r\n\t}\r\n\r\n}\r\n\r\nModalComponent.meta = {\r\n\tselector: '[modal]'\r\n};\r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { STATIC } from '../environment/environment';\r\n\r\nexport default class NaturalFormService {\r\n\r\n\tstatic get values() {\r\n\t\tconst values = {};\r\n\t\tconst form = this.form;\r\n\t\tconst phrase = this.phrase;\r\n\t\tObject.keys(this.form).forEach(key => {\r\n\t\t\tif (phrase.indexOf(`$${key}$`) !== -1) {\r\n\t\t\t\tvalues[key] = form[key].value;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn values;\r\n\t}\r\n\r\n\tstatic set form(form) {\r\n\t\tthis.form$.next(form);\r\n\t}\r\n\r\n\tstatic get form() {\r\n\t\treturn this.form$.getValue();\r\n\t}\r\n\r\n\tstatic get phrase() {\r\n\t\tconst form = this.form;\r\n\t\t// console.log('NaturalFormService.set phrase form', form);\r\n\t\tlet action = form.action.options.find(x => x.id === form.action.value);\r\n\t\tif (!action) {\r\n\t\t\taction = form.action.options[0];\r\n\t\t}\r\n\t\treturn action.phrase;\r\n\t}\r\n\r\n\tstatic get title() {\r\n\t\tlet phrase = this.phrase;\r\n\t\tconst form = this.form;\r\n\t\tObject.keys(form).forEach(key => {\r\n\t\t\tlet label;\r\n\t\t\tconst filter = this.form[key];\r\n\t\t\tlet value = filter.value;\r\n\t\t\tconst items = filter.options || [];\r\n\t\t\tif (filter.multiple) {\r\n\t\t\t\tvalue = value || [];\r\n\t\t\t\tif (value.length) {\r\n\t\t\t\t\tlabel = value.map(v => {\r\n\t\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t\t}).join(', ');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlabel = items.length ? '...' : filter.label;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\tlabel = item.name;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlabel = items.length ? '...' : filter.label;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tphrase = phrase.replace(`$${key}$`, label);\r\n\t\t});\r\n\t\treturn phrase;\r\n\t}\r\n\r\n\tstatic get clubProfileUrl() {\r\n\t\treturn this.form.club.profileUrl;\r\n\t}\r\n\r\n\tstatic get clubModalUrl() {\r\n\t\treturn STATIC ? '/tiemme-com/club-modal.html' : this.form.club.modalUrl;\r\n\t}\r\n\r\n\tstatic next(form) {\r\n\t\tthis.form = form || this.form; // setter & getter\r\n\t}\r\n\r\n\tstatic getDefaultValue() {\r\n\t\tconst form = window.naturalForm || {};\r\n\t\tObject.keys(form).forEach(key => {\r\n\t\t\tconst filter = form[key];\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'club':\r\n\t\t\t\tcase 'newsletter':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconst firstId = filter.options[0].id;\r\n\t\t\t\t\tfilter.value = filter.multiple ? [firstId] : firstId;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn form;\r\n\t}\r\n\r\n\tstatic get disabled() {\r\n\t\treturn false; // !!! return false until getDefaultValue set initial value\r\n\t\tlet disabled = false;\r\n\t\tconst values = this.values;\r\n\t\tObject.keys(values).forEach(key => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'club':\r\n\t\t\t\tcase 'newsletter':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdisabled = disabled || values[key] == undefined;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn disabled;\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormService.form$ = new BehaviorSubject(NaturalFormService.getDefaultValue()); // !!! static\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\nimport NaturalFormService from './natural-form.service';\r\n\r\nexport default class NaturalFormContactComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst values = NaturalFormService.values;\r\n\t\tthis.title = NaturalFormService.title;\r\n\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tinterests: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\trole: new FormControl(values.role, Validators.RequiredValidator()),\r\n\t\t\tinterests: new FormControl(values.interest, Validators.RequiredValidator()),\r\n\t\t\t//\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tmessage: null,\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: values.newsletter === 2 ? true : false,\r\n\t\t\tscope: window.location.hostname,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.interests.options = data.interests;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('NaturalFormContactComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\tonChanges(changes) {}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('NaturalFormContactComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tinterests: this.controls.interests.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('NaturalFormContactComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('NaturalFormContactComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t//HttpService.post$('/WS/wsUsers.asmx/Contact', { data: this.form.value })\r\n\t\t\tHttpService.post$('/api/users/Contact', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('NaturalFormContactComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Contatti Tiemme'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('NaturalFormContactComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonBack() {\r\n\t\tthis.back.next();\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormContactComponent.meta = {\r\n\tselector: '[natural-form-contact]',\r\n\toutputs: ['back'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport DropdownDirective from '../dropdown/dropdown.directive';\r\nimport KeyboardService from '../keyboard/keyboard.service';\r\n\r\nexport default class NaturalFormControlComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\t// console.log('NaturalFormControlComponent.onInit');\r\n\t\tthis.label = 'label';\r\n\t\tthis.labels = window.labels || {};\r\n\t\tthis.dropped = false;\r\n\t\tthis.dropdownId = DropdownDirective.nextId();\r\n\t\tKeyboardService.typing$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(word => {\r\n\t\t\tthis.scrollToWord(word);\r\n\t\t});\r\n\t\t/*\r\n\t\tKeyboardService.key$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(key => {\r\n\t\t\tthis.scrollToKey(key);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\t/*\r\n\tonChanges() {\r\n\t\tif (!this.filter.value) {\r\n\t\t\tconst firstId = this.filter.options[0].id;\r\n\t\t\tthis.filter.value = this.filter.multiple ? [firstId] : firstId;\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\tscrollToWord(word) {\r\n\t\tconst items = this.filter.options || [];\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\tconst x = items[i];\r\n\t\t\tif (x.name.toLowerCase().indexOf(word.toLowerCase()) === 0) {\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index !== -1) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\t\tconst navDropdown = node.querySelector('.nav--dropdown');\r\n\t\t\tconst item = navDropdown.children[index];\r\n\t\t\tdropdown.scroll(0, item.offsetTop);\r\n\t\t}\r\n\t}\r\n\r\n\tsetOption(item) {\r\n\t\t// console.log('setOption', item);\r\n\t\tif (this.filter.multiple) {\r\n\t\t\tthis.filter.value = this.filter.value || [];\r\n\t\t\tconst index = this.filter.value.indexOf(item.id);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tif (this.filter.value.length > 1) {\r\n\t\t\t\t\tthis.filter.value.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.filter.value.push(item.id);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.filter.value = item.id;\r\n\t\t\tDropdownDirective.dropdown$.next(null);\r\n\t\t}\r\n\t\tthis.pushChanges();\r\n\t\tthis.change.next(this.filter); // !!! for last, it may cause a destroy\r\n\t}\r\n\r\n\thasOption(item) {\r\n\t\tif (this.filter.multiple) {\r\n\t\t\tconst values = this.filter.value || [];\r\n\t\t\treturn values.indexOf(item.id) !== -1;\r\n\t\t} else {\r\n\t\t\treturn this.filter.value === item.id;\r\n\t\t}\r\n\t}\r\n\r\n\tgetLabel() {\r\n\t\tlet value = this.filter.value;\r\n\t\tconst items = this.filter.options || [];\r\n\t\t// console.log(value, this.filter);\r\n\t\tif (this.filter.multiple) {\r\n\t\t\tvalue = value || [];\r\n\t\t\tif (value.length) {\r\n\t\t\t\treturn value.map(v => {\r\n\t\t\t\t\tconst item = items.find(x => x.id === v || x.name === v);\r\n\t\t\t\t\treturn item ? item.name : '';\r\n\t\t\t\t}).join(', ');\r\n\t\t\t} else {\r\n\t\t\t\treturn '...'; // this.labels.select;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst item = items.find(x => x.id === value || x.name === value);\r\n\t\t\tif (item) {\r\n\t\t\t\treturn item.name;\r\n\t\t\t} else {\r\n\t\t\t\treturn '...'; // this.labels.select;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonDropped($event) {\r\n\t\tthis.dropped = $event === this.dropdownId;\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst dropdown = node.querySelector('.dropdown');\r\n\t\tif (dropdown) {\r\n\t\t\tdropdown.style.cssText = '';\r\n\t\t\tconst rect = dropdown.getBoundingClientRect();\r\n\t\t\tif (rect.left + rect.width > window.innerWidth - 15) {\r\n\t\t\t\tdropdown.style.cssText = `transform: translateX(${window.innerWidth - 15 - (rect.left + rect.width)}px);`;\r\n\t\t\t}\r\n\t\t\t// console.log(rect.left + rect.width, window.innerWidth - 15);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nNaturalFormControlComponent.meta = {\r\n\tselector: '[natural-form-control]',\r\n\tinputs: ['filter', 'label'],\r\n\toutputs: ['change'],\r\n\ttemplate: /* html */ `\r\n\t\t<span [dropdown]=\"dropdownId\" (dropped)=\"onDropped($event)\">\r\n\t\t\t<span class=\"label\" [innerHTML]=\"getLabel()\"></span>\r\n\t\t\t<svg class=\"icon icon--caret-right\"><use xlink:href=\"#caret-right\"></use></svg>\r\n\t\t</span>\r\n\t\t<div class=\"dropdown\" [dropdown-item]=\"dropdownId\">\r\n\t\t\t<div class=\"category\" [innerHTML]=\"label\"></div>\r\n\t\t\t<ul class=\"nav--dropdown\" [class]=\"{ multiple: filter.multiple }\">\r\n\t\t\t\t<li *for=\"let item of filter.options\" (click)=\"setOption(item)\"><span [class]=\"{ active: hasOption(item) }\" [innerHTML]=\"item.name\"></span></li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t`\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\nimport NaturalFormService from './natural-form.service';\r\n\r\nexport default class NaturalFormNewsletterComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst values = NaturalFormService.values;\r\n\t\tthis.title = NaturalFormService.title;\r\n\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tinterests: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\trole: new FormControl(values.role, Validators.RequiredValidator()),\r\n\t\t\tinterests: new FormControl(values.interest, Validators.RequiredValidator()),\r\n\t\t\t//\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: new FormControl(true, Validators.RequiredTrueValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.interests.options = data.interests;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('NaturalFormNewsletterComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tinterests: this.controls.interests.options[0].id,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('NaturalFormNewsletterComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('NaturalFormNewsletterComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t//HttpService.post$('/WS/wsUsers.asmx/Newsletter', { data: this.form.value })\r\n\t\t\tHttpService.post$('/api/users/Newsletter', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('NaturalFormNewsletterComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Iscrizione alla Newsletter'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('NaturalFormNewsletterComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonBack() {\r\n\t\tthis.back.next();\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormNewsletterComponent.meta = {\r\n\tselector: '[natural-form-newsletter]',\r\n\toutputs: ['back'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\nimport NaturalFormService from './natural-form.service';\r\n\r\nexport default class NaturalFormRequestInfoComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst values = NaturalFormService.values;\r\n\t\tthis.title = NaturalFormService.title;\r\n\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tinterests: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\trole: new FormControl(values.role, Validators.RequiredValidator()),\r\n\t\t\tinterests: new FormControl(values.interest, Validators.RequiredValidator()),\r\n\t\t\t//\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tmessage: null,\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: values.newsletter === 2 ? true : false,\r\n\t\t\tscope: window.location.hostname,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.interests.options = data.interests;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('NaturalFormRequestInfoComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\tonChanges(changes) {}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('NaturalFormRequestInfoComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tinterests: this.controls.interests.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('NaturalFormRequestInfoComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('NaturalFormRequestInfoComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t//HttpService.post$('/WS/wsUsers.asmx/Contact', { data: this.form.value })\r\n\t\t\tHttpService.post$('/api/users/RequestInfo', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('NaturalFormRequestInfoComponent.onSubmit', response);\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Contatti Tiemme'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('NaturalFormRequestInfoComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonBack() {\r\n\t\tthis.back.next();\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormRequestInfoComponent.meta = {\r\n\tselector: '[natural-form-request-info]',\r\n\toutputs: ['back'],\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport NaturalFormService from './natural-form.service';\r\n\r\nexport default class NaturalFormSearchComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\t// console.log('NaturalFormSearchComponent.onInit');\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('natural-form-search');\r\n\t\tNaturalFormService.form$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(form => {\r\n\t\t\tthis.naturalForm = form;\r\n\t\t\tthis.phrase = NaturalFormService.phrase;\r\n\t\t});\r\n\t}\r\n\r\n\tset phrase(phrase) {\r\n\t\tif (this.phrase_ !== phrase) {\r\n\t\t\tthis.phrase_ = phrase;\r\n\t\t\tconst { node, module } = getContext(this);\r\n\t\t\tconst contentNode = node.querySelector('.content');\r\n\t\t\tif (this.instances_) {\r\n\t\t\t\tmodule.remove(contentNode);\r\n\t\t\t}\r\n\t\t\tthis.instances_ = [];\r\n\t\t\t// const form = NaturalFormService.form;\r\n\t\t\t// console.log('NaturalFormSearchComponent.initControls', form);\r\n\t\t\tlet html = phrase;\r\n\t\t\tconst keys = Object.keys(this.naturalForm);\r\n\t\t\tkeys.forEach(key => {\r\n\t\t\t\t// console.log(key);\r\n\t\t\t\thtml = html.replace(`$${key}$`, () => {\r\n\t\t\t\t\tconst item = this.naturalForm[key];\r\n\t\t\t\t\tif (item.options) {\r\n\t\t\t\t\t\treturn /* html */ `\r\n\t\t\t\t\t\t\t<span class=\"natural-form__control\" natural-form-control [filter]=\"naturalForm.${key}\" [label]=\"naturalForm.${key}.label\" (change)=\"onNaturalForm($event)\"></span>\r\n\t\t\t\t\t\t`;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn /* html */ `<button type=\"button\" class=\"btn--club-form\" (click)=\"onClub($event)\"><span>Tiemme Club</span></button>`;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t// console.log('MoodboardSearchDirective', html);\r\n\t\t\tcontentNode.innerHTML = html;\r\n\t\t\tArray.from(contentNode.childNodes).forEach(node => {\r\n\t\t\t\tthis.instances_ = this.instances_.concat(module.compile(node, this));\r\n\t\t\t});\r\n\t\t\t/*\r\n\t\t\tconst hasFilter = Object.keys(scope.naturalForm).map(x => scope.naturalForm[x]).find(x => x.value !== null) !== undefined;\r\n\t\t\tif (!hasFilter) {\r\n\t\t\t\tthis.animateUnderlines_(node);\r\n\t\t\t}\r\n\t\t\tscope.animateOff_ = () => {\r\n\t\t\t\tthis.animateOff_(node);\r\n\t\t\t};\r\n\t\t\t*/\r\n\t\t}\r\n\t}\r\n\r\n\tonNaturalForm(event) {\r\n\t\tconst form = NaturalFormService.next();\r\n\t\tthis.change.next(form);\r\n\t}\r\n\r\n\tonClub(event) {\r\n\t\tthis.club.next(event);\r\n\t}\r\n\r\n\tanimateUnderlines_(node) {\r\n\t\tthis.animated = true;\r\n\t\tconst values = [...node.querySelectorAll('.moodboard__underline')];\r\n\t\tvalues.forEach(x => {\r\n\t\t\tgsap.set(x, { transformOrigin: '0 50%', scaleX: 0 });\r\n\t\t});\r\n\t\tlet i = -1;\r\n\t\tconst animate = () => {\r\n\t\t\ti++;\r\n\t\t\ti = i % values.length;\r\n\t\t\tconst u = values[i];\r\n\t\t\tgsap.set(u, { transformOrigin: '0 50%', scaleX: 0 });\r\n\t\t\tgsap.to(u, 0.50, {\r\n\t\t\t\tscaleX: 1,\r\n\t\t\t\ttransformOrigin: '0 50%',\r\n\t\t\t\tdelay: 0,\r\n\t\t\t\tease: Power3.easeInOut,\r\n\t\t\t\toverwrite: 'all',\r\n\t\t\t\tonComplete: () => {\r\n\t\t\t\t\tgsap.set(u, { transformOrigin: '100% 50%', scaleX: 1 });\r\n\t\t\t\t\tgsap.to(u, 0.50, {\r\n\t\t\t\t\t\tscaleX: 0,\r\n\t\t\t\t\t\ttransformOrigin: '100% 50%',\r\n\t\t\t\t\t\tdelay: 1.0,\r\n\t\t\t\t\t\tease: Power3.easeInOut,\r\n\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\tanimate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\tanimate();\r\n\t}\r\n\r\n\tanimateOff_(node) {\r\n\t\tif (this.animated) {\r\n\t\t\tthis.animated = false;\r\n\t\t\t// console.log('animateOff_');\r\n\t\t\t// gsap.killAll();\r\n\t\t\tconst values = [...node.querySelectorAll('.moodboard__underline')];\r\n\t\t\tgsap.set(values, { transformOrigin: '0 50%', scaleX: 0 });\r\n\t\t\tgsap.to(values, 0.50, {\r\n\t\t\t\tscaleX: 1,\r\n\t\t\t\ttransformOrigin: '0 50%',\r\n\t\t\t\tdelay: 0,\r\n\t\t\t\tease: Power3.easeInOut,\r\n\t\t\t\toverwrite: 'all',\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormSearchComponent.meta = {\r\n\tselector: '[natural-form-search]',\r\n\tinputs: ['naturalForm'],\r\n\toutputs: ['change', 'club']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, FormValidator, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\nimport NaturalFormService from './natural-form.service';\r\n\r\nexport default class NaturalFormSignupComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst values = NaturalFormService.values;\r\n\t\tthis.title = NaturalFormService.title;\r\n\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: [],\r\n\t\t}\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\trole: new FormControl(values.role, Validators.RequiredValidator()),\r\n\t\t\t//\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\taddress: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tzipCode: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcity: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\ttelephone: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tfax: null,\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\t/*\r\n\t\t\t// password autogenerata\r\n\t\t\tusername: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpassword: new FormControl(null, [Validators.RequiredValidator()]),\r\n\t\t\tpasswordConfirm: new FormControl(null, [Validators.RequiredValidator(), this.MatchValidator('password')]),\r\n\t\t\t*/\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: values.newsletter === 2 ? true : false,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('NaturalFormSignupComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('NaturalFormSignupComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\taddress: 'Strada della Campanara',\r\n\t\t\tzipCode: '15',\r\n\t\t\tcity: 'Pesaro',\r\n\t\t\ttelephone: '00390721411112',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\t/*\r\n\t\t\tusername: 'username',\r\n\t\t\tpassword: 'password',\r\n\t\t\tpasswordConfirm: 'password',\r\n\t\t\t*/\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\tMatchValidator(fieldName) {\r\n\t\treturn new FormValidator((value) => {\r\n\t\t\tconst field = this.form ? this.form.get(fieldName) : null;\r\n\t\t\tif (!value || !field) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value !== field.value ? { match: { value: value, match: field.value } } : null;\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('NaturalFormSignupComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('NaturalFormSignupComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/api/users/Register', this.form.value)\r\n\t\t\tUserService.register$(this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('NaturalFormSignupComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Registrazione Tiemme Club'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\tthis.signUp.next(response);\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('NaturalFormSignupComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n\tonBack() {\r\n\t\tthis.back.next();\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormSignupComponent.meta = {\r\n\tselector: '[natural-form-signup]',\r\n\toutputs: ['signUp', 'back'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\nimport NaturalFormService from './natural-form.service';\r\n\r\nexport default class NaturalFormComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.views = {\r\n\t\t\tNATURAL: 0,\r\n\t\t\tTECHNICAL: 1,\r\n\t\t\tCOMMERCIAL: 2,\r\n\t\t\tNEWSLETTER: 3,\r\n\t\t\tCLUB: 4,\r\n\t\t};\r\n\t\tthis.view = this.views.NATURAL;\r\n\t\tUserService.user$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\tNaturalFormService.form$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(form => {\r\n\t\t\t// console.log(NaturalFormService.values);\r\n\t\t\tthis.values = NaturalFormService.values;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t\t// console.log('NaturalFormComponent.onInit', this.naturalForm);\r\n\t}\r\n\r\n\tonClub(event) {\r\n\t\tif (this.user) {\r\n\t\t\twindow.location.href = NaturalFormService.clubProfileUrl;\r\n\t\t} else {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tconst src = STATIC ? '/tiemme-com/club-modal.html' : NaturalFormService.clubModalUrl;\r\n\t\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => {\r\n\t\t\t\t// console.log('RegisterOrLoginComponent.onRegister', event);\r\n\t\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\t\tthis.user = event.data;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonNext(event) {\r\n\t\tthis.view = NaturalFormService.values.action;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonBack(event) {\r\n\t\tthis.view = this.views.NATURAL;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tget disabled() {\r\n\t\treturn NaturalFormService.disabled;\r\n\t}\r\n\r\n}\r\n\r\nNaturalFormComponent.meta = {\r\n\tselector: '[natural-form]',\r\n\toutputs: ['club']\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { FilterMode } from '../filter/filter-item';\r\nimport FilterService from '../filter/filter.service';\r\n\r\nexport default class PriceListComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst items = window.pricelists || [];\r\n\t\tconst filters = window.filters || {};\r\n\t\tconst initialParams = window.params || {};\r\n\t\tfilters.departments.mode = FilterMode.OR;\r\n\t\tfilters.categories.mode = FilterMode.OR;\r\n\t\tconst filterService = new FilterService(filters, initialParams, (key, filter) => {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'categories':\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.category === value;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tfilter.filter = (item, value) => {\r\n\t\t\t\t\t\treturn item.features.indexOf(value) !== -1;\r\n\t\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t\tfilterService.items$(items).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$),\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t\t// console.log('PriceListComponent.items', items.length);\r\n\t\t});\r\n\r\n\t\tthis.filterService = filterService;\r\n\t\tthis.filters = filterService.filters;\r\n\t}\r\n\r\n\ttoggleFilter(filter) {\r\n\t\tObject.keys(this.filters).forEach(key => {\r\n\t\t\tconst f = this.filters[key];\r\n\t\t\tif (f === filter) {\r\n\t\t\t\tf.active = !f.active;\r\n\t\t\t} else {\r\n\t\t\t\tf.active = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nPriceListComponent.meta = {\r\n\tselector: '[price-list]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { STATIC } from '../environment/environment';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/tiemme-com/club-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class RegisterOrLoginComponent extends Component {\r\n\r\n\tonRegister(event) {\r\n\t\t// console.log('RegisterOrLoginComponent.onRegister');\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 2 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('RegisterOrLoginComponent.onRegister', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('RegisterOrLoginComponent.onLogin');\r\n\t\tevent.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('RegisterOrLoginComponent.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n}\r\n\r\nRegisterOrLoginComponent.meta = {\r\n\tselector: '[register-or-login]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\n/*\r\nMail\r\nLa mail di recap presenter i dati inseriti dallutente e come oggetto Richiesta Informazioni commerciali\r\n\r\nGenerazione Mail\r\n\tRomania > tiemmesystems@tiemme.com\r\n\tSpagna > tiemmesistemas@tiemme.com\r\n\tGrecia > customerservice.gr@tiemme.com\r\n\tAlbania, Kosovo, Serbia, Montenegro, Bulgaria > infobalkans@tiemme.com\r\n\tTutti gli altri > info@tiemme.com\r\n*/\r\n\r\nexport default class RequestInfoCommercialComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\troles: [],\r\n\t\t\tinterests: [],\r\n\t\t\tcountries: [],\r\n\t\t\tprovinces: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\tcompany: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\trole: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tinterests: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcountry: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tprovince: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tmessage: null,\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tnewsletter: null,\r\n\t\t\tscope: window.location.hostname,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: '',\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.role.options = data.roles;\r\n\t\tcontrols.interests.options = data.interests;\r\n\t\tcontrols.country.options = data.countries;\r\n\t\tcontrols.province.options = [];\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('RequestInfoCommercialComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.countryId = changes.country;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\tset countryId(countryId) {\r\n\t\tif (this.countryId_ !== countryId) {\r\n\t\t\t// console.log('RequestInfoCommercialComponent.set countryId', countryId);\r\n\t\t\tthis.countryId_ = countryId;\r\n\t\t\tconst provinces = this.data.provinces.filter(province => {\r\n\t\t\t\treturn String(province.idstato) === String(countryId);\r\n\t\t\t});\r\n\t\t\tthis.controls.province.options = provinces;\r\n\t\t\tthis.controls.province.hidden = provinces.length === 0;\r\n\t\t\tif (!provinces.find(x => x.id === this.controls.province.value)) {\r\n\t\t\t\tthis.controls.province.value = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\trole: this.controls.role.options[0].id,\r\n\t\t\tinterests: this.controls.interests.options[0].id,\r\n\t\t\tcountry: this.controls.country.options[0].id,\r\n\t\t\tprivacy: true,\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit(from) {\r\n\t\t// console.log('RequestInfoCommercialComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('RequestInfoCommercialComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\t// HttpService.post$('/WS/wsUsers.asmx/Contact', { data: this.form.value })\r\n\t\t\tHttpService.post$('/api/users/Contact', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('RequestInfoCommercialComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': (null == from ? 'Contatti Tiemme' : from)\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('RequestInfoCommercialComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nRequestInfoCommercialComponent.meta = {\r\n\tselector: '[request-info-commercial]',\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { of } from 'rxjs';\r\nimport { catchError, takeUntil } from 'rxjs/operators';\r\nimport UserService from '../user/user.service';\r\n\r\nexport default class ReservedAreaComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tUserService.me$().pipe(\r\n\t\t\tcatchError(() => of (null)),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(user => {\r\n\t\t\tthis.user = user;\r\n\t\t});\r\n\t}\r\n\r\n\tdoLogout(event) {\r\n\t\tUserService.logout$().subscribe(() => {\r\n\t\t\tthis.user = null;\r\n\t\t\twindow.location.href = '/';\r\n\t\t});\r\n\t}\r\n\r\n\tonProfileUpdate(event) {\r\n\r\n\t}\r\n\r\n\tonPasswordUpdate(event) {\r\n\r\n\t}\r\n\r\n}\r\n\r\nReservedAreaComponent.meta = {\r\n\tselector: '[reserved-area]',\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { shareReplay, takeUntil, tap } from 'rxjs/operators';\r\n\r\nexport default class ScrollToDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tthis.initialFocus = false;\r\n\t\tconst { module, node } = getContext(this);\r\n\t\tconst expression = this.expression = node.getAttribute(`(scrollTo)`);\r\n\t\tthis.outputFunction = module.makeFunction(expression, ['$event']);\r\n\t\tthis.scrollTo$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t}\r\n\r\n\tscrollTo$() {\r\n\t\tconst { module, node, parentInstance } = getContext(this);\r\n\t\treturn fromEvent(node, 'click').pipe(\r\n\t\t\ttap(event => {\r\n\t\t\t\tconst result = module.resolve(this.outputFunction, parentInstance, event);\r\n\t\t\t\tif (typeof result === 'string') {\r\n\t\t\t\t\tconst target = document.querySelector(result);\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tconst from = this.currentTop();\r\n\t\t\t\t\t\tconst to = from + target.getBoundingClientRect().top - 50;\r\n\t\t\t\t\t\tconst o = { pow: 0 };\r\n\t\t\t\t\t\tconst html = document.querySelector('html');\r\n\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t'scroll-behavior': 'auto'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgsap.to(o, Math.abs((to - from)) / 2000, {\r\n\t\t\t\t\t\t\tpow: 1,\r\n\t\t\t\t\t\t\tease: Quad.easeOut,\r\n\t\t\t\t\t\t\toverwrite: 'all',\r\n\t\t\t\t\t\t\tonUpdate: () => {\r\n\t\t\t\t\t\t\t\twindow.scrollTo(0, from + (to - from) * o.pow);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonComplete: () => {\r\n\t\t\t\t\t\t\t\tgsap.set(html, {\r\n\t\t\t\t\t\t\t\t\t'scroll-behavior': 'smooth'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tshareReplay(1)\r\n\t\t);\r\n\t}\r\n\r\n\tcurrentTop() {\r\n\t\t// Firefox, Chrome, Opera, Safari\r\n\t\tif (self.pageYOffset) return self.pageYOffset;\r\n\t\t// Internet Explorer 6 - standards mode\r\n\t\tif (document.documentElement && document.documentElement.scrollTop)\r\n\t\t\treturn document.documentElement.scrollTop;\r\n\t\t// Internet Explorer 6, 7 and 8\r\n\t\tif (document.body.scrollTop) return document.body.scrollTop;\r\n\t\treturn 0;\r\n\t}\r\n\r\n}\r\n\r\nScrollToDirective.meta = {\r\n\tselector: `[(scrollTo)]`\r\n};\r\n","export default class DownloadService {\r\n\r\n\tstatic get a() {\r\n\t\tlet a = this.a_;\r\n\t\tif (!a) {\r\n\t\t\ta = document.createElement(\"a\");\r\n\t\t\ta.style = \"display: none\";\r\n\t\t\tdocument.body.appendChild(a);\r\n\t\t\tthis.a_ = a;\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tstatic download(blob, fileName = 'download.txt') {\r\n\t\t// var json = JSON.stringify(data),\r\n\t\t// blob = new Blob([json], {type: \"octet/stream\"}),\r\n\t\tconst url = window.URL.createObjectURL(blob);\r\n\t\tconst a = this.a;\r\n\t\ta.href = url;\r\n\t\ta.download = fileName;\r\n\t\ta.click();\r\n\t\twindow.URL.revokeObjectURL(url);\r\n\t}\r\n\r\n}\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { first, takeUntil } from 'rxjs/operators';\r\nimport DownloadService from '../download/download.service';\r\nimport { STATIC } from '../environment/environment';\r\nimport HttpService from '../http/http.service';\r\nimport ModalService, { ModalResolveEvent } from '../modal/modal.service';\r\nimport UserService from '../user/user.service';\r\n\r\nconst src = STATIC ? '/tiemme-com/club-modal.html' : '/Viewdoc.cshtml?co_id=23649';\r\n\r\nexport default class SecureDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.href = node.getAttribute('href');\r\n\t\tfromEvent(node, 'click').pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.tryDownloadHref();\r\n\t\t});\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.href = node.getAttribute('href');\r\n\t}\r\n\r\n\ttryDownloadHref() {\r\n\t\tHttpService.get$(this.href, undefined, 'blob').pipe(\r\n\t\t\tfirst(),\r\n\t\t).subscribe(blob => {\r\n\t\t\tDownloadService.download(blob, this.href.split('/').pop());\r\n\t\t}, error => {\r\n\t\t\tconsole.log(error);\r\n\t\t\tthis.onLogin(event);\r\n\t\t});\r\n\t}\r\n\r\n\tonLogin(event) {\r\n\t\t// console.log('SecureDirective.onLogin');\r\n\t\t// event.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 1 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onLogin', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t\tthis.tryDownloadHref();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\r\n\t/*\r\n\tonRegister(event) {\r\n\t\t// console.log('SecureDirective.onRegister');\r\n\t\t// event.preventDefault();\r\n\t\tModalService.open$({ src: src, data: { view: 2 } }).pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(event => {\r\n\t\t\t// console.log('SecureDirective.onRegister', event);\r\n\t\t\tif (event instanceof ModalResolveEvent) {\r\n\t\t\t\tUserService.setUser(event.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\t// this.pushChanges();\r\n\t}\r\n\t*/\r\n\r\n}\r\n\r\nSecureDirective.meta = {\r\n\tselector: '[secure]',\r\n};\r\n","import { Pipe } from \"rxcomp\";\r\n\r\nexport default class FileSizePipe extends Pipe {\r\n\r\n\tstatic transform(value, si = true) {\r\n\t\tvalue = parseInt(value);\r\n\t\tconst unit = si ? 1000 : 1024;\r\n\t\tif (Math.abs(value) < unit) {\r\n\t\t\treturn value + ' B';\r\n\t\t}\r\n\t\tconst units = si ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'] : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n\t\tlet u = -1;\r\n\t\tdo {\r\n\t\t\tvalue /= unit;\r\n\t\t\t++u;\r\n\t\t} while (Math.abs(value) >= unit && u < units.length - 1);\r\n\t\treturn `${value.toFixed(1)} ${units[u]}`;\r\n\t}\r\n\r\n}\r\n\r\nFileSizePipe.meta = {\r\n\tname: 'fileSize',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { Subject } from 'rxjs';\r\n\r\nexport default class SwiperDirective extends Component {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tspeed: 600,\r\n\t\t\tautoplay: {\r\n\t\t\t\tdelay: 5000,\r\n\t\t\t},\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n\tget enabled() {\r\n\t\treturn !window.matchMedia('print').matches;\r\n\t}\r\n\r\n\tonChanges() {\r\n\t\tthis.swiperInitOrUpdate_();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners_();\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tonBeforePrint() {\r\n\t\tthis.swiperDestroy_();\r\n\t}\r\n\r\n\tslideToIndex(index) {\r\n\t\t// console.log('SwiperDirective.slideToIndex', index);\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.slideTo(index);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_() {\r\n\t\tthis.events$ = new Subject();\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tgsap.set(node, { opacity: 0 });\r\n\t\t\tthis.index = 0;\r\n\t\t\tconst on = this.options.on || {};\r\n\t\t\ton.slideChange = () => {\r\n\t\t\t\tconst swiper = this.swiper;\r\n\t\t\t\tthis.index = swiper.activeIndex;\r\n\t\t\t\tthis.events$.next(this.index);\r\n\t\t\t\tthis.pushChanges();\r\n\t\t\t};\r\n\t\t\tthis.options.on = on;\r\n\t\t\tthis.addListeners_();\r\n\t\t}\r\n\t}\r\n\r\n\taddListeners_() {\r\n\t\tthis.onBeforePrint = this.onBeforePrint.bind(this);\r\n\t\twindow.addEventListener('beforeprint', this.onBeforePrint);\r\n\t\t/*\r\n\t\tscope.$on('onResize', ($scope) => {\r\n\t\t\tthis.onResize(scope, element, attributes);\r\n\t\t});\r\n\t\t*/\r\n\t}\r\n\r\n\tremoveListeners_() {\r\n\t\twindow.removeEventListener('beforeprint', this.onBeforePrint);\r\n\t}\r\n\r\n\tswiperInitOrUpdate_() {\r\n\t\tif (this.enabled) {\r\n\t\t\tconst { node } = getContext(this);\r\n\t\t\tif (this.swiper) {\r\n\t\t\t\tthis.swiper.update();\r\n\t\t\t} else {\r\n\t\t\t\tlet swiper;\r\n\t\t\t\tconst on = this.options.on || (this.options.on = {});\r\n\t\t\t\tconst callback = on.init;\r\n\t\t\t\tif (!on.init || !on.init.swiperDirectiveInit) {\r\n\t\t\t\t\ton.init = function() {\r\n\t\t\t\t\t\tgsap.to(node, 0.4, {\r\n\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\tease: Power2.easeOut,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\t\t\t\t\tcallback.apply(this, [swiper, element, scope]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t};\r\n\t\t\t\t\ton.init.swiperDirectiveInit = true;\r\n\t\t\t\t}\r\n\t\t\t\tgsap.set(node, { opacity: 1 });\r\n\t\t\t\tswiper = new Swiper(node, this.options);\r\n\t\t\t\tthis.swiper = swiper;\r\n\t\t\t\tthis.swiper._opening = true;\r\n\t\t\t\tnode.classList.add('swiper-init');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswiperDestroy_() {\r\n\t\tif (this.swiper) {\r\n\t\t\tthis.swiper.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\topenMore(event) {\r\n\t\tthis.more.next(event);\r\n\t}\r\n}\r\n\r\nSwiperDirective.meta = {\r\n\tselector: '[swiper]',\r\n\tinputs: ['consumer'],\r\n\toutputs: ['more']\r\n};\r\n","import SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperListingDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tspaceBetween: 30,\r\n\t\t\tspeed: 600,\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t\t// console.log('SwiperListingDirective.onInit');\r\n\t}\r\n\r\n}\r\n\r\nSwiperListingDirective.meta = {\r\n\tselector: '[swiper-listing]'\r\n};\r\n","import SwiperDirective from './swiper.directive';\r\n\r\nexport default class SwiperSlidesDirective extends SwiperDirective {\r\n\r\n\tonInit() {\r\n\t\tthis.options = {\r\n\t\t\tslidesPerView: 3,\r\n\t\t\tspaceBetween: 0,\r\n\t\t\tcenteredSlides: true,\r\n\t\t\tloop: false,\r\n\t\t\tloopAdditionalSlides: 100,\r\n\t\t\tspeed: 600,\r\n\t\t\t/*\r\n\t\t\tautoplay: {\r\n\t\t\t    delay: 5000,\r\n\t\t\t},\r\n\t\t\t*/\r\n\t\t\tkeyboardControl: true,\r\n\t\t\tmousewheelControl: false,\r\n\t\t\tonSlideClick: function(swiper) {\r\n\t\t\t\t// angular.element(swiper.clickedSlide).scope().clicked(angular.element(swiper.clickedSlide).scope().$index);\r\n\t\t\t},\r\n\t\t\tpagination: {\r\n\t\t\t\tel: '.swiper-pagination',\r\n\t\t\t\tclickable: true,\r\n\t\t\t},\r\n\t\t\tnavigation: {\r\n\t\t\t\tnextEl: '.swiper-button-next',\r\n\t\t\t\tprevEl: '.swiper-button-prev',\r\n\t\t\t},\r\n\t\t\tkeyboard: {\r\n\t\t\t\tenabled: true,\r\n\t\t\t\tonlyInViewport: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\tthis.init_();\r\n\t}\r\n\r\n}\r\n\r\nSwiperSlidesDirective.meta = {\r\n\tselector: '[swiper-slides]'\r\n};\r\n","function push_(event) {\r\n\tconst dataLayer = window.dataLayer || [];\r\n\tdataLayer.push(event);\r\n\tconsole.log('GtmService.dataLayer', event);\r\n}\r\n\r\nexport default class GtmService {\r\n\r\n\tstatic push(event) {\r\n\t\treturn push_(event);\r\n\t}\r\n\r\n}\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport GtmService from '../gtm/gtm.service';\r\nimport SwiperDirective from '../swiper/swiper.directive';\r\n\r\nexport default class VideoComponent extends Component {\r\n\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.item = {};\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tnode.classList.add('video');\r\n\t\tthis.video = node.querySelector('video');\r\n\t\tthis.progress = node.querySelector('.icon--play-progress path');\r\n\t\tif (parentInstance instanceof SwiperDirective) {\r\n\t\t\tparentInstance.events$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => this.pause());\r\n\t\t}\r\n\t\tthis.addListeners();\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.removeListeners();\r\n\t}\r\n\r\n\taddListeners() {\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tthis.onPlay = this.onPlay.bind(this);\r\n\t\t\tthis.onPause = this.onPause.bind(this);\r\n\t\t\tthis.onEnded = this.onEnded.bind(this);\r\n\t\t\tthis.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n\t\t\tvideo.addEventListener('play', this.onPlay);\r\n\t\t\tvideo.addEventListener('pause', this.onPause);\r\n\t\t\tvideo.addEventListener('ended', this.onEnded);\r\n\t\t\tvideo.addEventListener('timeupdate', this.onTimeUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\tremoveListeners() {\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tvideo.removeEventListener('play', this.onPlay);\r\n\t\t\tvideo.removeEventListener('pause', this.onPause);\r\n\t\t\tvideo.removeEventListener('ended', this.onEnded);\r\n\t\t\tvideo.removeEventListener('timeupdate', this.onTimeUpdate);\r\n\t\t}\r\n\t}\r\n\r\n\ttogglePlay() {\r\n\t\t// console.log('VideoComponent.togglePlay')\r\n\t\tconst video = this.video;\r\n\t\tif (video) {\r\n\t\t\tif (video.paused) {\r\n\t\t\t\tthis.play();\r\n\t\t\t} else {\r\n\t\t\t\tthis.pause();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\tconst video = this.video;\r\n\t\tvideo.muted = false;\r\n\t\tvideo.play();\r\n\t}\r\n\r\n\tpause() {\r\n\t\tconst video = this.video;\r\n\t\tvideo.muted = true;\r\n\t\tvideo.pause();\r\n\t}\r\n\r\n\tonPlay() {\r\n\t\tthis.playing = true;\r\n\t\tGtmService.push({\r\n\t\t\tevent: 'video play',\r\n\t\t\tvideo_name: this.video.src\r\n\t\t});\r\n\t}\r\n\r\n\tonPause() {\r\n\t\tthis.playing = false;\r\n\t}\r\n\r\n\tonEnded() {\r\n\t\tthis.playing = false;\r\n\t}\r\n\r\n\tonTimeUpdate() {\r\n\t\tthis.progress.style.strokeDashoffset = this.video.currentTime / this.video.duration;\r\n\t}\r\n\r\n}\r\n\r\nVideoComponent.meta = {\r\n\tselector: '[video]',\r\n\tinputs: ['item'],\r\n};\r\n","import { Component } from 'rxcomp';\r\nimport { FormControl, FormGroup, Validators } from 'rxcomp-form';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport HttpService from '../http/http.service';\r\n\r\nexport default class WorkWithUsComponent extends Component {\r\n\r\n\tonInit() {\r\n\t\tconst data = window.data || {\r\n\t\t\tdepartments: []\r\n\t\t};\r\n\r\n\t\tconst form = new FormGroup({\r\n\t\t\tfirstName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tlastName: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\temail: new FormControl(null, [Validators.RequiredValidator(), Validators.EmailValidator()]),\r\n\t\t\ttelephone: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\texperience: null,\r\n\t\t\tcompany: new FormControl(null),\r\n\t\t\tdepartment: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tintroduction: new FormControl(null),\r\n\t\t\tprivacy: new FormControl(null, Validators.RequiredTrueValidator()),\r\n\t\t\tcurricula: new FormControl(null, Validators.RequiredValidator()),\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\r\n\t\tconst controls = form.controls;\r\n\t\tcontrols.department.options = data.departments;\r\n\t\tthis.controls = controls;\r\n\r\n\t\tform.changes$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe((changes) => {\r\n\t\t\t// console.log('WorkWithUsComponent.form.changes$', changes, form.valid);\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\r\n\t\tthis.data = data;\r\n\t\tthis.form = form;\r\n\t\tthis.error = null;\r\n\t\tthis.success = false;\r\n\t}\r\n\r\n\ttest() {\r\n\t\tthis.form.patch({\r\n\t\t\tfirstName: 'Jhon',\r\n\t\t\tlastName: 'Appleseed',\r\n\t\t\temail: 'jhonappleseed@gmail.com',\r\n\t\t\ttelephone: '00390721411112',\r\n\t\t\texperience: false,\r\n\t\t\tcompany: 'Websolute',\r\n\t\t\tdepartment: this.controls.department.options[0].id,\r\n\t\t\tintroduction: 'Hi!',\r\n\t\t\tprivacy: true,\r\n\t\t\tcurricula: {},\r\n\t\t\tcheckRequest: window.antiforgery,\r\n\t\t\tcheckField: ''\r\n\t\t});\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tonSubmit() {\r\n\t\t// console.log('WorkWithUsComponent.onSubmit', 'form.valid', valid);\r\n\t\tif (this.form.valid) {\r\n\t\t\t// console.log('WorkWithUsComponent.onSubmit', this.form.value);\r\n\t\t\tthis.form.submitted = true;\r\n\t\t\tHttpService.post$('/api/users/WorkWithUs', this.form.value)\r\n\t\t\t\t.subscribe(response => {\r\n\t\t\t\t\tconsole.log('WorkWithUsComponent.onSubmit', response);\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.form.reset();\r\n\t\t\t\t\t// this.pushChanges();\r\n\t\t\t\t\tdataLayer.push({\r\n\t\t\t\t\t\t'event': 'formSubmission',\r\n\t\t\t\t\t\t'form type': 'Lavora con Noi'\r\n\t\t\t\t\t});\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('WorkWithUsComponent.error', error);\r\n\t\t\t\t\tthis.error = error;\r\n\t\t\t\t\tthis.pushChanges();\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.form.touched = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nWorkWithUsComponent.meta = {\r\n\tselector: '[work-with-us]',\r\n};\r\n","import { Component, getContext } from 'rxcomp';\r\nimport { BehaviorSubject, interval, Subject } from 'rxjs';\r\nimport { distinctUntilChanged, filter, map, switchMap, takeUntil, tap } from 'rxjs/operators';\r\nimport SwiperDirective from '../swiper/swiper.directive';\r\n\r\nexport default class YoutubeComponent extends Component {\r\n\r\n\tget playing() {\r\n\t\treturn this.playing_;\r\n\t}\r\n\r\n\tset playing(playing) {\r\n\t\tif (this.playing_ !== playing) {\r\n\t\t\tthis.playing_ = playing;\r\n\t\t\tthis.pushChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tget cover() {\r\n\t\treturn this.youtubeId ? `//i.ytimg.com/vi/${this.youtubeId}/maxresdefault.jpg` : '';\r\n\t}\r\n\r\n\tonInit() {\r\n\t\tthis.item = {};\r\n\t\tconst { node, parentInstance } = getContext(this);\r\n\t\tnode.classList.add('youtube');\r\n\t\tif (YoutubeComponent.MOBILE) {\r\n\t\t\tnode.classList.add('mobile');\r\n\t\t}\r\n\t\tthis.progress = node.querySelector('.icon--play-progress path');\r\n\t\tthis.onPlayerReady = this.onPlayerReady.bind(this);\r\n\t\tthis.onPlayerStateChange = this.onPlayerStateChange.bind(this);\r\n\t\tthis.onPlayerError = this.onPlayerError.bind(this);\r\n\t\tthis.id$ = new Subject().pipe(distinctUntilChanged());\r\n\t\tif (parentInstance instanceof SwiperDirective) {\r\n\t\t\tparentInstance.events$.pipe(\r\n\t\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t\t).subscribe(event => this.pause());\r\n\t\t}\r\n\t\t// this.addListeners();\r\n\t}\r\n\r\n\tonChanges(changes) {\r\n\t\tconst id = this.youtubeId;\r\n\t\t// console.log('YoutubeComponent.onChanges', id);\r\n\t\tthis.id$.next(id);\r\n\t}\r\n\r\n\tinitPlayer() {\r\n\t\t// console.log('VideoComponent.initPlayer');\r\n\t\tthis.player$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(player => {\r\n\t\t\tconsole.log('YoutubeComponent.player$', player);\r\n\t\t});\r\n\t\tthis.interval$().pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(() => {});\r\n\t\tthis.id$.next(this.youtubeId);\r\n\t}\r\n\r\n\tplayer$() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tconst video = node.querySelector('.video');\r\n\t\treturn this.id$.pipe(\r\n\t\t\tswitchMap(id => {\r\n\t\t\t\t// console.log('YoutubeComponent.videoId', id);\r\n\t\t\t\treturn YoutubeComponent.once$().pipe(\r\n\t\t\t\t\tmap(youtube => {\r\n\t\t\t\t\t\t// console.log('YoutubeComponent.once$', youtube);\r\n\t\t\t\t\t\tthis.destroyPlayer();\r\n\t\t\t\t\t\tthis.player = new youtube.Player(video, {\r\n\t\t\t\t\t\t\twidth: node.offsetWidth,\r\n\t\t\t\t\t\t\theight: node.offsetHeight,\r\n\t\t\t\t\t\t\tvideoId: id,\r\n\t\t\t\t\t\t\tplayerVars: {\r\n\t\t\t\t\t\t\t\tautoplay: 1,\r\n\t\t\t\t\t\t\t\tcontrols: 1, // YoutubeComponent.MOBILE ? 1 : 0,\r\n\t\t\t\t\t\t\t\tdisablekb: 1,\r\n\t\t\t\t\t\t\t\tenablejsapi: 1,\r\n\t\t\t\t\t\t\t\tfs: 0,\r\n\t\t\t\t\t\t\t\tloop: 1,\r\n\t\t\t\t\t\t\t\tmodestbranding: 1,\r\n\t\t\t\t\t\t\t\tplaysinline: 1,\r\n\t\t\t\t\t\t\t\trel: 0,\r\n\t\t\t\t\t\t\t\tshowinfo: 0,\r\n\t\t\t\t\t\t\t\tiv_load_policy: 3,\r\n\t\t\t\t\t\t\t\tlistType: 'user_uploads',\r\n\t\t\t\t\t\t\t\t// origin: 'https://log6i.csb.app/'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tevents: {\r\n\t\t\t\t\t\t\t\tonReady: this.onPlayerReady,\r\n\t\t\t\t\t\t\t\tonStateChange: this.onPlayerStateChange,\r\n\t\t\t\t\t\t\t\tonPlayerError: this.onPlayerError\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn this.player;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\tonPlayerReady(event) {\r\n\t\t// console.log('YoutubeComponent.onPlayerReady', event);\r\n\t\tevent.target.mute();\r\n\t\tevent.target.playVideo();\r\n\t}\r\n\r\n\tonPlayerStateChange(event) {\r\n\t\t// console.log('YoutubeComponent.onPlayerStateChange', event.data);\r\n\t\tif (event.data === 1) {\r\n\t\t\tthis.playing = true;\r\n\t\t} else {\r\n\t\t\tthis.playing = false;\r\n\t\t}\r\n\t}\r\n\r\n\tonPlayerError(event) {\r\n\t\tconsole.log('YoutubeComponent.onPlayerError', event);\r\n\t}\r\n\r\n\tdestroyPlayer() {\r\n\t\tif (this.player) {\r\n\t\t\tthis.player.destroy();\r\n\t\t}\r\n\t}\r\n\r\n\tonDestroy() {\r\n\t\tthis.destroyPlayer();\r\n\t}\r\n\r\n\tinterval$() {\r\n\t\treturn interval(500).pipe(\r\n\t\t\tfilter(() => this.playing && this.player),\r\n\t\t\ttap(() => {\r\n\t\t\t\tthis.progress.style.strokeDashoffset =\r\n\t\t\t\t\tthis.player.getCurrentTime() / this.player.getDuration();\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\ttogglePlay() {\r\n\t\t// console.log('VideoComponent.togglePlay');\r\n\t\tif (this.playing) {\r\n\t\t\tthis.pause();\r\n\t\t} else {\r\n\t\t\tthis.play();\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\t// console.log('VideoComponent.play');\r\n\t\tif (!this.player) {\r\n\t\t\tthis.initPlayer();\r\n\t\t} else {\r\n\t\t\tthis.player.playVideo();\r\n\t\t}\r\n\t}\r\n\r\n\tpause() {\r\n\t\tif (!this.player) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.player.stopVideo();\r\n\t}\r\n\r\n\tstatic once$() {\r\n\t\tif (this.youtube$) {\r\n\t\t\treturn this.youtube$;\r\n\t\t} else {\r\n\t\t\tthis.youtube$ = new BehaviorSubject(null).pipe(\r\n\t\t\t\tfilter(youtube => youtube !== null)\r\n\t\t\t);\r\n\t\t\twindow.onYouTubeIframeAPIReady = this.onYouTubeIframeAPIReady_.bind(this);\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tconst scripts = document.querySelectorAll('script');\r\n\t\t\tconst last = scripts[scripts.length - 1];\r\n\t\t\tlast.parentNode.insertBefore(script, last);\r\n\t\t\tscript.src = '//www.youtube.com/iframe_api';\r\n\t\t\treturn this.youtube$;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic onYouTubeIframeAPIReady_() {\r\n\t\t// console.log('onYouTubeIframeAPIReady');\r\n\t\tthis.youtube$.next(window.YT);\r\n\t}\r\n\r\n\tstatic mobilecheck() {\r\n\t\tlet check = false;\r\n\t\t(function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n\t\treturn check;\r\n\t}\r\n\r\n\tstatic mobileAndTabletcheck() {\r\n\t\tlet check = false;\r\n\t\t(function(a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true; })(navigator.userAgent || navigator.vendor || window.opera);\r\n\t\treturn check;\r\n\t}\r\n\r\n}\r\n\r\nYoutubeComponent.MOBILE = YoutubeComponent.mobileAndTabletcheck();\r\n\r\nYoutubeComponent.meta = {\r\n\tselector: '[youtube]',\r\n\tinputs: ['youtubeId', 'title']\r\n};\r\n","import { Directive, getContext } from 'rxcomp';\r\nimport { fromEvent } from 'rxjs';\r\nimport { map, takeUntil } from 'rxjs/operators';\r\n\r\nexport default class ZoomableDirective extends Directive {\r\n\r\n\tonInit() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.add('zoomable');\r\n\t\tconst target = node.getAttribute('zoomable') !== '' ? node.querySelectorAll(node.getAttribute('zoomable')) : node;\r\n\t\tfromEvent(target, 'click').pipe(\r\n\t\t\tmap($event => this.zoom = !this.zoom),\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(zoom => console.log('ZoomableDirective', zoom));\r\n\t}\r\n\r\n\tget zoom() {\r\n\t\treturn this.zoom_;\r\n\t}\r\n\r\n\tset zoom(zoom) {\r\n\t\tif (this.zoom_ !== zoom) {\r\n\t\t\tthis.zoom_ = zoom;\r\n\t\t\tif (zoom) {\r\n\t\t\t\tthis.zoomIn();\r\n\t\t\t} else {\r\n\t\t\t\tthis.zoomOut();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tzoomIn() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tthis.rect = node.getBoundingClientRect();\r\n\t\tthis.parentNode = node.parentNode;\r\n\t\tdocument.querySelector('body').appendChild(node);\r\n\t\tgsap.set(node, {\r\n\t\t\tleft: this.rect.left,\r\n\t\t\ttop: this.rect.top,\r\n\t\t\twidth: this.rect.width,\r\n\t\t\theight: this.rect.height,\r\n\t\t\tposition: 'fixed'\r\n\t\t});\r\n\t\tnode.classList.add('zoom');\r\n\t\tgsap.set(node, { position: 'fixed' });\r\n\t\tconst to = {\r\n\t\t\tleft: 0,\r\n\t\t\ttop: 0,\r\n\t\t\twidth: window.innerWidth,\r\n\t\t\theight: window.innerHeight,\r\n\t\t};\r\n\t\tgsap.to(node, {\r\n\t\t\t...to,\r\n\t\t\tduration: 0.7,\r\n\t\t\tease: Power3.easeInOut,\r\n\t\t\tonComplete: () => {\r\n\t\t\t\tnode.classList.add('zoomed');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tzoomOut() {\r\n\t\tconst { node } = getContext(this);\r\n\t\tnode.classList.remove('zoomed');\r\n\t\tconst to = {\r\n\t\t\tleft: this.rect.left,\r\n\t\t\ttop: this.rect.top,\r\n\t\t\twidth: this.rect.width,\r\n\t\t\theight: this.rect.height\r\n\t\t};\r\n\t\tgsap.to(node, {\r\n\t\t\t...to,\r\n\t\t\tduration: 0.7,\r\n\t\t\tease: Power3.easeInOut,\r\n\t\t\tonComplete: () => {\r\n\t\t\t\tthis.parentNode.appendChild(node);\r\n\t\t\t\tgsap.set(node, { clearProps: 'all' });\r\n\t\t\t\tnode.classList.remove('zoom');\r\n\t\t\t\tthis.parentNode = null;\r\n\t\t\t\tthis.rect = null;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nZoomableDirective.meta = {\r\n\tselector: '[zoomable]'\r\n};\r\n","import { CoreModule, Module } from 'rxcomp';\r\nimport { FormModule } from 'rxcomp-form';\r\nimport AgentsComponent from './agents/agents.component';\r\nimport AppComponent from './app.component';\r\nimport AppearDirective from './appear/appear.directive';\r\nimport BimLibrary01Component from './bim-library/bim-library-01.component';\r\nimport BimLibrary02Component from './bim-library/bim-library-02.component';\r\nimport BimLibraryComponent from './bim-library/bim-library.component';\r\nimport ClickOutsideDirective from './click-outside/click-outside.directive';\r\nimport ClubForgotComponent from './club/club-forgot.component';\r\nimport ClubModalComponent from './club/club-modal.component';\r\nimport ClubPasswordEditComponent from './club/club-password-edit.component';\r\nimport ClubPasswordRecoveryComponent from './club/club-password-recovery.component';\r\nimport ClubProfileComponent from './club/club-profile.component';\r\nimport ClubSigninComponent from './club/club-signin.component';\r\nimport ClubSignupComponent from './club/club-signup.component';\r\nimport ClubComponent from './club/club.component';\r\nimport DownloadsComponent from './download/downloads.component';\r\nimport DropdownItemDirective from './dropdown/dropdown-item.directive';\r\nimport DropdownDirective from './dropdown/dropdown.directive';\r\nimport FilterMenuItemComponent from './filter/filter-menu-item.component';\r\nimport ControlCheckboxComponent from './forms/control-checkbox.component';\r\nimport ControlCustomSelectComponent from './forms/control-custom-select.component';\r\nimport ControlEmailComponent from './forms/control-email.component';\r\nimport ControlFileComponent from './forms/control-file.component';\r\nimport ControlPasswordComponent from './forms/control-password.component';\r\nimport ControlSelectComponent from './forms/control-select.component';\r\nimport ControlTextComponent from './forms/control-text.component';\r\nimport ControlTextareaComponent from './forms/control-textarea.component';\r\nimport ErrorsComponent from './forms/errors.component';\r\nimport TestComponent from './forms/test.component';\r\n// import ValueDirective from './forms/value.directive';\r\nimport HeaderComponent from './header/header.component';\r\nimport HtmlPipe from './html/html.pipe';\r\nimport LazyDirective from './lazy/lazy.directive';\r\nimport MainMenuComponent from './main-menu/main-menu.component';\r\nimport MediaLibraryComponent from './media-library/media-library';\r\nimport ModalOutletComponent from './modal/modal-outlet.component';\r\nimport ModalComponent from './modal/modal.component';\r\nimport NaturalFormContactComponent from './natural-form/natural-form-contact.component';\r\nimport NaturalFormControlComponent from './natural-form/natural-form-control.component';\r\nimport NaturalFormNewsletterComponent from './natural-form/natural-form-newsletter.component';\r\nimport NaturalFormRequestInfoComponent from './natural-form/natural-form-request-info.component';\r\nimport NaturalFormSearchComponent from './natural-form/natural-form-search.component';\r\nimport NaturalFormSignupComponent from './natural-form/natural-form-signup.component';\r\nimport NaturalFormComponent from './natural-form/natural-form.component';\r\nimport PriceListComponent from './price-list/price-list';\r\nimport RegisterOrLoginComponent from './register-or-login/register-or-login.component';\r\nimport RequestInfoCommercialComponent from './request-info-commercial/request-info-commercial.component';\r\nimport ReservedAreaComponent from './reserved-area/reserved-area.component';\r\nimport ScrollToDirective from './scroll-to/scroll-to.directive';\r\nimport SecureDirective from './secure/secure.directive';\r\nimport FileSizePipe from './size/size.pipe';\r\nimport SwiperListingDirective from './swiper/swiper-listing.directive';\r\nimport SwiperSlidesDirective from './swiper/swiper-slides.directive';\r\nimport SwiperDirective from './swiper/swiper.directive';\r\nimport VideoComponent from './video/video.component';\r\nimport WorkWithUsComponent from './work-with-us/work-with-us.component';\r\nimport YoutubeComponent from './youtube/youtube.component';\r\nimport ZoomableDirective from './zoomable/zoomable.directive';\r\n\r\nexport default class AppModule extends Module {}\r\n\r\nAppModule.meta = {\r\n\timports: [\r\n\t\tCoreModule,\r\n\t\tFormModule,\r\n\t],\r\n\tdeclarations: [\r\n\t\tAgentsComponent,\r\n\t\tAppearDirective,\r\n\t\tBimLibraryComponent,\r\n\t\tBimLibrary01Component,\r\n\t\tBimLibrary02Component,\r\n\t\tClickOutsideDirective,\r\n\t\tClubComponent,\r\n\t\tClubForgotComponent,\r\n\t\tClubModalComponent,\r\n\t\tClubPasswordRecoveryComponent,\r\n\t\tClubPasswordEditComponent,\r\n\t\tClubProfileComponent,\r\n\t\tClubSigninComponent,\r\n\t\tClubSignupComponent,\r\n\t\tControlCheckboxComponent,\r\n\t\tControlCustomSelectComponent,\r\n\t\tControlEmailComponent,\r\n\t\tControlFileComponent,\r\n\t\tControlPasswordComponent,\r\n\t\tControlSelectComponent,\r\n\t\tControlTextComponent,\r\n\t\tControlTextareaComponent,\r\n\t\tDownloadsComponent,\r\n\t\tDropdownDirective,\r\n\t\tDropdownItemDirective,\r\n\t\tErrorsComponent,\r\n\t\tFilterMenuItemComponent,\r\n\t\tFileSizePipe,\r\n\t\tHtmlPipe,\r\n\t\tHeaderComponent,\r\n\t\tLazyDirective,\r\n\t\tMainMenuComponent,\r\n\t\tMediaLibraryComponent,\r\n\t\tModalOutletComponent,\r\n\t\tModalComponent,\r\n\t\tPriceListComponent,\r\n\t\tNaturalFormComponent,\r\n\t\tNaturalFormSearchComponent,\r\n\t\tNaturalFormContactComponent,\r\n\t\tNaturalFormRequestInfoComponent,\r\n\t\tNaturalFormControlComponent,\r\n\t\tNaturalFormNewsletterComponent,\r\n\t\tNaturalFormSignupComponent,\r\n\t\tRequestInfoCommercialComponent,\r\n\t\tRegisterOrLoginComponent,\r\n\t\tReservedAreaComponent,\r\n\t\tSecureDirective,\r\n\t\tScrollToDirective,\r\n\t\tSwiperDirective,\r\n\t\tSwiperListingDirective,\r\n\t\tSwiperSlidesDirective,\r\n\t\tTestComponent,\r\n\t\t// ValueDirective,\r\n\t\tVideoComponent,\r\n\t\tWorkWithUsComponent,\r\n\t\tYoutubeComponent,\r\n\t\tZoomableDirective,\r\n\t],\r\n\tbootstrap: AppComponent,\r\n};\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}